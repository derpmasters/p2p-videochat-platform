{"version":3,"sources":["../node_modules/peerjs/dist sync","store/reducers/room.reducer.js","store/actionTypes.js","utils.js","store/reducers/localUser.reducer.js","store/reducers/peers.reducer.js","store/reducers/connections.reducer.js","store/reducers/calls.reducer.js","store/reducers/streams.reducer.js","store/reducers/plugin.reducer.js","store/reducers/chat.reducer.js","store/reducers/index.js","store/index.js","style/theme/MainTheme.jsx","store/actions/streams.actions.js","store/actions/calls.actions.js","store/actions/room.actions.js","store/actions/connections.actions.js","store/actions/localUser.actions.js","constants.js","components/RoomLobby/RoomLobby.jsx","store/actions/plugin.actions.js","components/Room/RoomPluginContent/RoomPluginContent.jsx","components/Room/GenericMediaCard/GenericMediaCard.jsx","components/Room/RoomMediaManager/RemoteMediaCard/RemoteMediaCard.jsx","components/Room/RoomMediaManager/RemoteMediaManager/RemoteMediaManager.jsx","components/Room/RoomMediaManager/RoomMediaManager.jsx","components/Room/RoomSidebarMenu/RoomSidebarMenu.jsx","components/Room/RoomSidebarChat/Chat/ChatMsg.jsx","components/Room/RoomSidebarChat/Chat/ChatStyle.jsx","components/Room/RoomSidebarChat/Chat/Chat.jsx","store/actions/chat.actions.js","components/Room/RoomSidebarChat/RoomSidebarChat.jsx","components/Room/RoomActionbar/RoomActionbar.jsx","components/Room/Room.jsx","components/Home/BulletPoint/BulletPoint.jsx","components/Home/Home.jsx","components/RoomCreateForm/RoomCreateForm.jsx","components/App/App.jsx","index.jsx"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","roomReducer","produce","roomDraft","action","type","data","payload","room","error","clearStreamTracks","stream","getTracks","forEach","track","stop","getPersistedData","key","dataJson","localStorage","getItem","JSON","parse","initialState","peer","socket","metadata","loading","localUserReducer","localPeerDraft","peersReducer","peersDraft","peerId","connectionsReducer","connectionsDraft","connection","callsReducer","callsDraft","call","streamsReducer","streamsDraft","Object","values","pluginReducer","pluginDraft","plugin","url","name","iframe","chatReducer","messagesDraft","push","reducer","combineReducers","localUser","peers","calls","connections","streams","chat","store","createStore","composeWithDevTools","applyMiddleware","thunk","theme","createMuiTheme","palette","primary","main","secondary","addStream","dispatch","getState","removeStream","startLocalStream","constraintsOverride","a","localPeer","constraints","audio","video","frameRate","ideal","max","width","height","navigator","mediaDevices","getUserMedia","mediaStream","console","log","addCall","initCallListeners","removeCall","on","remoteMediaStream","callConnection","localStream","setCurrentRoomError","addConnection","initConnectionListeners","removeConnection","connectionId","setTimeout","introduceYourself","textMessage","text","window","postMessage","contentWindow","remoteMetadata","connectWithPeer","remotePeerId","connect","sendDataToConnection","send","resetLocalUser","initLocalUserSocket","io","process","secure","query","object","entries","map","value","join","initLocalUserSocketListeners","socketId","initLocalUserPeer","customPeerId","Peer","host","port","path","config","iceServers","initLocalUserPeerListeners","answer","useStyles","makeStyles","containerStyle","display","justifyContent","paddingTop","titleStyle","padding","color","fontWeight","backgroundColor","nicknameStyle","margin","textfieldLink","marginRight","marginLeft","nextButton","boxShadow","alignbutton","marginTop","marginBottom","state","nickname","roomError","setMetadata","dataStringified","stringify","setItem","persistData","history","match","useState","newNickname","setNewNickname","params","roomId","link","setLink","classes","ThemeProvider","Box","bgcolor","alignItems","paddingLeft","to","style","textDecoration","Grid","container","className","item","xs","md","lg","flexDirection","borderRadius","Typography","variant","TextField","required","label","onChange","target","Button","onClick","size","textAlign","message","setPlugin","pluginMessageActions","evt","handlePluginMessage","startsWith","iframeRef","useRef","useEffect","handleMessage","addEventListener","removeEventListener","current","flexGrow","src","ref","title","root","cardWrapper","position","flexFlow","media","objectFit","displayName","opacity","bottom","left","fontSize","userSelect","GenericMediaCard","muted","user","videoRef","srcObject","oncanplay","play","setVideoSrc","Card","CircularProgress","ownProps","remoteStream","remoteNickname","roomMediaManager","localPeerMetadata","minWidth","list","menuIcon","plugins","open","setOpen","toggleDrawer","event","handleSelectPlugin","index","currentTarget","dataset","Drawer","onClose","anchor","role","List","i","ListItem","button","data-index","ListItemIcon","ListItemText","Divider","ChatMsg","withStyles","spacing","radius","rightBgColor","avatar","leftRow","rightRow","msg","wordBreak","fontFamily","borderTopRightRadius","borderBottomRightRadius","grey","right","borderTopLeftRadius","borderBottomLeftRadius","common","white","leftFirst","leftLast","rightFirst","rightLast","props","messages","side","GridContainerProps","GridItemProps","AvatarProps","getTypographyProps","justify","Avatar","cx","TypographyProps","align","length","defaultProps","chatContainer","textField","chatSection","customizeIcon","border","cursor","background","chatData","sendMessage","newMessage","setNewMessage","preventDefault","parseEmojis","toArray","reduce","previous","children","chatFeed","multiline","fullWidth","onKeyPress","overflowY","WebkitFlex","chatIcon","RoomSidebarChat","RoomActionbar","localPeerLoading","currentRoom","initLocalUser","joinRoom","password","emit","err","joinedUsers","roomExitCleanup","disconnect","conn","close","smallScreenContainer","alignTitle","customizeTitle","customizeText","paddingRight","BulletPoint","icon","smallScreen","useMediaQuery","content","image","alt","box","smallScreenBox","titleContainer","buttonStyle","outline","mainImg","smallScreenMainImg","bulletPoints","zIndex","smallScreenBulletPoints","Home","gutterBottom","formControl","select","borderColor","textfield","alignButton","myButton","paper","copyLink","subtitle","RoomCreateForm","React","setName","setRoomId","active","setActive","handleChangeTexfield","createRoomComponent","maxUsers","fetch","method","body","headers","then","response","json","testedString","ipRegex","test","shareRoomComponent","clipboard","writeText","App","CssBaseline","exact","component","RoomLobby","Room","ReactDOM","render","document","getElementById"],"mappings":"uJAAA,SAASA,EAAoBC,GAC5B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBF,EAAM,KAEjD,MADAC,EAAEE,KAAO,mBACHF,EAEPF,EAAoBK,KAAO,WAAa,MAAO,IAC/CL,EAAoBM,QAAUN,EAC9BO,EAAOC,QAAUR,EACjBA,EAAoBS,GAAK,K,oJCkBVC,EAfKC,aAAQ,SAACC,EAAWC,GACpC,OAAQA,EAAOC,MACX,ICIwB,mBDDpB,OAFAF,EAAUG,KAAOF,EAAOG,QAAQC,UAChCL,EAAUM,MAAQ,MAGtB,ICA8B,yBDE1B,YADAN,EAAUM,MAAQL,EAAOG,QAAQE,UAhBxB,CACjBH,KAAM,GAING,MAAO,O,0BEyCEC,EAAoB,SAAAC,GACzBA,GACAA,EAAOC,YAAYC,SAAQ,SAAAC,GAAK,OAAIA,EAAMC,WAIrCC,EAAmB,SAACC,GAC7B,IAAMC,EAAWC,aAAaC,QAAQH,GACtC,OAAOC,EAAWG,KAAKC,MAAMJ,GAAY,ICrDvCK,EAAe,CACjBC,KAAM,KACNC,OAAQ,KACRC,SAAUV,EAAiB,YAC3BW,SAAS,EACTlB,MAAO,MAwCImB,EArCU1B,aAAQ,SAAC2B,EAAgBzB,GAC9C,OAAQA,EAAOC,MACX,IFM8B,yBEJ1B,YADAwB,EAAeF,QAAUvB,EAAOG,QAAQoB,SAG5C,IFG8B,yBEA1B,OAFAE,EAAeJ,OAASrB,EAAOG,QAAQkB,YACvCI,EAAepB,MAAQ,MAG3B,IFD4B,uBEIxB,OAFAoB,EAAeL,KAAOpB,EAAOG,QAAQiB,UACrCK,EAAepB,MAAQ,MAG3B,IFL+B,0BEQ3B,OAFAoB,EAAeH,SAAWtB,EAAOG,QAAQmB,cACzCG,EAAepB,MAAQ,MAG3B,IFT4B,uBEWxB,YADAoB,EAAepB,MAAQL,EAAOG,QAAQE,OAG1C,IFZwB,mBEkBpB,OALAoB,EAAeL,KAAO,KACtBK,EAAeJ,OAAS,KACxBI,EAAeF,SAAU,EACzBE,EAAeH,SAAWV,EAAiB,iBAC3Ca,EAAepB,MAAQ,SAKhCc,GCZYO,EAxBM5B,aAAQ,SAAC6B,EAAY3B,GACtC,OAAQA,EAAOC,MACX,IHbgB,WGaA,IAAD,EACgBD,EAAOG,QAA3ByB,EADI,EACJA,OAAQN,EADJ,EACIA,SAGf,OAFAK,EAAWzB,KAAK0B,GAAU,CAACN,iBAC3BK,EAAWtB,MAAQ,MAGvB,IHlBmB,cGmBf,IAAMe,EAAOpB,EAAOG,QAAQiB,KAG5B,cAFOO,EAAWzB,KAAKkB,EAAKxB,SAC5B+B,EAAWtB,MAAQ,MAGvB,IHvBuB,kBGyBnB,YADAsB,EAAWtB,MAAQL,EAAOG,QAAQE,UAvBzB,CACjBH,KAAM,GAING,MAAO,OCsBIwB,EAtBY/B,aAAQ,SAACgC,EAAkB9B,GAClD,OAAQA,EAAOC,MACX,IJNsB,iBIOlB,IAAM8B,EAAa/B,EAAOG,QAAQ4B,WAGlC,OAFAD,EAAiB5B,KAAK6B,EAAWX,MAASW,OAC1CD,EAAiBzB,MAAQ,MAG7B,IJXyB,oBIYrB,IAAM0B,EAAa/B,EAAOG,QAAQ4B,WAGlC,cAFOD,EAAiB5B,KAAK6B,EAAWX,WACxCU,EAAiBzB,MAAQ,MAG7B,IJhB6B,wBIkBzB,YADAyB,EAAiBzB,MAAQL,EAAOG,QAAQE,UApB/B,CACjBH,KAAM,GACNG,MAAO,OCyBI2B,EAtBMlC,aAAQ,SAACmC,EAAYjC,GACtC,OAAQA,EAAOC,MACX,ILFgB,WKGZ,IAAMiC,EAAOlC,EAAOG,QAAQ+B,KAG5B,OAFAD,EAAW/B,KAAKgC,EAAKd,MAAQc,OAC7BD,EAAW5B,MAAQ,MAGvB,ILPmB,cKQf,IAAM6B,EAAOlC,EAAOG,QAAQ+B,KAG5B,cAFOD,EAAW/B,KAAKgC,EAAKd,WAC5Ba,EAAW5B,MAAQ,MAGvB,ILZuB,kBKcnB,YADA4B,EAAW5B,MAAQL,EAAOG,QAAQE,UApBzB,CACjBH,KAAM,GACNG,MAAO,OCiCI8B,EA7BQrC,aAAQ,SAACsC,EAAcpC,GAC1C,OAAQA,EAAOC,MACX,INCkB,aMDA,IAAD,EACYD,EAAOG,QAAzByB,EADM,EACNA,OAAQrB,EADF,EACEA,OAGf,OAFA6B,EAAalC,KAAK0B,GAAUrB,OAC5B6B,EAAa/B,MAAQ,MAGzB,INJqB,gBMKjB,IAAMuB,EAAS5B,EAAOG,QAAQyB,OACxBrB,EAAS6B,EAAalC,KAAK0B,GAGjC,OAFAtB,EAAkBC,eACX6B,EAAalC,KAAK0B,GAG7B,INVyB,mBMYrB,YADAQ,EAAa/B,MAAQL,EAAOG,QAAQE,OAGxC,INbyB,oBMiBrB,OAHAgC,OAAOC,OAAOF,EAAalC,MAAMO,QAAQH,GACzC8B,EAAalC,KAAO,QACpBkC,EAAa/B,MAAQ,SA3BZ,CACjBH,KAAM,GACNG,MAAO,OC0BIkC,EAlBOzC,aAAQ,SAAC0C,EAAaxC,GACxC,OAAQA,EAAOC,MACX,IPWkB,aOXA,IAAD,EACeD,EAAOG,QAAQsC,OAApCC,EADM,EACNA,IAAKC,EADC,EACDA,KAAMC,EADL,EACKA,OAKlB,OAJAJ,EAAYI,OAASA,EACrBJ,EAAYE,IAAMA,EAClBF,EAAYG,KAAOA,OACnBH,EAAYnC,MAAQ,MAGxB,IPIwB,mBOFpB,YADAmC,EAAYnC,MAAQL,EAAOG,QAAQE,UAnB1B,CAEjBuC,OAAQ,KACRF,IAAK,GACLC,KAAM,kBACNtC,MAAO,OCIIwC,EAVK/C,aAAQ,SAACgD,EAAe9C,GACxC,OAAOA,EAAOC,MACV,IRuBuB,kBQrBnB,YADA6C,EAAcC,KAAK/C,EAAOG,YALjB,ICkBN6C,EAXCC,0BAAgB,CAC5B7C,KAAMP,EACNqD,UAAW1B,EACX2B,MAAOzB,EACP0B,MAAOpB,EACPqB,YAAaxB,EACbyB,QAASnB,EACTM,OAAQF,EACRgB,KAAMV,ICXKW,EAFDC,sBAAYT,EAASU,8BAAoBC,0BAAgBC,O,2CCQxDC,EAXDC,YAAe,CACzBC,QAAS,CACLC,QAAS,CACLC,KAAM,WAEVC,UAAW,CACPD,KAAM,c,gHCNLE,EAAY,SAACvC,EAAQrB,GAAT,OAAoB,SAAC6D,EAAUC,GAChD9D,GACA6D,EAAS,CAACnE,KZQQ,aYRUE,QAAS,CAACyB,SAAQrB,cAIzC+D,EAAe,SAAC1C,GAAD,OAAY,SAACwC,EAAUC,GAC3CzC,GACAwC,EAAS,CAACnE,KZGW,gBYHUE,QAAS,CAACyB,cAIpC2C,EAAmB,SAACnD,EAAMoD,GAAP,8CAA+B,WAAOJ,EAAUC,GAAjB,mBAAAI,EAAA,yDACrDC,EAAYtD,GAAQiD,IAAWnB,UAAU9B,KAC5BiD,IAAWf,QAAQpD,KAAKwE,EAAU9E,IAFM,iCAM7C+E,EAAc,CAChBC,OAAO,EACPC,MAAO,CACHC,UAAW,CAACC,MAAO,GAAIC,IAAK,IAC5BC,MAAO,CAACF,MAAO,KACfG,OAAQ,CAACH,MAAO,MAX2B,SAe3BI,UAAUC,aAAaC,aAAab,GAAuBG,GAfhC,cAe/CW,EAf+C,OAgBnDlB,EAASD,EAAUO,EAAU9E,GAAI0F,IAhBkB,kBAiB5CA,GAjB4C,kCAmBnDC,QAAQlF,MAAM,kCAAd,MAnBmD,gCAsBvDkF,QAAQC,IAAI,+BAtB2C,0DAA/B,yDCXnBC,EAAU,SAAAvD,GAAI,OAAI,SAACkC,EAAUC,GAClCnC,IACAkC,EAAS,CAACnE,KbGM,WaHUE,QAAS,CAAC+B,UACpCkC,EAASsB,EAAkBxD,OAItByD,EAAa,SAAAzD,GAAI,OAAI,SAACkC,EAAUC,GACrCnC,GACAkC,EAAS,CAACnE,KbHS,caGUE,QAAS,CAAC+B,YAIlCwD,EAAoB,SAAAxD,GAAI,OAAI,SAACkC,EAAUC,GAC5CnC,GACAA,EAAK0D,GAAG,UAAU,SAAAC,GACdzB,EAASD,EAAUjC,EAAKd,KAAMyE,SAK7BC,EAAiB,SAAA/D,GAAU,8CAAI,WAAOqC,EAAUC,GAAjB,mBAAAI,EAAA,yDACjCrD,EAAQiD,IAAWnB,UAAnB9B,KADiC,KAEpBiD,IAAWf,QAAQpD,KAAKkB,EAAKxB,IAFT,qCAEsBwE,EAASG,EAAiBnD,IAFhD,iCAElC2E,EAFkC,cAIrB3E,EAAKc,KAAKH,EAAWX,KAAM2E,GAJN,OAIlC7D,EAJkC,OAKxCkC,EAASqB,EAAQvD,IALuB,4CAAJ,yDCf3B8D,GAAsB,SAAA3F,GAAK,MAAK,CACzCJ,KdQkC,yBcPlCE,QAAS,CAACE,WCND4F,GAAgB,SAAAlE,GAAU,8CAAI,WAAOqC,EAAUC,GAAjB,SAAAI,EAAA,0DACnC1C,IAAcA,EAAWX,KADU,gCAE7BgD,EAAS,CAACnE,KfHM,iBeGgBE,QAAS,CAAC4B,gBAFb,uBAG7BqC,EAAS8B,GAAwBnE,IAHJ,2CAAJ,yDAO1BoE,GAAmB,SAAApE,GAAU,8CAAI,WAAOqC,EAAUC,GAAjB,eAAAI,EAAA,0DACtC1C,IAAcA,EAAWX,KADa,qBAGvBiD,IAAWf,QAAQpD,KAAK6B,EAAWX,MAHZ,gCAK5BgD,EAASE,EAAavC,EAAWX,OALL,YAQhCc,EAAOmC,IAAWjB,MAAMlD,KAAK6B,EAAWX,OARR,gCAU5BgD,EAASuB,EAAWzD,IAVQ,wBAahCkC,EAAS,CAACnE,KfpBS,oBeoBgBE,QAAS,CAAC4B,gBAbb,4CAAJ,yDAiB7BmE,GAA0B,SAAAnE,GAAU,OAAI,SAACqC,EAAUC,GACxDtC,GAAcA,EAAWqE,eACzBrE,EAAW6D,GAAG,QAAQ,WAClBS,YAAW,kBAAMjC,EAASkC,GAAkBvE,GAAa,WAG7DA,EAAW6D,GAAG,QAAQ,SAAA1F,GAClBqF,QAAQC,IAAI,qBAAsBtF,GAClC,IAAMD,EAAOC,EAAKD,KAOlB,GALIC,EAAKqG,cACLnC,EAAS,CAACnE,KfVK,kBeUkBE,QAASD,EAAKqG,cAC/ChB,QAAQC,IAAR,uBAA4BtF,EAAKqG,YAAY3E,OAA7C,cAAyD1B,EAAKqG,YAAYC,KAA1E,KAAmF,mDAG1E,gBAATvG,EAAwB,CACxBwG,OAAOC,YAAYxG,EAAKC,QAAS,KACjC,IAAMyC,EAASyB,IAAW5B,OAAOG,OAC7BA,GACAA,EAAO+D,cAAcD,YAAYxG,EAAM,KAI/C,GAAa,sBAATD,EAA8B,CAC9BsF,QAAQC,IAAI,gDAAiDtF,EAAKC,SAClE,IAAMyG,EAAiB1G,EAAKC,QAAQmB,SACpC8C,EAAS,CAACnE,KfvDF,WeuDkBE,QAAS,CAACmB,SAAUsF,EAAgBhF,OAAQG,EAAWX,YAIzFW,EAAW6D,GAAG,SAAS,WACnBxB,EAAS+B,GAAiBpE,UAKzB8E,GAAkB,SAAAC,GAAY,8CAAI,WAAO1C,EAAUC,GAAjB,iBAAAI,EAAA,yDACpCrD,EAAQiD,IAAWnB,UAAnB9B,KAEH0F,IAAiB1F,EAAKxB,GAHiB,gCAIdwB,EAAK2F,QAAQD,GAJC,cAIjC/E,EAJiC,gBAKjCqC,EAAS6B,GAAclE,IALU,uBAMjCqC,EAAS0B,EAAe/D,IANS,2CAAJ,yDAU9BiF,GAAuB,SAACjF,EAAY7B,GAAb,8CAAsB,WAAOkE,EAAUC,GAAjB,SAAAI,EAAA,sDAClD1C,GACAA,EAAWkF,KAAK/G,GAFkC,2CAAtB,yDAwBvBoG,GAAoB,SAACvE,GAAD,8CAAgB,WAAOqC,EAAUC,GAAjB,eAAAI,EAAA,uDACvCnD,EAAW+C,IAAWnB,UAAU5B,WAGlC8C,EAAS4C,GAAqBjF,EAAY,CAAC9B,KAAM,oBAAqBE,QAAS,CAACmB,eAJvC,2CAAhB,yDCzFpB4F,GAAiB,iBAAO,CAACjH,KhBeN,qBgBE1BkH,GAAsB,SAAC7F,GAAD,8CAAc,WAAO8C,EAAUC,GAAjB,eAAAI,EAAA,sDACtCL,EAAS,CAACnE,KhBRwB,yBgBQME,QAAS,CAACoB,SAAS,KAC5B,QACzBF,EAAS+F,IAAG,GAAD,OADc,QACd,cC5BoCC,qBD4BpC,YCxBMA,QDwB2C,CAE9DC,QC7B0CD,ED8B1CE,OftB4BC,EesBAlG,EfrBzBe,OAAOoF,QAAQD,GAAQE,KAAI,mCAAE7G,EAAF,KAAO8G,EAAP,qBAAqB9G,EAArB,YAA4B8G,MAASC,KAAK,QewB5ExD,EAASyD,GAA6BxG,IATA,iCfhBN,IAAAmG,IegBM,OAAd,yDAYtBK,GAA+B,SAACxG,GAAD,8CAAY,WAAO+C,EAAUC,GAAjB,SAAAI,EAAA,sDAC7CpD,EAAOuE,GAAG,SAAS,SAACkC,GAChB1D,EAAS,CAACnE,KhBpBoB,yBgBoBUE,QAAS,CAACkB,YAClD+C,EAAS2D,GAAkBD,OAG/BzG,EAAOuE,GAAG,cAAc,SAACkC,GACrB,IAAM/F,EAAasC,IAAWhB,YAAYnD,KAAK4H,GAC3C/F,GACAqC,EAAS+B,GAAiBpE,OATW,2CAAZ,yDAc/BgG,GAAoB,SAACC,GAAD,8CAAkB,WAAO5D,EAAUC,GAAjB,eAAAI,EAAA,sEAErB,IAAIwD,IAAKD,EAAc,CACtCE,KCtDiDb,qBDuDjDc,KCpDsBd,ODqDtBe,KAAM,eAENC,OAAQ,CAACC,WAAY,CAAC,CAAC5F,IAAK,oCAPQ,cAElCtB,EAFkC,gBASlCgD,EAAS,CAACnE,KhBxCgB,uBgBwCYE,QAAS,CAACiB,UATd,uBAUlCgD,EAASmE,GAA2BnH,IAVF,OAWxCgD,EAAS,CAACnE,KhB5CwB,yBgB4CME,QAAS,CAACoB,SAAS,KAXnB,2CAAlB,yDAcpBgH,GAA6B,SAAC7D,GAAD,8CAAe,WAAON,EAAUC,GAAjB,SAAAI,EAAA,sDAC9CC,EAAUkB,GAAG,QAAQ,SAAAhG,OAGrB8E,EAAUkB,GAAG,cAAc,SAAA7D,GACvBqC,EAAS6B,GAAclE,OAG3B2C,EAAUkB,GAAG,OAAb,uCAAqB,WAAM1D,GAAN,eAAAuC,EAAA,sEACSJ,IAAWf,QAAQpD,KAAKwE,EAAU9E,IAD3C,gDACkDwE,EAASG,EAAiBG,IAD5E,OACXqB,EADW,KAEjB7D,EAAKsG,OAAOzC,GACZ3B,EAASqB,EAAQvD,IAHA,2CAArB,uDAR8C,2CAAf,yD,UErD7BuG,GAAYC,YAAY,CAC1BC,eAAgB,CACZC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SAEhBC,WAAY,CACRH,QAAS,OACTC,eAAgB,SAChB5D,MAAO,OACP+D,QAAS,OACTC,MAAO,QACPC,WAAY,OACZC,gBAAiB,WAErBC,cAAe,CACXnE,MAAO,MACPoE,OAAQ,QAEZC,cAAe,CACXrE,MAAO,MACPsE,YAAa,OACbC,WAAY,QAEhBC,WAAY,CACRR,MAAO,QACPS,UAAW,OACXzE,MAAO,QAGX0E,YAAa,CACTf,QAAS,OACTC,eAAgB,SAChB5D,MAAO,MACP2E,UAAW,OACXC,aAAc,UAqEP9C,gBALS,SAAC+C,GAAD,MAAY,CAChCC,SAAUD,EAAM5G,UAAU5B,SAASyI,UAAY,GAC/CC,UAAWF,EAAM1J,KAAKC,SAGc,CAAC4J,YFpCd,SAAC3I,GAAD,OAAc,SAAC8C,EAAUC,IftBzB,SAACxD,EAAKX,GAC7B,IAAMgK,EAAkBjJ,KAAKkJ,UAAUjK,GACvCa,aAAaqJ,QAAQvJ,EAAKqJ,GeqB1BG,CAAY,WAAY/I,GACxB8C,EAAS,CAACnE,KhB7DyB,0BgB6DME,QAAS,CAACmB,gBEkCD0E,uBAAqBkB,mBAA5DH,EAjEG,SAAC,GAA6F,IAA5FuD,EAA2F,EAA3FA,QAASC,EAAkF,EAAlFA,MAAON,EAA2E,EAA3EA,YAAaF,EAA8D,EAA9DA,SAAUC,EAAoD,EAApDA,UAAWhE,EAAyC,EAAzCA,oBAAqBkB,EAAoB,EAApBA,eAAoB,EACrEsD,mBAAST,GAD4D,mBACpGU,EADoG,KACvFC,EADuF,OAEnFF,mBAASD,EAAMI,OAAOC,QAF6D,mBAEpGC,EAFoG,KAE9FC,EAF8F,KAGrGC,EAAUtC,KAiBhB,OACI,kBAACuC,EAAA,EAAD,CAAenH,MAAOA,GAClB,kBAACoH,EAAA,EAAD,CAAKrC,QAAQ,OAAO1D,OAAQ,GAAIgG,QAAQ,UAAUC,WAAW,SAASC,YAAY,QAC9E,kBAAC,IAAD,CAAMC,GAAG,IAAIC,MAAO,CAAEC,eAAgB,OAAQtC,MAAO,UAAU,kBAAC,IAAD,QAEnE,kBAACuC,GAAA,EAAD,CAAMC,WAAS,EAACC,UAAWX,EAAQpC,gBAC/B,kBAAC6C,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,GAC1B,kBAACb,EAAA,EAAD,CAAKrC,QAAQ,OAAOmD,cAAc,SAASZ,WAAW,SAASlG,MAAO,OAAQ+G,aAAa,MAAMd,QAAQ,SACrG,kBAACe,EAAA,EAAD,CAAYC,QAAQ,KAAKR,UAAWX,EAAQhC,YAA5C,kBACA,kBAACoD,EAAA,EAAD,CACIC,UAAQ,EACRxM,GAAG,oBACHyM,MAAM,WACNH,QAAQ,WACRvE,MAAO8C,EACPiB,UAAWX,EAAQ3B,cACnBkD,SA/BC,SAACjN,GACtBqL,EAAerL,EAAEkN,OAAO5E,UAgCR,kBAACwE,EAAA,EAAD,CACIC,UAAQ,EACRxM,GAAG,oBACHyM,MAAM,UACNH,QAAQ,WACRvE,MAAOkD,EACPa,UAAWX,EAAQzB,cACnBgD,SApCC,SAACjN,GACtByL,EAAQzL,EAAEkN,OAAO5E,UAqCD,yBAAK+D,UAAWX,EAAQpB,aACpB,kBAAC6C,EAAA,EAAD,CAAQC,QAnCb,SAACpN,GAChB4K,EAAY,CAACF,SAAUU,IACvBzE,EAAoB,MACpBkB,IACAoD,EAAQvH,KAAR,iBAAuBwH,EAAMI,OAAOC,UA+Ba8B,KAAK,QAAQzD,MAAM,YAAYiD,QAAQ,YAAYR,UAAWX,EAAQtB,YAAnG,SAIHO,GAAa,kBAACiB,EAAA,EAAD,CAAKhC,MAAO,MAAO0D,UAAW,UAAW3C,EAAU3J,MAAMuM,gB,SCtGlFC,GAAY,SAAApK,GAAM,OAAI,SAAC2B,EAAUC,GAEtC5B,GACA2B,EAAS,CAACnE,KnBqBQ,amBrBUE,QAAS,CAACsC,cAoBxCqK,GAAuB,CACzB,yBAjBsC,SAACC,GAAD,OAAS,SAAC3I,EAAUC,GAC1D,IAAMhB,EAAchB,OAAOC,OAAO+B,IAAWhB,YAAYnD,MACnDA,EAAO,CAACD,KAAM,cAAeE,QAAS4M,EAAI7M,KAAKC,SACrDoF,QAAQC,IAAI,2BAA4BtF,GACxCmD,EAAY5C,SAAQ,SAAAsB,GACfqC,EAAS4C,GAAqBjF,EAAY7B,SAa/C,oBATkC,SAAC6M,GAAD,OAAS,SAAC3I,EAAUC,GAAc,IAAD,EACzC0I,EAAI7M,KAAvB0B,EAD4D,EAC5DA,OAAQzB,EADoD,EACpDA,QACT4B,EAAasC,IAAWhB,YAAYnD,KAAK0B,GAE/CwC,EAAS4C,GAAqBjF,EADjB,CAAC9B,KAAM,cAAeE,QAASA,OAO5C,gCAAmC,kBAAMoF,QAAQC,IAAI,2FCM1CuB,gBAJS,SAAC+C,GAAD,MAAY,CAChCrH,OAAQqH,EAAMrH,UAGsB,CAACuK,oBDHN,SAACD,GAAD,8CAAS,WAAO3I,EAAUC,GAAjB,eAAAI,EAAA,sDACpCsI,EAAI7M,KAAKD,MAAQ8M,EAAI7M,KAAKD,KAAKgN,WAAW,YACpCjN,EAAS8M,GAAqBC,EAAI7M,KAAKD,MAC7CmE,EAASpE,EAAO+M,KAHoB,2CAAT,yDCG2BF,cAA/C9F,EA9BW,SAAC,GAA8C,IAA7CtE,EAA4C,EAA5CA,OAAQuK,EAAoC,EAApCA,oBAAqBH,EAAe,EAAfA,UAC/CK,EAAYC,mBAkBlB,OAhBAC,qBAAU,WACN,IAAMC,EAAgB,SAACN,GACnBC,EAAoBD,IAGxB,OADAtG,OAAO6G,iBAAiB,UAAWD,GAC5B,kBAAM5G,OAAO8G,oBAAoB,UAAWF,MAEpD,IAEHD,qBAAU,WACFF,GAAaA,EAAUM,SACvBX,EAAU,gBAAIpK,EAAL,CAAaG,OAAQsK,EAAUM,aAG7C,CAACN,EAAWzK,EAAOC,MAGlB,kBAACuI,EAAA,EAAD,CAAKwC,SAAU,GACVhL,GAAUA,EAAOC,KAAO,4BAAQgL,IAAKjL,EAAOC,IAAK4I,MAAO,CAACrG,MAAO,OAAQC,OAAQ,QAASyI,IAAKT,EAAWU,MAAO,uB,oBCtBvHnF,GAAYC,aAAW,SAAC7E,GAAD,MAAY,CACrCgK,KAAM,CACFjF,QAAS,QAEbkF,YAAa,CACTC,SAAU,WACVnF,QAAS,OACToF,SAAU,gBACVnE,aAAc,MACd5E,MAAO,OACPC,OAAQ,SAEZ+I,MAAO,CACHhJ,MAAO,OACPC,OAAQ,OACRgJ,UAAW,SAEfC,YAAa,CACTlF,MAAO,QACPmF,QAAS,MACTL,SAAU,WACVM,OAAQ,MACRC,KAAM,MACNC,SAAU,SACVC,WAAY,YAyBLC,GArBU,SAAC,GAAmC,IAAlClO,EAAiC,EAAjCA,OAAiC,IAAzBmO,aAAyB,SAAVC,EAAU,EAAVA,KACxC5D,EAAUtC,KACVmG,EAAWzB,iBAAO,MACjBpD,EAAY4E,EAAZ5E,SAOP,OALAqD,qBAAU,YpBhBa,SAACwB,EAAUrO,GAAyB,IAAjBmO,IAAgB,yDACtDE,EAASpB,SAAWjN,IACpBqO,EAASpB,QAAQqB,UAAYtO,EAC7BqO,EAASpB,QAAQsB,UAAY,WACzBF,EAASpB,QAAQuB,OACjBH,EAASpB,QAAQkB,MAAQA,IoBY7BM,CAAYJ,EAAUrO,EAAQmO,KAE/B,CAACnO,IAGA,kBAAC0O,GAAA,EAAD,CAAMvD,UAAWX,EAAQ+C,aACpBvN,EACK,2BAAOoN,IAAKiB,EAAUlD,UAAWX,EAAQkD,QACzC,kBAACiB,GAAA,EAAD,CAAkBjG,MAAM,YAE9B,kBAACgC,EAAA,EAAD,CAAKS,UAAWX,EAAQoD,aAAcpE,KChCnChD,gBAVS,SAAC+C,EAAOqF,GAC5B,IAAMrI,EAAeqI,EAASpN,WAAWX,KAGzC,MAAO,CACHgO,aAHiBtI,EAAegD,EAAMxG,QAAQpD,KAAK4G,GAAgB,KAInEuI,gBAHmBvF,EAAM3G,MAAMjD,KAAK4G,GAAgBgD,EAAM3G,MAAMjD,KAAK4G,GAAcxF,SAAW,IAG/DyI,UAAY,sBAIpChD,EAZS,SAAC,GAAD,IAAEqI,EAAF,EAAEA,aAAcC,EAAhB,EAAgBA,eAAhB,OAAoC,kBAAC,GAAD,CAAkB9O,OAAQ6O,EAAcT,KAAM,CAAC5E,SAAUsF,QCYtGtI,gBAJS,SAAA+C,GAAK,MAAK,CAC9BzG,YAAahB,OAAOC,OAAOwH,EAAMzG,YAAYnD,SAGlC6G,EAZY,SAAC,GAAmB,IAAlB1D,EAAiB,EAAjBA,YACzB,OACI,oCACKA,GAAeA,EAAYqE,KAAI,SAAA3F,GAAU,OAAI,kBAAC,GAAD,CAAiBlB,IAAKkB,EAAWqE,aAAcrE,WAAYA,WCD/G0G,GAAYC,aAAW,SAAC7E,GAAD,MAAY,CACrCyL,iBAAkB,CACdtG,QAAS,WAwBFjC,gBATS,SAAC+C,GACrB,IAAMpF,EAAYoF,EAAM5G,UAAU9B,KAC5B2E,EAAcrB,EAAYoF,EAAMxG,QAAQpD,KAAKwE,EAAU9E,IAAM,KACnE,MAAO,CACH2P,kBAAmBzF,EAAM5G,UAAU5B,SACnCyE,YAAaA,KAImB,GAAzBgB,EApBU,SAAC,GAAsC,IAArChB,EAAoC,EAApCA,YAAawJ,EAAuB,EAAvBA,kBAC9BxE,EAAUtC,KAEhB,OACI,kBAACwC,EAAA,EAAD,CAAKC,QAAQ,YAAYjG,MAAO,QAASuK,SAAU,QAAS9D,UAAWX,EAAQuE,kBAC3E,kBAAC,GAAD,CAAkB/O,OAAQwF,EAAa2I,OAAO,EAAMC,KAAM,CAAC5E,SAAUwF,EAAkBxF,YACvF,kBAAC,GAAD,U,2HCFNtB,GAAYC,YAAW,CACzB+G,KAAM,CACFxK,MAAO,KAEXyK,SAAU,CACNrG,OAAQ,SAKVsG,GAAU,CACZ,CAAChN,KAAM,gBAAiBD,IAAK,qDAC7B,CAACC,KAAM,QAASD,IAAK,6DACrB,CAACC,KAAM,SAAUD,IAAK,2DACtB,CAACC,KAAM,gBAAiBD,IAAK,oDAuDlBqE,gBAJS,SAAC+C,GAAD,MAAY,CAChCrH,OAAQqH,EAAMrH,UAGsB,CAACoK,cAA1B9F,EApDS,SAAC,GAAyB,IAAxBtE,EAAuB,EAAvBA,OAAQoK,EAAe,EAAfA,UACxB9B,EAAUtC,KAD6B,EAErB+B,oBAAS,GAFY,mBAEtCoF,EAFsC,KAEhCC,EAFgC,KAIvCC,EAAe,SAACC,GACC,YAAfA,EAAM9P,MAGV4P,GAASD,IAGPI,EAAqB,SAACjD,GACxB,IAAMkD,EAAQlD,EAAImD,cAAcC,QAAQF,MACxCpD,EAAUpK,EAAM,gBAAOA,EAAP,GAAkBkN,GAAQM,IAAUN,GAAQM,KAuBhE,OACI,kBAACjF,EAAA,EAAD,CAAenH,MAAOA,GAClB,kBAAC2I,EAAA,EAAD,KACI,kBAAC,KAAD,CAAUC,QAASqD,EAAc7G,MAAM,UAAUsF,SAAS,QAAQ7C,UAAWX,EAAQ2E,WACrF,kBAACU,GAAA,EAAD,CAAQR,KAAMA,EAAMS,QAASP,EAAcQ,OAAQ,QAvB3D,yBAAK5E,UAAWX,EAAQ0E,KAAMc,KAAK,eAAe9D,QAASqD,GACvD,kBAACU,GAAA,EAAD,KACKb,GAAQjI,KAAI,WAAS+I,GAAT,IAAE9N,EAAF,EAAEA,KAAF,OACT,kBAAC+N,GAAA,EAAD,CAAUC,QAAM,EAAC9P,IAAK8B,EAAM8J,QAASuD,EAAoBY,aAAYH,GACjE,kBAACI,GAAA,EAAD,KAAc,kBAAC,KAAD,OACd,kBAACC,GAAA,EAAD,CAAc9M,QAASrB,SAInC,kBAACoO,GAAA,EAAD,MACA,kBAACP,GAAA,EAAD,KACI,kBAACE,GAAA,EAAD,CAAUC,QAAM,GACZ,kBAACE,GAAA,EAAD,KAAc,kBAAC,KAAD,OACd,kBAACC,GAAA,EAAD,CAAc9M,QAAS,4B,iDCvDrCgN,G,OAAUC,ICRD,YAA2B,IAAxBlN,EAAuB,EAAvBA,QAASmN,EAAc,EAAdA,QACjBC,EAASD,EAAQ,KACjBxE,EAAOwE,EAAQ,GACfE,EAAerN,EAAQC,QAAQC,KACrC,MAAO,CACLoN,OAAQ,CACNpM,MAAOyH,EACPxH,OAAQwH,GAEV4E,QAAS,CACP3E,UAAW,QAEb4E,SAAU,CACR5E,UAAW,SAEb6E,IAAK,CACHxI,QAASkI,EAAQ,EAAG,GACpBlF,aAAc,EACdnC,aAAc,EACdjB,QAAS,eACT6I,UAAW,aACXC,WACE,gJACFnD,SAAU,QAEZD,KAAM,CACJqD,qBAAsBR,EACtBS,wBAAyBT,EACzBhI,gBAAiBpF,EAAQ8N,KAAK,MAEhCC,MAAO,CACLC,oBAAqBZ,EACrBa,uBAAwBb,EACxBhI,gBAAiBiI,EACjBnI,MAAOlF,EAAQkO,OAAOC,OAExBC,UAAW,CACTJ,oBAAqBZ,GAEvBiB,SAAU,CACRJ,uBAAwBb,GAE1BkB,WAAY,CACVV,qBAAsBR,GAExBmB,UAAW,CACTV,wBAAyBT,MDtCgB,CAAExO,KAAM,WAAzCsO,EAAsD,SAAAsB,GAAU,IAE5ExH,EAQEwH,EARFxH,QACAsG,EAOEkB,EAPFlB,OACAmB,EAMED,EANFC,SACAC,EAKEF,EALFE,KACAC,EAIEH,EAJFG,mBACAC,EAGEJ,EAHFI,cACAC,EAEEL,EAFFK,YACAC,EACEN,EADFM,mBAYF,OACE,kBAACrH,GAAA,EAAD,eACEC,WAAS,EACTyF,QAAS,EACT4B,QAAkB,UAATL,EAAmB,WAAa,cACrCC,GAEM,SAATD,GACC,kBAACjH,GAAA,EAAD,eAAMG,MAAI,GAAKgH,GACb,kBAACI,GAAA,EAAD,eACErF,IAAK2D,GACDuB,EAFN,CAGElH,UAAWsH,aAAGjI,EAAQsG,OAAQuB,EAAYlH,eAIhD,kBAACF,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,GACZ4G,EAAS9K,KAAI,SAAC8J,EAAKf,GAClB,IA3BYR,EA2BNgD,EAAkBJ,EAAmBrB,EAAKf,EAAG8B,GACnD,OAEE,yBAAK1R,IAAK2Q,EAAI5R,IAAM6Q,EAAG/E,UAAWX,EAAQ,GAAD,OAAI0H,EAAJ,SACvC,kBAACxG,EAAA,EAAD,eACEiH,MAAO,QACHD,EAFN,CAGEvH,UAAWsH,aACTjI,EAAQyG,IACRzG,EAAQ0H,IApCJxC,EAqCQQ,EApCZ,IAAVR,EACKlF,EAAQ,GAAD,OAAI0H,EAAJ,UAEZxC,IAAUuC,EAASW,OAAS,EACvBpI,EAAQ,GAAD,OAAI0H,EAAJ,SAET,IA+BOQ,EAAgBvH,aAGjB8F,YAUjBR,GAAQoC,aAAe,CACrB/B,OAAQ,GACRmB,SAAU,GACVC,KAAM,OACNC,mBAAoB,GACpBC,cAAe,GACfC,YAAa,GACbC,mBAAoB,iBAAO,KAGd7B,U,+BExETvI,GAAYC,YAAW,CACzB2K,cAAe,GAEfC,UAAW,CACPrO,MAAO,MACPsE,YAAa,OAEjBgK,YAAa,CACT3K,QAAS,OACTC,eAAgB,gBAChBsC,WAAY,UAEhBqI,cAAe,CACXC,OAAQ,oBACRzH,aAAc,MACd/C,MAAO,UACP/D,OAAQ,GACRD,MAAO,GACP+D,QAAS,EACT0K,OAAQ,UACR,UAAW,CACPC,WAAY,UACZ1K,MAAO,YAsEJlC,gBALS,SAAA+C,GAAK,MAAK,CAC9B8J,SAAU9J,EAAMvG,KAChBmB,UAAWoF,EAAM5G,UAAU9B,QAGS,CAACyS,YCnGd,SAACrN,GAAD,8CAAU,WAAOpC,EAAUC,GAAjB,iBAAAI,EAAA,sDAC3BpB,EAAchB,OAAOC,OAAO+B,IAAWhB,YAAYnD,MACnDwE,EAAYL,IAAWnB,UAAU9B,KAEvCiC,EAAY5C,SAAQ,SAAAsB,GAAU,OAAIA,EAAWkF,KAAK,CAACV,YAAa,CAC5DC,KAAMA,EACN5E,OAAQ8C,EAAU9E,SAGtBwE,EAAS,CACLnE,K7BkBuB,kB6BjBvBE,QAAS,CAACqG,KAAMA,EAAM5E,OAAQ8C,EAAU9E,MAXX,2CAAV,0DDmGZmH,EAjEF,SAAC,GAAwC,IAAvC6M,EAAsC,EAAtCA,SAAUC,EAA4B,EAA5BA,YAAanP,EAAe,EAAfA,UAC5BqG,EAAUtC,GAAU,IADuB,EAEb+B,mBAAS,IAFI,mBAE1CsJ,EAF0C,KAE9BC,EAF8B,KAc3C9M,EAAO,SAAC5H,GACVA,EAAE2U,iBACFH,EAAYC,GACZC,EAAc,KAGZE,EAAc,SAAAtM,GAWhB,OAVoBuM,mBAAQvM,GAGCwM,QAAO,SAACC,EAAU5G,GAC7C,MAAuB,kBAAZA,EACF4G,EAAW5G,EAEb4G,EAAW5G,EAAQ+E,MAAM8B,WAC/B,KAMCC,EAAWV,EAASlM,KAAI,SAACkF,EAAS6D,GAAV,OAAgB7D,EAAQhL,SAAW8C,EAAU9E,GACrE,kBAAC,GAAD,CAASiB,IAAK4P,EAAGgC,KAAM,QAASD,SAAU,CAACyB,EAAYrH,EAAQpG,SAC/D,kBAAC,GAAD,CAAS3F,IAAK4P,EAAGY,OAAQ,GAAImB,SAAU,CAACyB,EAAYrH,EAAQpG,YAGpE,OACI,yBAAKkF,UAAWX,EAAQsI,eACnBiB,EACD,yBAAK5I,UAAWX,EAAQwI,aACpB,kBAACpH,EAAA,EAAD,CACID,QAAQ,WACRQ,KAAK,QACL6H,WAAS,EACTC,WAAS,EACT9I,UAAWX,EAAQuI,UACnBhH,SA9Ca,SAACyD,GAC1BgE,EAAchE,EAAMxD,OAAO5E,QA8Cf8M,WA3CO,SAAC1E,GACH,UAAdA,EAAMlP,KAAmBiT,EAAWX,OAAS,GAC5ClM,EAAK8I,IA0CGpI,MAAOsM,EAAYH,KAEvB,kBAAC,KAAD,CAAUpI,UAAWX,EAAQyI,cAAe/G,QAASxF,SElF/DwB,GAAYC,YAAW,CACzB+G,KAAM,CACF7G,QAAS,OACTmD,cAAe,SACflD,eAAgB,WAChB6L,UAAW,OACXC,WAAY,WACZzP,OAAQ,OACRD,MAAO,IACP+D,QAAS,IAEb4L,SAAU,CACNvL,OAAQ,SAiCDwL,GA7BS,WACpB,IAAM9J,EAAUtC,KADU,EAEF+B,oBAAS,GAFP,mBAEnBoF,EAFmB,KAEbC,EAFa,KAIpBC,EAAe,SAACC,GACC,YAAfA,EAAM9P,MAGV4P,GAASD,IASb,OACI,kBAAC5E,EAAA,EAAD,CAAenH,MAAOA,GAClB,kBAAC2I,EAAA,EAAD,KACI,kBAAC,KAAD,CAAUC,QAASqD,EAAc7G,MAAM,UAAUsF,SAAS,QAAQ7C,UAAWX,EAAQ6J,WACrF,kBAACxE,GAAA,EAAD,CAAQR,KAAMA,EAAMS,QAASP,EAAcQ,OAAQ,SAT3D,yBAAK5E,UAAWX,EAAQ0E,KAAMc,KAAK,gBAC/B,kBAAC,GAAD,WClBGuE,GAbO,WAClB,OACI,oCACI,kBAAC7J,EAAA,EAAD,CAAKC,QAAS,QAAShG,OAAQ,MAAO0D,QAAQ,OAAOmD,cAAc,MAAM9G,MAAO,EAAG4D,eAAgB,UAE/F,kBAAC,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,IAAD,CAAMwC,GAAI,KAAV,WCwCDtE,gBAXS,SAAC+C,GACrB,IAAMpF,EAAYoF,EAAM5G,UAAU9B,KAClC,MAAO,CACHC,OAAQyI,EAAM5G,UAAU7B,OACxBqD,UAAWA,EACXqQ,iBAAkBjL,EAAM5G,UAAU3B,QAClCyI,UAAWF,EAAM1J,KAAKC,MACtB2U,YAAalL,EAAM1J,KAAKF,QAIQ,CAAC+U,chBtCZ,yDAAM,WAAO7Q,EAAUC,GAAjB,eAAAI,EAAA,sDACzBnD,EAAWV,EAAiB,YAE7ByD,IAAWnB,UAAU3B,UACjBD,EAASyI,UAAazI,EAASyI,SAASoJ,OAGzC/O,EAAS+C,GAAoB7F,IAF7B8C,EAAS4B,GAAoB,CAAC3F,MAAO,CAACsC,KAAM,YAAaiK,QAAS,wDAL3C,2CAAN,yDgBsC2BsI,SjB4BhC,SAACtK,EAAQuK,GAAT,8CAAsB,WAAO/Q,EAAUC,GAAjB,mBAAAI,EAAA,wDACnBJ,IAAWnB,UAA3B7B,EADmC,EACnCA,OAAQD,EAD2B,EAC3BA,KAEXC,GAAUD,GACVC,EAAO+T,KAAK,OAAQ,CAACxK,SAAQuK,WAAUvT,OAAQR,EAAKxB,IAApD,uCAEI,WAAOyV,EAAKnV,GAAZ,SAAAuE,EAAA,yDACS4Q,EADT,gCAEcjR,EAASG,EAAiBnD,IAFxC,uBAGcgD,EAAS,CAACnE,KfzEJ,mBeyE4BE,QAAS,CAACC,KAAMF,EAAKE,QAHrE,OAIQF,EAAKE,KAAKkV,YAAY7U,SAAQ,SAACqG,GAAD,OAAkB1C,EAASyC,GAAgBC,OAJjF,sBAMQ1C,EAAS4B,GAAoBqP,IANrC,2CAFJ,yDAJsC,2CAAtB,yDiB5B0CE,gBlBjCnC,kBAAM,SAACnR,EAAUC,GAC5C,IAAMyF,EAAQzF,IAERhD,EAASyI,EAAM5G,UAAU7B,OAC/B,GAAIA,EAAQ,CACP,IAAM2T,EAAclL,EAAM1J,KAAKF,KAC3B8U,EAAYpV,KACZyB,EAAO+T,KAAK,QAASJ,EAAYpV,IACjCwE,EAxB0B,CACnCnE,KdY4B,mBcX5BE,QAAS,CAACC,KAsBuB,OAE7BiB,EAAOmU,aACPpR,EAAS8C,MAGb,IAAM7D,EAAcyG,EAAMzG,YAAYnD,KAClCmD,GACAhB,OAAOC,OAAOe,GAAa5C,SAAQ,SAAAgV,GAAI,OAAIA,EAAKC,WAGpD,IAAMhR,EAAYoF,EAAM5G,UAAU9B,KAC9BsD,IACoBoF,EAAMxG,QAAQoB,EAAU9E,KAExC6G,OAAOV,YAAYvF,YAAYC,SAAQ,SAAAC,GAAK,OAAIA,EAAMC,WAG9DyD,EFP2B,uCAAM,WAAOA,EAAUC,GAAjB,SAAAI,EAAA,sDAC7BL,EAAS,CAACnE,KZzBe,sBYwBI,2CAAN,4DoBchB8G,EA3CF,SAAC,GAA6H,IAA5H1F,EAA2H,EAA3HA,OAAQqD,EAAmH,EAAnHA,UAAW6F,EAAwG,EAAxGA,MAAOD,EAAiG,EAAjGA,QAAS2K,EAAwF,EAAxFA,cAAeC,EAAyE,EAAzEA,SAAUlL,EAA+D,EAA/DA,UAAWgL,EAAoD,EAApDA,YAAaD,EAAuC,EAAvCA,iBAAkBQ,EAAqB,EAArBA,gBAmBjH,OAjBAnI,qBAAU,WACFpD,EACAM,EAAQvH,KAAR,sBAA4BwH,EAAMI,OAAOC,SACjClG,GAAcqQ,EAEfrQ,GAAarD,IAAW2T,EAAYpV,IAC3CsV,EAAS3K,EAAMI,OAAOC,OAAQ,YAF9BqK,MAKL,CAACvQ,EAAWsF,EAAW3I,IAE1B+L,qBAAU,WAEN,OAAO,kBAAMmI,OAEd,IAGC,oCACI,kBAACtK,EAAA,EAAD,CAAKrC,QAAQ,OAAOmD,cAAc,SAAS9G,MAAO,EAAGC,OAAQ,OAAQ2D,eAAgB,iBACjF,kBAACoC,EAAA,EAAD,CAAKrC,QAAQ,OAAOmD,cAAc,MAAM9G,MAAO,EAAGC,OAAQ,MAAO2D,eAAgB,iBAC7E,kBAAC,GAAD,MACA,kBAAC,GAAD,OAEJ,kBAAC,GAAD,W,yEC5BVJ,GAAYC,YAAW,CACzB+C,UAAW,CACP7C,QAAS,OACTmD,cAAe,SACfZ,WAAY,SACZlG,MAAO,IACPC,OAAQ,IACRuO,OAAQ,sBACRtK,gBAAiB,SAErBwM,qBAAsB,CAClB/M,QAAS,OACTmD,cAAe,SACfZ,WAAY,SACZlG,MAAO,IACPC,OAAQ,IACRuO,OAAQ,sBACRtK,gBAAiB,QACjBE,OAAQ,GAEZuM,WAAY,CACRhN,QAAS,OACTS,OAAQ,IAEZwM,eAAgB,CACZ3M,WAAY,OACZM,WAAY,GAEhBgK,cAAe,CACXjK,YAAa,GAEjBuM,cAAe,CACX1K,YAAa,GACb2K,aAAc,GACdlM,aAAc,MA6BPmM,GAzBK,SAACzD,GACjB,IAGoB0D,EAHdlL,EAAUtC,KACVyN,EAAcC,aAAc,sBAYlC,OACI,yBAAKzK,UAAWwK,EAAcnL,EAAQ4K,qBAAuB5K,EAAQU,WACjE,yBAAKC,UAAWX,EAAQ6K,YAXhB,sBADIK,EAaI1D,EAAM6D,QAAQH,MAXvB,kBAAC,KAAD,CAAkB1H,SAAS,QAAQ7C,UAAWX,EAAQyI,gBAC9C,2BAATyC,EACC,kBAAC,KAAD,CAAwB1H,SAAS,QAAQ7C,UAAWX,EAAQyI,gBACpD,qBAATyC,EACC,kBAAC,KAAD,CAAkB1H,SAAS,QAAQ7C,UAAWX,EAAQyI,qBAD1D,EASC,kBAACvH,EAAA,EAAD,CAAYC,QAAQ,KAAKR,UAAWX,EAAQ8K,gBAAiBtD,EAAM6D,QAAQxI,QAE/E,kBAAC3B,EAAA,EAAD,CAAYP,UAAWX,EAAQ+K,cAAe5C,MAAM,UAAUX,EAAM6D,QAAQ5P,MAC5E,yBAAKkH,IAAK6E,EAAM6D,QAAQC,MAAOnR,OAAO,MAAMD,MAAM,MAAMqR,IAAI,WCzDlE7N,GAAYC,YAAW,CACzB6N,IAAK,CACD3N,QAAS,OACT3D,MAAO,OACPC,OAAQ,OACR2D,eAAgB,UAEpB2N,eAAgB,CACZ5N,QAAS,OACTmD,cAAe,SACf9G,MAAO,OACPC,OAAQ,OACRiG,WAAY,UAEhBsL,eAAgB,CACZ7N,QAAS,OACTmD,cAAe,SACfZ,WAAY,SACZlG,MAAO,MACPuK,SAAU,KAEdzG,WAAY,CACRE,MAAO,QACPC,WAAY,OACZU,UAAW,QAEf8M,YAAa,CACT1K,aAAc,MACd/G,MAAO,QACPiE,WAAY,OACZD,MAAO,QACPE,gBAAiB,UACjB,UAAW,CACPA,gBAAiB,WAErB,UAAW,CACPwN,QAAS,IAGjBC,QAAS,CACLhO,QAAS,OACT1D,OAAQ,IACRD,MAAO,IACP+G,aAAc,EACdpC,UAAW,GACXJ,WAAY,GACZD,YAAa,IAEjBsN,mBAAoB,CAChBjO,QAAS,OACT1D,OAAQ,IACRD,MAAO,IACP+G,aAAc,EACd3C,OAAQ,IAEZyN,aAAc,CACVlO,QAAS,OACTC,eAAgB,SAChBkO,OAAQ,IACRhJ,SAAU,WACVM,OAAQ,KAEZ2I,wBAAyB,CACrBpO,QAAS,OACTmD,cAAe,SACfZ,WAAY,SACZvB,UAAW,MA+DJqN,GA3DF,WACT,IAAMlM,EAAUtC,KACVyN,EAAcC,aAAc,sBAsBlC,OACI,kBAACnL,EAAA,EAAD,CAAenH,MAAOA,GAElB,kBAACoH,EAAA,EAAD,CAAK/F,OAAQ,GAAIgG,QAAQ,WAAzB,KAGA,kBAACD,EAAA,EAAD,CAAK/F,OAAQ,IAAK0D,QAAQ,OAAOmO,OAAQ,GACrC,kBAAC9L,EAAA,EAAD,CAAKS,UAAWwK,EAAcnL,EAAQyL,eAAiBzL,EAAQwL,IAAKrL,QAAS,WACzE,yBAAKQ,UAAWX,EAAQ0L,gBACxB,kBAACxK,EAAA,EAAD,CAAYC,QAAQ,KAAKR,UAAWX,EAAQhC,WAAYmO,cAAY,EAAChE,MAAM,UAA3E,kCAGA,kBAAC,IAAD,CAAM7H,GAAG,eAAeC,MAAO,CAACC,eAAgB,SAC5C,kBAACiB,EAAA,EAAD,CAAQE,KAAK,QAAQhB,UAAWX,EAAQ2L,aAAxC,YAGJ,yBACIhJ,IAAI,gFACJhC,UAAWwK,EAAcnL,EAAQ8L,mBAAqB9L,EAAQ6L,QAC9DN,IAAK,8BAMjB,yBAAK5K,UAAWwK,EAAYnL,EAAQiM,wBAAwBjM,EAAQ+L,cA9CvD,CACjB,CACIlJ,MAAO,SACPqI,KAAM,mBACNI,MAAO,qJACP7P,KAAM,2HAEV,CACIoH,MAAO,UACPqI,KAAM,yBACNI,MAAO,qFACP7P,KAAM,2HAEV,CACIoH,MAAO,WACPqI,KAAM,mBACNI,MAAO,wFACP7P,KAAM,4HA8BYkB,KAAI,SAACxH,EAAMuQ,GAAP,OAAa,kBAAC,GAAD,CAAa2F,QAASlW,EAAMW,IAAKX,EAAK0N,MAAQ6C,GAA9C,SAInC,kBAAC,IAAD,CAAMpF,GAAI,wBAAV,eCzHN5C,GAAYC,YAAW,CACzBC,eAAgB,CACZC,QAAS,OACTC,eAAgB,SAChBC,WAAY,SAEhBC,WAAY,CACRH,QAAS,OACTC,eAAgB,SAChBG,QAAS,OACTC,MAAO,QACPC,WAAY,OACZC,gBAAiB,UACjBlE,MAAO,QAEXkS,YAAa,CACTlS,MAAO,MACPoE,OAAQ,QAEZ+N,OAAQ,CACJC,YAAa,UACb,WAAY,CACRA,YAAa,WAEjB,UAAW,CACPA,YAAa,YAGrBC,UAAW,CACPrS,MAAO,MACP2E,UAAW,QAEfN,cAAe,CACXrE,MAAO,MACPsE,YAAa,OACbC,WAAY,QAEhB+N,YAAa,CACT3O,QAAS,OACTC,eAAgB,WAChB5D,MAAO,OACPoE,OAAQ,QAEZmO,SAAU,CACNvO,MAAO,QACPS,UAAW,OACXL,OAAQ,QAEZoO,MAAO,CACHzO,QAASnF,EAAMqN,QAAQ,GACvBvE,UAAW,SACX1D,MAAOpF,EAAME,QAAQyC,KAAKtC,WAE9BwT,SAAU,CACN9O,QAAS,OACTuC,WAAY,SACZvB,UAAW,OACX3E,MAAO,OAEXwE,WAAY,CACRR,MAAO,QACPS,UAAW,OACXG,aAAc,OACd5E,MAAO,QAEX0S,SAAU,CACN/O,QAAS,OACTC,eAAgB,SAChBQ,OAAQ,UA8HDuO,GA1HQ,WAAO,IAAD,EACDC,IAAMrN,SAAS,IADd,mBAClB7H,EADkB,KACZmV,EADY,OAEDD,IAAMrN,SAAS,IAFd,mBAElBK,EAFkB,KAEZC,EAFY,OAGG+M,IAAMrN,SAAS,IAHlB,mBAGlBI,EAHkB,KAGVmN,EAHU,OAIIF,IAAMrN,UAAS,GAJnB,mBAIlBwN,EAJkB,KAIVC,EAJU,KAKnBlN,EAAUtC,KAEVyP,EAAuB,SAACnI,GAC1B+H,EAAQ/H,EAAMxD,OAAO5E,QA8BnBwQ,EACF,kBAAClN,EAAA,EAAD,CAAKrC,QAAQ,OAAOmD,cAAc,SAASZ,WAAW,SAASlG,MAAO,OAAQ+G,aAAa,MAAMd,QAAQ,SACrG,kBAACe,EAAA,EAAD,CAAYC,QAAQ,KAAKR,UAAWX,EAAQhC,YAA5C,qBACA,kBAACoD,EAAA,EAAD,CACIC,UAAQ,EACRxM,GAAG,oBACHyM,MAAM,YACNH,QAAQ,WACRvE,MAAOhF,EACP2J,SAAU4L,EACVxM,UAAWX,EAAQuM,YAEvB,yBAAK5L,UAAWX,EAAQwM,aACpB,kBAAC/K,EAAA,EAAD,CACIE,KAAK,QACLzD,MAAM,YACNiD,QAAQ,YACRR,UAAWX,EAAQyM,SACnB/K,QA7CG,WACf,IAAIvM,EAAO,CACPyC,KAAMA,EACNwS,SAAU,WACViD,SAAU,GAGd,GAAGzV,EAAKwQ,OAAS,EAAG,CAEhBkF,MAAM,GAAD,OAD0B,QAC1B,clBvGwChR,qBkBuGxC,YlBnGUA,OkBmGV,cAA2D,CAC5DiR,OAAQ,OACRC,KAAMtX,KAAKkJ,UAAUjK,GACrBsY,QAAS,CACL,eAAgB,sBAErBC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC3BF,MAAM,SAAAvY,GACJ,IlChDY0Y,EkCgDNzQ,GlChDMyQ,EgBzD6BvR,mChB0D9CwR,MAAUC,KAAKF,GkC+C+C,QAAU,IACnE9N,EAAQ,GAAD,OAVoB,QAUpB,clB1GkCzD,oCkB0GlC,OAAiCc,EAAjC,yBAAsDjI,IAC7D6X,EAAU7X,GACV+X,GAAU,WAGd1S,QAAQC,IAAI,WAiBR,YAaNuT,EACE,kBAAC9N,EAAA,EAAD,CACIrC,QAAQ,OACRmD,cAAc,SACdZ,WAAW,SACXlG,MAAO,OACP+G,aAAa,MACbd,QAAQ,SAER,kBAACe,EAAA,EAAD,CAAYC,QAAQ,KAAKR,UAAWX,EAAQhC,YAA5C,oBACA,yBAAK2C,UAAWX,EAAQ2M,UACpB,kBAACvL,EAAA,EAAD,CAAWD,QAAQ,WAAWvE,MAAOkD,EAAMyB,SAAU4L,EAAsBxM,UAAWX,EAAQzB,gBAC9F,kBAACkD,EAAA,EAAD,CAAQE,KAAK,QAAQzD,MAAM,YAAYiD,QAAQ,YAAYR,UAAWX,EAAQyM,SAAU/K,QAAS,WAAOtH,UAAU6T,UAAUC,UAAUpO,KAAtI,SAIJ,kBAACoB,EAAA,EAAD,CAAYC,QAAQ,KAAKgH,MAAM,SAASxH,UAAWX,EAAQ4M,UAA3D,mDAIA,kBAAC,IAAD,CAAMtM,GAAE,sBAAiBT,GAAUU,MAAO,CAAEC,eAAgB,OAAQtG,MAAO,QAC3E,kBAACuH,EAAA,EAAD,CACIE,KAAK,QACLzD,MAAM,YACNiD,QAAQ,YACRR,UAAWX,EAAQtB,WACnB4B,GAAE,sBAAiBT,IALvB,UAYZ,OACI,kBAACI,EAAA,EAAD,CAAenH,MAAOA,GAElB,kBAACoH,EAAA,EAAD,CACIrC,QAAQ,OACR1D,OAAQ,GACRgG,QAAQ,UACRC,WAAW,SACXC,YAAY,QAEb,kBAAC,IAAD,CAAMC,GAAG,IAAIC,MAAO,CAAEC,eAAgB,OAAQtC,MAAO,UAChD,kBAAC,IAAD,QAKR,kBAACuC,GAAA,EAAD,CAAMC,WAAS,EAACC,UAAWX,EAAQpC,gBAC/B,kBAAC6C,GAAA,EAAD,CAAMG,MAAI,EAACC,GAAI,GAAIC,GAAI,EAAGC,GAAI,GAC1BkM,EAASG,EAAsBY,M,UCjLpCG,GAfH,WACR,OACI,kBAACC,GAAA,EAAD,KACI,kBAAC,IAAD,KACI,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOC,OAAK,EAAChR,KAAK,IAAIiR,UAAWpC,KACjC,kBAAC,IAAD,CAAOmC,OAAK,EAAChR,KAAK,eAAeiR,UAAWzB,KAC5C,kBAAC,IAAD,CAAOwB,OAAK,EAAChR,KAAK,sBAAsBiR,UAAWC,KACnD,kBAAC,IAAD,CAAOlR,KAAK,iBAAiBiR,UAAWE,SCT5DC,IAASC,OACP,oCACI,kBAAC,IAAD,CAAUjW,MAAOA,GACb,kBAAC,GAAD,QAGRkW,SAASC,eAAe,W","file":"static/js/main.abeb7045.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 183;","import {SET_CURRENT_ROOM, SET_CURRENT_ROOM_ERROR} from '../actionTypes';\r\nimport produce from 'immer'\r\n\r\nconst initialState = {\r\n    data: {\r\n        // id: 'dummy-room-id',\r\n        // name: 'Dummy Room',\r\n    },\r\n    error: null\r\n};\r\n\r\nconst roomReducer = produce((roomDraft, action) => {\r\n    switch (action.type) {\r\n        case SET_CURRENT_ROOM: {\r\n            roomDraft.data = action.payload.room;\r\n            roomDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_CURRENT_ROOM_ERROR: {\r\n            roomDraft.error = action.payload.error;\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default roomReducer;\r\n","export const ADD_PEER = 'ADD_PEER';\r\nexport const REMOVE_PEER = 'REMOVE_PEER';\r\nexport const SET_PEERS_ERROR = 'SET_PEERS_ERROR';\r\n\r\nexport const ADD_CONNECTION = 'ADD_CONNECTION';\r\nexport const REMOVE_CONNECTION = 'REMOVE_CONNECTION';\r\nexport const SET_CONNECTIONS_ERROR = 'SET_CONNECTIONS_ERROR';\r\n\r\nexport const ADD_CALL = 'ADD_CALL';\r\nexport const REMOVE_CALL = 'REMOVE_CALL';\r\nexport const SET_CALLS_ERROR = 'SET_CALLS_ERROR';\r\n\r\nexport const ADD_STREAM = 'ADD_STREAM';\r\nexport const REMOVE_STREAM = 'REMOVE_STREAM';\r\nexport const SET_STREAMS_ERROR = 'SET_STREAM_ERROR';\r\nexport const CLEAR_ALL_STREAMS = 'CLEAR_ALL_STREAMS';\r\n\r\nexport const SET_CURRENT_ROOM = 'SET_CURRENT_ROOM';\r\nexport const SET_CURRENT_ROOM_ERROR = 'SET_CURRENT_ROOM_ERROR';\r\n\r\nexport const SET_LOCAL_USER_LOADING = 'SET_LOCAL_USER_LOADING';\r\nexport const INIT_LOCAL_USER_SOCKET = 'INIT_LOCAL_USER_SOCKET';\r\nexport const INIT_LOCAL_USER_PEER = 'INIT_LOCAL_USER_PEER';\r\nexport const SET_LOCAL_USER_METADATA = 'SET_LOCAL_USER_METADATA';\r\nexport const SET_LOCAL_USER_ERROR = 'SET_LOCAL_USER_ERROR';\r\nexport const RESET_LOCAL_USER = 'RESET_LOCAL_USER';\r\n\r\nexport const SET_PLUGIN = 'SET_PLUGIN';\r\nexport const SET_PLUGIN_ERROR = 'SET_PLUGIN_ERROR';\r\n\r\nexport const ADD_NEW_MESSAGE = 'ADD_NEW_MESSAGE';\r\n","// The place to put all helper methods that do not necessarily belong to a specific component\r\n// Once this file gets too crowded, create an utils folder and start seperating the exported helper methods\r\n\r\n// import {useEffect, useRef, useState} from \"react\";\r\nimport ipRegex from \"ip-regex\";\r\n\r\n/**\r\n * Transforms a javascript object into a query string.\r\n * @param object The source object. Example: {a: 5, b: 10}\r\n * @returns {string} The resulting query string. Example 'a=5&b=10'\r\n */\r\nexport const serializeQueryString = object => {\r\n    return Object.entries(object).map(([key, value]) => `${key}=${value}`).join('&');\r\n};\r\n\r\n/**\r\n * Set the src of a html5 <video> element and start playing\r\n * @param videoRef The reference to the video element\r\n * @param stream The stream that should be played by the referenced video element\r\n * @param muted Whether or not the audio of the stream should be muted\r\n */\r\nexport const setVideoSrc = (videoRef, stream, muted= true) => {\r\n    if (videoRef.current && stream) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.oncanplay = () => {\r\n            videoRef.current.play();\r\n            videoRef.current.muted = muted;\r\n        };\r\n    }\r\n};\r\n\r\n// untested prototype for a hook that might replace setVideoSrc(). Right now there is no benefit of using it. Rethink design\r\n// export const useStream = (muted = false) => {\r\n//     const videoRef = useRef(null);\r\n//     const [stream, setStream] = useState(null);\r\n//\r\n//     useEffect(() => {\r\n//         if (videoRef.current && stream) {\r\n//             videoRef.current.srcObject = stream;\r\n//             videoRef.current.oncanplay = () => {\r\n//                 videoRef.current.play();\r\n//                 videoRef.current.muted = muted;\r\n//             };\r\n//         }\r\n//     }, [stream, videoRef, muted]);\r\n//\r\n//     return [videoRef, setStream];\r\n// };\r\n\r\nexport const clearStreamTracks = stream => {\r\n    if (stream) {\r\n        stream.getTracks().forEach(track => track.stop());\r\n    }\r\n};\r\n\r\nexport const getPersistedData = (key) => {\r\n    const dataJson = localStorage.getItem(key);\r\n    return dataJson ? JSON.parse(dataJson) : {};\r\n};\r\n\r\nexport const persistData = (key, data) => {\r\n    const dataStringified = JSON.stringify(data);\r\n    localStorage.setItem(key, dataStringified);\r\n};\r\n\r\nexport const isIpAddress = (testedString) => {\r\n    return ipRegex().test(testedString);\r\n}\r\n","import {INIT_LOCAL_USER_SOCKET, INIT_LOCAL_USER_PEER, SET_LOCAL_USER_METADATA, SET_LOCAL_USER_ERROR, RESET_LOCAL_USER, SET_LOCAL_USER_LOADING} from '../actionTypes';\r\nimport {getPersistedData} from \"../../utils\";\r\nimport produce from 'immer'\r\n\r\nconst initialState = {\r\n    peer: null,\r\n    socket: null,\r\n    metadata: getPersistedData('metadata'),\r\n    loading: false,\r\n    error: null\r\n};\r\n\r\nconst localUserReducer = produce((localPeerDraft, action) => {\r\n    switch (action.type) {\r\n        case SET_LOCAL_USER_LOADING: {\r\n            localPeerDraft.loading = action.payload.loading;\r\n            return;\r\n        }\r\n        case INIT_LOCAL_USER_SOCKET: {\r\n            localPeerDraft.socket = action.payload.socket;\r\n            localPeerDraft.error = null;\r\n            return;\r\n        }\r\n        case INIT_LOCAL_USER_PEER: {\r\n            localPeerDraft.peer = action.payload.peer;\r\n            localPeerDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_LOCAL_USER_METADATA: {\r\n            localPeerDraft.metadata = action.payload.metadata;\r\n            localPeerDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_LOCAL_USER_ERROR: {\r\n            localPeerDraft.error = action.payload.error;\r\n            return;\r\n        }\r\n        case RESET_LOCAL_USER: {\r\n            localPeerDraft.peer = null;\r\n            localPeerDraft.socket = null;\r\n            localPeerDraft.loading = false;\r\n            localPeerDraft.metadata = getPersistedData('metadata');\r\n            localPeerDraft.error = null;\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default localUserReducer;\r\n","import {ADD_PEER, REMOVE_PEER, SET_PEERS_ERROR} from '../actionTypes';\r\nimport produce from 'immer';\r\n\r\nconst initialState = {\r\n    data: {\r\n        // 'd7f7saim3': {nickname: 'Andi'},\r\n        // '32mfdnmio': {nickname: 'Jimmy'}\r\n    },\r\n    error: null\r\n};\r\n\r\nconst peersReducer = produce((peersDraft, action) => {\r\n    switch (action.type) {\r\n        case ADD_PEER: {\r\n            const {peerId, metadata} = action.payload;\r\n            peersDraft.data[peerId] = {metadata};\r\n            peersDraft.error = null;\r\n            return;\r\n        }\r\n        case REMOVE_PEER: {\r\n            const peer = action.payload.peer;\r\n            delete peersDraft.data[peer.id];\r\n            peersDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_PEERS_ERROR: {\r\n            peersDraft.error = action.payload.error;\r\n            return;\r\n\r\n        }\r\n        default: {\r\n        }\r\n    }\r\n}, initialState);\r\n\r\nexport default peersReducer;\r\n","import {ADD_CONNECTION, REMOVE_CONNECTION, SET_CONNECTIONS_ERROR} from '../actionTypes';\r\nimport produce from 'immer';\r\n\r\nconst initialState = {\r\n    data: {},\r\n    error: null\r\n};\r\n\r\nconst connectionsReducer = produce((connectionsDraft, action) => {\r\n    switch (action.type) {\r\n        case ADD_CONNECTION: {\r\n            const connection = action.payload.connection;\r\n            connectionsDraft.data[connection.peer] =  connection;\r\n            connectionsDraft.error = null;\r\n            return;\r\n        }\r\n        case REMOVE_CONNECTION: {\r\n            const connection = action.payload.connection;\r\n            delete connectionsDraft.data[connection.peer];\r\n            connectionsDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_CONNECTIONS_ERROR: {\r\n            connectionsDraft.error = action.payload.error;\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default connectionsReducer;\r\n","import {ADD_CALL, REMOVE_CALL, SET_CALLS_ERROR} from '../actionTypes';\r\nimport produce from 'immer'\r\n\r\nconst initialState = {\r\n    data: {},\r\n    error: null\r\n};\r\n\r\nconst callsReducer = produce((callsDraft, action) => {\r\n    switch (action.type) {\r\n        case ADD_CALL: {\r\n            const call = action.payload.call;\r\n            callsDraft.data[call.peer] = call;\r\n            callsDraft.error = null;\r\n            return;\r\n        }\r\n        case REMOVE_CALL: {\r\n            const call = action.payload.call;\r\n            delete callsDraft.data[call.peer];\r\n            callsDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_CALLS_ERROR: {\r\n            callsDraft.error = action.payload.error;\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default callsReducer;\r\n","import {ADD_STREAM, REMOVE_STREAM, SET_STREAMS_ERROR, CLEAR_ALL_STREAMS} from '../actionTypes';\r\nimport {clearStreamTracks} from \"../../utils\";\r\nimport produce from 'immer'\r\n\r\nconst initialState = {\r\n    data: {},\r\n    error: null\r\n};\r\n\r\nconst streamsReducer = produce((streamsDraft, action) => {\r\n    switch (action.type) {\r\n        case ADD_STREAM: {\r\n            const {peerId, stream} = action.payload;\r\n            streamsDraft.data[peerId] = stream;\r\n            streamsDraft.error = null;\r\n            return;\r\n        }\r\n        case REMOVE_STREAM: {\r\n            const peerId = action.payload.peerId;\r\n            const stream = streamsDraft.data[peerId];\r\n            clearStreamTracks(stream);\r\n            delete streamsDraft.data[peerId];\r\n            return;\r\n        }\r\n        case SET_STREAMS_ERROR: {\r\n            streamsDraft.error = action.payload.error;\r\n            return;\r\n        }\r\n        case CLEAR_ALL_STREAMS: {\r\n            Object.values(streamsDraft.data).forEach(clearStreamTracks);\r\n            streamsDraft.data = {};\r\n            streamsDraft.error = null;\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default streamsReducer;\r\n","import {SET_PLUGIN, SET_PLUGIN_ERROR} from '../actionTypes';\r\nimport produce from 'immer'\r\n\r\n// TODO there should be a plugins.reducer storing the plugin data of already fetched plugins (once they come from the backend)\r\n//  activePluginId should be stored in the room.reducer, as well as pluginIds that are shown in the room sidebar.\r\n//  plugin data can be fetched from the backend (or could already be included when fetching the room)\r\nconst initialState = {\r\n    // origin: 'null',\r\n    iframe: null,\r\n    url: '',\r\n    name: 'p2p-test-plugin',\r\n    error: null\r\n};\r\n\r\nconst pluginReducer = produce((pluginDraft, action) => {\r\n    switch (action.type) {\r\n        case SET_PLUGIN: {\r\n            const {url, name, iframe} = action.payload.plugin;\r\n            pluginDraft.iframe = iframe;\r\n            pluginDraft.url = url;\r\n            pluginDraft.name = name;\r\n            pluginDraft.error = null;\r\n            return;\r\n        }\r\n        case SET_PLUGIN_ERROR: {\r\n            pluginDraft.error = action.payload.error;\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default pluginReducer;\r\n","import {ADD_NEW_MESSAGE} from '../actionTypes';\r\nimport produce from 'immer';\r\n\r\nconst initialState = [];\r\n\r\nconst chatReducer = produce((messagesDraft, action) => {\r\n    switch(action.type) {\r\n        case ADD_NEW_MESSAGE: {\r\n            messagesDraft.push(action.payload);  // FIXME should be action.payload.message\r\n            return;\r\n        }\r\n        default: {}\r\n    }\r\n}, initialState);\r\n\r\nexport default chatReducer\r\n","import { combineReducers } from 'redux';\r\nimport roomReducer from './room.reducer';\r\nimport localUserReducer from \"./localUser.reducer\";\r\nimport peersReducer from './peers.reducer';\r\nimport connectionsReducer from './connections.reducer';\r\nimport callsReducer from './calls.reducer';\r\nimport streamsReducer from \"./streams.reducer\";\r\nimport pluginReducer from \"./plugin.reducer\";\r\nimport chatReducer from \"./chat.reducer\";\r\n\r\nconst reducer = combineReducers({\r\n    room: roomReducer,\r\n    localUser: localUserReducer,\r\n    peers: peersReducer,\r\n    calls: callsReducer,\r\n    connections: connectionsReducer,\r\n    streams: streamsReducer,\r\n    plugin: pluginReducer,\r\n    chat: chatReducer\r\n});\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: '#2E7D32'\r\n        },\r\n        secondary: {\r\n            main: '#FBC02D'\r\n        }\r\n    }\r\n})\r\n\r\nexport default theme\r\n","import {ADD_STREAM, CLEAR_ALL_STREAMS, REMOVE_STREAM} from \"../actionTypes\";\r\n\r\nexport const addStream = (peerId, stream) => (dispatch, getState) => {\r\n    if (stream) {\r\n        dispatch({type: ADD_STREAM, payload: {peerId, stream}});\r\n    }\r\n};\r\n\r\nexport const removeStream = (peerId) => (dispatch, getState) => {\r\n    if (peerId) {\r\n        dispatch({type: REMOVE_STREAM, payload: {peerId}});\r\n    }\r\n};\r\n\r\nexport const startLocalStream = (peer, constraintsOverride) => async (dispatch, getState) => {\r\n    const localPeer = peer || getState().localUser.peer;\r\n    const localSteam = getState().streams.data[localPeer.id]\r\n    if (!localSteam) {\r\n\r\n        try {\r\n            const constraints = {\r\n                audio: true,\r\n                video: {\r\n                    frameRate: {ideal: 20, max: 25},\r\n                    width: {ideal: 128},\r\n                    height: {ideal: 72}\r\n                }\r\n            };\r\n\r\n            let mediaStream = await navigator.mediaDevices.getUserMedia(constraintsOverride || constraints);\r\n            dispatch(addStream(localPeer.id, mediaStream));\r\n            return mediaStream;\r\n        } catch (error) {\r\n            console.error('local stream couldnt be started', error);\r\n        }\r\n    } else {\r\n        console.log('local stream already active');\r\n    }\r\n};\r\nexport const clearAllStreams = () => async (dispatch, getState) => {\r\n        dispatch({type: CLEAR_ALL_STREAMS});\r\n};\r\n","import {ADD_CALL, REMOVE_CALL} from \"../actionTypes\";\r\nimport {startLocalStream, addStream} from \"./streams.actions\";\r\n\r\nexport const addCall = call => (dispatch, getState) => {\r\n    if (call) {\r\n        dispatch({type: ADD_CALL, payload: {call}});\r\n        dispatch(initCallListeners(call));\r\n    }\r\n};\r\n\r\nexport const removeCall = call => (dispatch, getState) => {\r\n    if (call) {\r\n        dispatch({type: REMOVE_CALL, payload: {call}});\r\n    }\r\n};\r\n\r\nexport const initCallListeners = call => (dispatch, getState) => {\r\n    if (call) {\r\n        call.on('stream', remoteMediaStream => {\r\n            dispatch(addStream(call.peer, remoteMediaStream));\r\n        });\r\n    }\r\n};\r\n\r\nexport const callConnection = connection => async (dispatch, getState) => {\r\n    const {peer} = getState().localUser;\r\n    const localStream = getState().streams.data[peer.id] || await dispatch(startLocalStream(peer));\r\n\r\n    const call = await peer.call(connection.peer, localStream);\r\n    dispatch(addCall(call));\r\n};\r\n\r\nexport const callReplaceStreamTrack = (remotePeerId, options) => async (dispatch, getState) => {\r\n    const call = getState().calls.data[remotePeerId];\r\n    const {peer} = getState().localUser;\r\n    const localStream = await dispatch(startLocalStream(peer, options));\r\n\r\n    call.peerConnection.getSenders()[0].replaceTrack(localStream);\r\n\r\n    dispatch(addCall(call));\r\n};\r\n","import {SET_CURRENT_ROOM, SET_CURRENT_ROOM_ERROR} from \"../actionTypes\";\r\nimport {clearAllStreams} from './streams.actions';\r\nimport {resetLocalUser} from './localUser.actions';\r\n\r\nexport const setCurrentRoom = room => ({\r\n    type: SET_CURRENT_ROOM,\r\n    payload: {room}\r\n});\r\n\r\nexport const setCurrentRoomError = error => ({\r\n    type: SET_CURRENT_ROOM_ERROR,\r\n    payload: {error}\r\n});\r\n\r\nexport const joinRoom = (roomId, password, peerData) => (dispatch, getState) => {\r\n    //\r\n    // const room = null;\r\n    // dispatch(setCurrentRoom(room));\r\n};\r\n\r\nexport const roomExitCleanup = () => (dispatch, getState) => {\r\n    const state = getState();\r\n\r\n    const socket = state.localUser.socket;\r\n    if (socket) {\r\n         const currentRoom = state.room.data;\r\n         if (currentRoom.id) {\r\n             socket.emit('leave', currentRoom.id);\r\n             dispatch(setCurrentRoom({}));\r\n         }\r\n        socket.disconnect();\r\n        dispatch(resetLocalUser());\r\n    }\r\n\r\n    const connections = state.connections.data;\r\n    if (connections) {\r\n        Object.values(connections).forEach(conn => conn.close());\r\n    }\r\n\r\n    const localPeer = state.localUser.peer;\r\n    if (localPeer) {\r\n        const localStream = state.streams[localPeer.id];\r\n        if (localStream) {\r\n            window.localStream.getTracks().forEach(track => track.stop());\r\n        }\r\n    }\r\n    dispatch(clearAllStreams());\r\n};\r\n","import {ADD_CONNECTION, REMOVE_CONNECTION, ADD_NEW_MESSAGE, ADD_PEER, SET_CURRENT_ROOM} from \"../actionTypes\";\r\nimport {callConnection, removeCall} from \"./calls.actions\";\r\nimport {removeStream, startLocalStream} from \"./streams.actions\";\r\nimport {setCurrentRoomError} from \"./room.actions\";\r\n\r\nexport const addConnection = connection => async (dispatch, getState) => {\r\n    if (connection && connection.peer) {\r\n        await dispatch({type: ADD_CONNECTION, payload: {connection}});\r\n        await dispatch(initConnectionListeners(connection));\r\n    }\r\n};\r\n\r\nexport const removeConnection = connection => async (dispatch, getState) => {\r\n    if (connection && connection.peer) {\r\n\r\n        const stream = getState().streams.data[connection.peer];\r\n        if (stream) {\r\n            await dispatch(removeStream(connection.peer));\r\n        }\r\n\r\n        const call = getState().calls.data[connection.peer];\r\n        if (call) {\r\n            await dispatch(removeCall(call));\r\n        }\r\n\r\n        await dispatch({type: REMOVE_CONNECTION, payload: {connection}});\r\n    }\r\n};\r\n\r\nexport const initConnectionListeners = connection => (dispatch, getState) => {\r\n    if (connection && connection.connectionId) {\r\n        connection.on('open', () => {\r\n            setTimeout(() => dispatch(introduceYourself(connection), 500)); // TODO temporary delay for experimentation\r\n        });\r\n\r\n        connection.on('data', data => {\r\n            console.log('on connection data', data);\r\n            const type = data.type;\r\n\r\n            if (data.textMessage) {\r\n                dispatch({type: ADD_NEW_MESSAGE, payload: data.textMessage});\r\n                console.log(`%c MESSAGE - ${data.textMessage.peerId}: \"${data.textMessage.text}\"`, 'background: black; color: white; padding: 1rem');\r\n            }\r\n\r\n            if (type === 'PLUGIN_DATA') {\r\n                window.postMessage(data.payload, '*');\r\n                const iframe = getState().plugin.iframe;\r\n                if (iframe) {\r\n                    iframe.contentWindow.postMessage(data, \"*\");\r\n                }\r\n            }\r\n\r\n            if (type === 'PEER_INTRODUCTION') {\r\n                console.log('Connected peer is introducing himself to you:', data.payload);\r\n                const remoteMetadata = data.payload.metadata;\r\n                dispatch({type: ADD_PEER, payload: {metadata: remoteMetadata, peerId: connection.peer}});\r\n            }\r\n        });\r\n\r\n        connection.on('close', () => {\r\n            dispatch(removeConnection(connection));\r\n        });\r\n    }\r\n};\r\n\r\nexport const connectWithPeer = remotePeerId => async (dispatch, getState) => {\r\n    const {peer} = getState().localUser;\r\n\r\n    if (remotePeerId !== peer.id) {\r\n        const connection = await peer.connect(remotePeerId);\r\n        await dispatch(addConnection(connection));\r\n        await dispatch(callConnection(connection));\r\n    }\r\n};\r\n\r\nexport const sendDataToConnection = (connection, data) => async (dispatch, getState) => {\r\n    if (connection) {\r\n        connection.send(data);\r\n    }\r\n};\r\n\r\nexport const joinRoom = (roomId, password) => async (dispatch, getState) => { // TODO move to room actions\r\n    const {socket, peer} = getState().localUser;\r\n\r\n    if (socket && peer) {\r\n        socket.emit('join', {roomId, password, peerId: peer.id},\r\n            // callback: the joining user himself is responsible to establish connections with other users\r\n            async (err, data) => {\r\n                if (!err) {\r\n                    await dispatch(startLocalStream(peer));\r\n                    await dispatch({type: SET_CURRENT_ROOM, payload: {room: data.room}});\r\n                    data.room.joinedUsers.forEach((remotePeerId) => dispatch(connectWithPeer(remotePeerId)));\r\n                } else {\r\n                    dispatch(setCurrentRoomError(err));\r\n                }\r\n            });\r\n    }\r\n};\r\n\r\nexport const introduceYourself = (connection) => async (dispatch, getState) => {\r\n    const metadata = getState().localUser.metadata;\r\n\r\n    if (metadata) {\r\n        dispatch(sendDataToConnection(connection, {type: 'PEER_INTRODUCTION', payload: {metadata}}));\r\n    }\r\n};\r\n","import {INIT_LOCAL_USER_PEER, INIT_LOCAL_USER_SOCKET, RESET_LOCAL_USER, SET_LOCAL_USER_LOADING, SET_LOCAL_USER_METADATA} from '../actionTypes';\r\nimport Peer from \"peerjs\";\r\nimport {API_BASE_URL, PORT_SIGNALING, PORT_SOCKET, SSL_ENABLED} from \"../../constants\";\r\nimport io from \"socket.io-client\";\r\nimport {getPersistedData, persistData, serializeQueryString} from '../../utils';\r\nimport {addConnection, removeConnection} from \"./connections.actions\";\r\nimport {addCall} from \"./calls.actions\";\r\nimport {startLocalStream} from \"./streams.actions\";\r\nimport {setCurrentRoomError} from './room.actions';\r\n\r\nexport const resetLocalUser = () => ({type: RESET_LOCAL_USER});\r\n\r\n/**\r\n * Init the socket.io client. Once socket is ready, init the peerJS Peer and store them in the store.\r\n */\r\nexport const initLocalUser = () => async (dispatch, getState) => {\r\n    const metadata = getPersistedData('metadata');\r\n\r\n    if (!getState().localUser.loading) {\r\n        if (!metadata.nickname || !metadata.nickname.length) {\r\n            dispatch(setCurrentRoomError({error: {name: 'RoomError', message: 'Please enter a nickname before joining the room.'}}));\r\n        } else {\r\n            dispatch(initLocalUserSocket(metadata));\r\n        }\r\n    }\r\n};\r\n\r\nconst initLocalUserSocket = (metadata) => async (dispatch, getState) => {\r\n    dispatch({type: SET_LOCAL_USER_LOADING, payload: {loading: true}});\r\n    const protocol = SSL_ENABLED ? 'https' : 'http';\r\n    const socket = io(`${protocol}://${API_BASE_URL}:${PORT_SOCKET}`, {\r\n        // transports: ['websocket'],\r\n        secure: SSL_ENABLED,\r\n        query: serializeQueryString(metadata)\r\n    });\r\n\r\n    dispatch(initLocalUserSocketListeners(socket));\r\n}\r\n\r\nconst initLocalUserSocketListeners = (socket) => async (dispatch, getState) => {\r\n    socket.on('ready', (socketId) => {\r\n        dispatch({type: INIT_LOCAL_USER_SOCKET, payload: {socket}});\r\n        dispatch(initLocalUserPeer(socketId));\r\n    });\r\n\r\n    socket.on('user-leave', (socketId) => {\r\n        const connection = getState().connections.data[socketId];\r\n        if (connection) {\r\n            dispatch(removeConnection(connection));\r\n        }\r\n    });\r\n}\r\n\r\nconst initLocalUserPeer = (customPeerId) => async (dispatch, getState) => {\r\n    // FIXME peer init can fail when socket.id start with an underscore. Rarely happens though, allow peerId to be different from socketId\r\n    const peer = await new Peer(customPeerId, {\r\n        host: API_BASE_URL,\r\n        port: PORT_SIGNALING,\r\n        path: '/peer/signal',\r\n        // debug: 3,\r\n        config: {iceServers: [{url: 'stun:stun.l.google.com:19302'}]}\r\n    });\r\n    await dispatch({type: INIT_LOCAL_USER_PEER, payload: {peer}});\r\n    await dispatch(initLocalUserPeerListeners(peer));\r\n    dispatch({type: SET_LOCAL_USER_LOADING, payload: {loading: false}});\r\n};\r\n\r\nconst initLocalUserPeerListeners = (localPeer) => async (dispatch, getState) => {\r\n    localPeer.on('open', id => {\r\n    });\r\n\r\n    localPeer.on('connection', connection => {\r\n        dispatch(addConnection(connection));\r\n    });\r\n\r\n    localPeer.on('call', async call => {\r\n        const localStream = await getState().streams.data[localPeer.id] || dispatch(startLocalStream(localPeer));\r\n        call.answer(localStream);\r\n        dispatch(addCall(call));\r\n    })\r\n};\r\n\r\nexport const setMetadata = (metadata) => (dispatch, getState) => {\r\n    persistData('metadata', metadata);\r\n    dispatch({type: SET_LOCAL_USER_METADATA, payload: {metadata}});\r\n};\r\n","export const IS_LOCALHOST = process.env.NODE_ENV === 'development';\r\n\r\nexport const API_BASE_URL = IS_LOCALHOST ? 'localhost' : process.env.REACT_APP_API_BASE_URL;\r\nexport const SSL_ENABLED = IS_LOCALHOST ? false : process.env.REACT_APP_SSL_ENABLED === 'true';\r\n\r\nexport const PORT_SIGNALING = process.env.REACT_APP_PORT_SIGNALING;\r\nexport const PORT_SOCKET = process.env.REACT_APP_PORT_SOCKET;\r\n\r\nexport const FRONTEND_URL = IS_LOCALHOST ? 'localhost' : process.env.REACT_APP_FRONTEND_URL;\r\n","import React, {useState} from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport { ThemeProvider, makeStyles } from '@material-ui/core/styles';\r\nimport theme from '../../style/theme/MainTheme';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\nimport {resetLocalUser, setMetadata} from \"../../store/actions/localUser.actions\";\r\nimport {connect} from \"react-redux\";\r\nimport {setCurrentRoomError} from \"../../store/actions/room.actions\";\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles ({\r\n    containerStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        paddingTop: '128px'\r\n    },\r\n    titleStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        width: '100%',\r\n        padding: '16px',\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        backgroundColor: '#388E3C',\r\n    },\r\n    nicknameStyle: {\r\n        width: '90%',\r\n        margin: '16px',\r\n    },\r\n    textfieldLink: {\r\n        width: '90%',\r\n        marginRight: '16px',\r\n        marginLeft: '16px',\r\n    },\r\n    nextButton: {\r\n        color: 'white',\r\n        boxShadow: 'none',\r\n        width: '100%',\r\n\r\n    },\r\n    alignbutton: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        width: '80%',\r\n        marginTop: '24px',\r\n        marginBottom: '24px'\r\n    }\r\n});\r\n\r\nconst RoomLobby = ({history, match, setMetadata, nickname, roomError, setCurrentRoomError, resetLocalUser}) => {\r\n    const [newNickname, setNewNickname] = useState(nickname);\r\n    const [link, setLink] = useState(match.params.roomId);\r\n    const classes = useStyles();\r\n\r\n    const handleChangeName = (e) => {\r\n        setNewNickname(e.target.value)\r\n    };\r\n\r\n    const handleChangeLink = (e) => {\r\n        setLink(e.target.value)\r\n    };\r\n\r\n    const handleJoin = (e) => {\r\n        setMetadata({nickname: newNickname});\r\n        setCurrentRoomError(null);\r\n        resetLocalUser();\r\n        history.push(`/rooms/${match.params.roomId}`);\r\n    };\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Box display='flex' height={63} bgcolor='#2E7D32' alignItems='center' paddingLeft='36px'>\r\n                <Link to=\"/\" style={{ textDecoration: 'none', color: 'white'}}><ArrowBackIosIcon/></Link>\r\n            </Box>\r\n            <Grid container className={classes.containerStyle}>\r\n                <Grid item xs={11} md={6} lg={5}>\r\n                    <Box display='flex' flexDirection='column' alignItems='center' width={'100%'} borderRadius='5px' bgcolor='white'>\r\n                        <Typography variant='h4' className={classes.titleStyle}>Enter the room</Typography>\r\n                        <TextField\r\n                            required\r\n                            id=\"outlined-required\"\r\n                            label=\"Nickname\"\r\n                            variant=\"outlined\"\r\n                            value={newNickname}\r\n                            className={classes.nicknameStyle}\r\n                            onChange={handleChangeName}\r\n                        />\r\n                        <TextField\r\n                            required\r\n                            id=\"outlined-required\"\r\n                            label=\"Room ID\"\r\n                            variant=\"outlined\"\r\n                            value={link}\r\n                            className={classes.textfieldLink}\r\n                            onChange={handleChangeLink}\r\n                        />\r\n                        <div className={classes.alignbutton}>\r\n                            <Button onClick={handleJoin} size=\"large\" color=\"secondary\" variant=\"contained\" className={classes.nextButton}>\r\n                                join\r\n                            </Button>\r\n                        </div>\r\n                        {roomError && <Box color={'red'} textAlign={'center'}>{roomError.error.message}</Box>}\r\n                    </Box>\r\n                </Grid>\r\n            </Grid>\r\n        </ThemeProvider>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    nickname: state.localUser.metadata.nickname || '',\r\n    roomError: state.room.error\r\n});\r\n\r\nexport default connect(mapStateToProps, {setMetadata, setCurrentRoomError, resetLocalUser})(RoomLobby);\r\n","import {SET_PLUGIN} from \"../actionTypes\";\r\nimport {sendDataToConnection} from \"./connections.actions\";\r\n\r\nexport const setPlugin = plugin => (dispatch, getState) => {\r\n    // temporary simplified action\r\n    if (plugin) {\r\n        dispatch({type: SET_PLUGIN, payload: {plugin}});\r\n    }\r\n};\r\n\r\nconst sendPluginMessageToAllConnections = (evt) => (dispatch, getState) => {\r\n    const connections = Object.values(getState().connections.data);\r\n    const data = {type: 'PLUGIN_DATA', payload: evt.data.payload};\r\n    console.log('PLUGIN_SEND_TO_ALL_PEERS', data);\r\n    connections.forEach(connection => {\r\n         dispatch(sendDataToConnection(connection, data));\r\n     });\r\n};\r\n\r\nconst sendPluginMessageToConnection = (evt) => (dispatch, getState) => {\r\n    const {peerId, payload} = evt.data;\r\n    const connection = getState().connections.data[peerId];\r\n    const data = {type: 'PLUGIN_DATA', payload: payload};\r\n    dispatch(sendDataToConnection(connection, data));\r\n};\r\n\r\nconst pluginMessageActions = {\r\n    'PLUGIN_SEND_TO_ALL_PEERS': sendPluginMessageToAllConnections,\r\n    'PLUGIN_SEND_TO_PEER': sendPluginMessageToConnection,\r\n    'PLUGIN_PLATFORM_CONTROL_REQUEST': () => console.log('plugin is requesting something from the platform (mute local user, rumble screen, etc')\r\n};\r\n\r\nexport const handlePluginMessage = (evt) => async (dispatch, getState) => {\r\n    if (evt.data.type && evt.data.type.startsWith('PLUGIN')) {\r\n        const action = pluginMessageActions[evt.data.type];\r\n        dispatch(action(evt))\r\n    }\r\n}\r\n\r\n","import React, {useEffect, useRef} from 'react';\r\nimport {Box} from \"@material-ui/core\";\r\nimport {connect} from \"react-redux\";\r\nimport {handlePluginMessage, setPlugin} from \"../../../store/actions/plugin.actions\";\r\n\r\nconst RoomPluginContent = ({plugin, handlePluginMessage, setPlugin}) => {\r\n    const iframeRef = useRef();\r\n\r\n    useEffect(() => {\r\n        const handleMessage = (evt) => {\r\n            handlePluginMessage(evt);\r\n        };\r\n        window.addEventListener('message', handleMessage);\r\n        return () => window.removeEventListener('message', handleMessage);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (iframeRef && iframeRef.current) {\r\n            setPlugin({...plugin, iframe: iframeRef.current});\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [iframeRef, plugin.url]);\r\n\r\n    return (\r\n        <Box flexGrow={1}>\r\n            {plugin && plugin.url && <iframe src={plugin.url} style={{width: '100%', height: '100%'}} ref={iframeRef} title={'plugin content'} />}\r\n        </Box>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    plugin: state.plugin\r\n});\r\n\r\nexport default connect(mapStateToProps, {handlePluginMessage, setPlugin})(RoomPluginContent);\r\n","import React, {useEffect, useRef} from 'react';\r\nimport {Box, Card, CircularProgress, makeStyles} from \"@material-ui/core\";\r\nimport {setVideoSrc} from \"../../../utils\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n    },\r\n    cardWrapper: {\r\n        position: 'relative',\r\n        display: 'flex',\r\n        flexFlow: 'column nowrap',\r\n        marginBottom: '5px',\r\n        width: '100%',\r\n        height: '130px',\r\n    },\r\n    media: {\r\n        width: '100%',\r\n        height: '100%',\r\n        objectFit: 'cover'\r\n    },\r\n    displayName: {\r\n        color: 'white',\r\n        opacity: '0.8',\r\n        position: 'absolute',\r\n        bottom: '5px',\r\n        left: '5px',\r\n        fontSize: '0.9rem',\r\n        userSelect: 'none'\r\n    }\r\n}));\r\n\r\nconst GenericMediaCard = ({stream, muted = false, user}) => {\r\n    const classes = useStyles();\r\n    const videoRef = useRef(null);\r\n    const {nickname} = user;\r\n\r\n    useEffect(() => {\r\n        setVideoSrc(videoRef, stream, muted);\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [stream]);\r\n\r\n    return (\r\n        <Card className={classes.cardWrapper}>\r\n            {stream\r\n                ? <video ref={videoRef} className={classes.media} />\r\n                : <CircularProgress color=\"inherit\" />\r\n            }\r\n            <Box className={classes.displayName}>{nickname}</Box>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default GenericMediaCard;\r\n","import React from 'react';\r\nimport GenericMediaCard from \"../../GenericMediaCard/GenericMediaCard\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst RemoteMediaCard = ({remoteStream, remoteNickname}) => <GenericMediaCard stream={remoteStream} user={{nickname: remoteNickname}} />;\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const remotePeerId = ownProps.connection.peer;\r\n    const remoteStream = remotePeerId ? state.streams.data[remotePeerId] : null;\r\n    const remoteMetadata = state.peers.data[remotePeerId] ? state.peers.data[remotePeerId].metadata : {};\r\n    return {\r\n        remoteStream: remoteStream,\r\n        remoteNickname: remoteMetadata.nickname || 'missing Nickname',\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps)(RemoteMediaCard);\r\n","import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport RemoteMediaCard from \"../RemoteMediaCard/RemoteMediaCard\";\r\n\r\nconst RemoteMediaManager = ({connections}) => {\r\n    return (\r\n        <>\r\n            {connections && connections.map(connection => <RemoteMediaCard key={connection.connectionId} connection={connection} />)}\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    connections: Object.values(state.connections.data)\r\n});\r\n\r\nexport default connect(mapStateToProps)(RemoteMediaManager);\r\n","import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport GenericMediaCard from \"../GenericMediaCard/GenericMediaCard\";\r\nimport {Box, makeStyles} from \"@material-ui/core\";\r\nimport RemoteMediaManager from \"./RemoteMediaManager/RemoteMediaManager\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    roomMediaManager: {\r\n        padding: '5px',\r\n    },\r\n}));\r\n\r\nconst RoomMediaManager = ({localStream, localPeerMetadata}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box bgcolor='lightblue' width={'220px'} minWidth={'150px'} className={classes.roomMediaManager}>\r\n            <GenericMediaCard stream={localStream} muted={true} user={{nickname: localPeerMetadata.nickname}}/>\r\n            <RemoteMediaManager />\r\n        </Box>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    const localPeer = state.localUser.peer;\r\n    const localStream = localPeer ? state.streams.data[localPeer.id] : null;\r\n    return {\r\n        localPeerMetadata: state.localUser.metadata,\r\n        localStream: localStream,\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, {})(RoomMediaManager);\r\n","import React, {useState} from 'react';\r\nimport {ThemeProvider, makeStyles} from '@material-ui/core/styles';\r\nimport LabelIcon from '@material-ui/icons/Label';\r\nimport WidgetsOutlinedIcon from '@material-ui/icons/WidgetsOutlined';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport theme from '../../../style/theme/MainTheme';\r\nimport {setPlugin} from \"../../../store/actions/plugin.actions\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst useStyles = makeStyles({\r\n    list: {\r\n        width: 250,\r\n    },\r\n    menuIcon: {\r\n        margin: '8px'\r\n    }\r\n});\r\n\r\n// TODO this data will be served by the backend in future releases. Not real plugins except first one in the list\r\nconst plugins = [\r\n    {name: 'Random number', url: 'https://andreas-schoch.github.io/p2p-test-plugin/'},\r\n    {name: 'Paint', url: 'https://andreas-schoch.github.io/quackamole-plugin-paint/'},\r\n    {name: 'Gomoku', url: 'https://derpmasters.github.io/quackamole-plugin-gomoku/'},\r\n    {name: 'Breakout game', url: 'https://andreas-schoch.github.io/breakout-game/'}\r\n];\r\n\r\nconst RoomSidebarMenu = ({plugin, setPlugin}) => {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const toggleDrawer = (event) => {\r\n        if (event.type === 'keydown') {\r\n            return;\r\n        }\r\n        setOpen(!open);\r\n    };\r\n\r\n    const handleSelectPlugin = (evt) => {\r\n        const index = evt.currentTarget.dataset.index;\r\n        setPlugin(plugin ? {...plugin, ...plugins[index]} : plugins[index]);\r\n    };\r\n\r\n    const list = () => (\r\n        <div className={classes.list} role=\"presentation\" onClick={toggleDrawer}>\r\n            <List>\r\n                {plugins.map(({name}, i) => (\r\n                    <ListItem button key={name} onClick={handleSelectPlugin} data-index={i}>\r\n                        <ListItemIcon><LabelIcon/></ListItemIcon>\r\n                        <ListItemText primary={name}/>\r\n                    </ListItem>\r\n                ))}\r\n            </List>\r\n            <Divider/>\r\n            <List>\r\n                <ListItem button>\r\n                    <ListItemIcon><WidgetsOutlinedIcon/></ListItemIcon>\r\n                    <ListItemText primary={'Browse Plugins'}/>\r\n                </ListItem>\r\n            </List>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Button>\r\n                <MenuIcon onClick={toggleDrawer} color='primary' fontSize='large' className={classes.menuIcon}/>\r\n                <Drawer open={open} onClose={toggleDrawer} anchor={'left'}>\r\n                    {list()}\r\n                </Drawer>\r\n            </Button>\r\n        </ThemeProvider>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    plugin: state.plugin\r\n});\r\n\r\nexport default connect(mapStateToProps, {setPlugin})(RoomSidebarMenu);\r\n","import React from 'react';\r\nimport cx from 'clsx';  // TODO This comes from some example code, it has some nice features but we need to discuss whether we want to use it\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport withStyles from '@material-ui/core/styles/withStyles';\r\nimport defaultChatMsgStyles from './ChatStyle';\r\n\r\nconst ChatMsg = withStyles(defaultChatMsgStyles, { name: 'ChatMsg' })(props => {\r\n  const {\r\n    classes,\r\n    avatar,\r\n    messages,\r\n    side,\r\n    GridContainerProps,\r\n    GridItemProps,\r\n    AvatarProps,\r\n    getTypographyProps,\r\n  } = props;\r\n\r\n  const attachClass = index => {\r\n    if (index === 0) {\r\n      return classes[`${side}First`];\r\n    }\r\n    if (index === messages.length - 1) {\r\n      return classes[`${side}Last`];\r\n    }\r\n    return '';\r\n  };\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={2}\r\n      justify={side === 'right' ? 'flex-end' : 'flex-start'}\r\n      {...GridContainerProps}\r\n    >\r\n      {side === 'left' && (\r\n        <Grid item {...GridItemProps}>\r\n          <Avatar\r\n            src={avatar}\r\n            {...AvatarProps}\r\n            className={cx(classes.avatar, AvatarProps.className)}\r\n          />\r\n        </Grid>\r\n      )}\r\n      <Grid item xs={8}>\r\n        {messages.map((msg, i) => {\r\n          const TypographyProps = getTypographyProps(msg, i, props);\r\n          return (\r\n            // eslint-disable-next-line react/no-array-index-key\r\n            <div key={msg.id || i} className={classes[`${side}Row`]}>\r\n              <Typography\r\n                align={'left'}\r\n                {...TypographyProps}\r\n                className={cx(\r\n                  classes.msg,\r\n                  classes[side],\r\n                  attachClass(i),\r\n                  TypographyProps.className\r\n                )}\r\n              >\r\n                {msg}\r\n              </Typography>\r\n            </div>\r\n          );\r\n        })}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n});\r\n\r\nChatMsg.defaultProps = {\r\n  avatar: '',\r\n  messages: [],\r\n  side: 'left',\r\n  GridContainerProps: {},\r\n  GridItemProps: {},\r\n  AvatarProps: {},\r\n  getTypographyProps: () => ({}),\r\n};\r\n\r\nexport default ChatMsg;\r\n","export default ({ palette, spacing }) => {\r\n    const radius = spacing(2.5);\r\n    const size = spacing(4);\r\n    const rightBgColor = palette.primary.main;\r\n    return {\r\n      avatar: {\r\n        width: size,\r\n        height: size,\r\n      },\r\n      leftRow: {\r\n        textAlign: 'left',\r\n      },\r\n      rightRow: {\r\n        textAlign: 'right',\r\n      },\r\n      msg: {\r\n        padding: spacing(1, 2),\r\n        borderRadius: 4,\r\n        marginBottom: 4,\r\n        display: 'inline-block',\r\n        wordBreak: 'break-word',\r\n        fontFamily:\r\n          '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',\r\n        fontSize: '14px',\r\n      },\r\n      left: {\r\n        borderTopRightRadius: radius,\r\n        borderBottomRightRadius: radius,\r\n        backgroundColor: palette.grey[100],\r\n      },\r\n      right: {\r\n        borderTopLeftRadius: radius,\r\n        borderBottomLeftRadius: radius,\r\n        backgroundColor: rightBgColor,\r\n        color: palette.common.white,\r\n      },\r\n      leftFirst: {\r\n        borderTopLeftRadius: radius,\r\n      },\r\n      leftLast: {\r\n        borderBottomLeftRadius: radius,\r\n      },\r\n      rightFirst: {\r\n        borderTopRightRadius: radius,\r\n      },\r\n      rightLast: {\r\n        borderBottomRightRadius: radius,\r\n      },\r\n    };\r\n  };\r\n","import React, { useState } from 'react';\r\nimport ChatMsg from './ChatMsg';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport {connect} from \"react-redux\";\r\nimport {sendMessage} from '../../../../store/actions/chat.actions';\r\nimport {toArray} from \"react-emoji-render\";\r\n\r\nconst useStyles = makeStyles({\r\n    chatContainer: {\r\n    },\r\n    textField: {\r\n        width: \"85%\",\r\n        marginRight: \"5px\",\r\n    },\r\n    chatSection: {\r\n        display: \"flex\",\r\n        justifyContent: \"space-between\",\r\n        alignItems: \"center\",\r\n    },\r\n    customizeIcon: {\r\n        border: '2px solid #E53935',\r\n        borderRadius: '50%',\r\n        color: '#E53935',\r\n        height: 35,\r\n        width: 35,\r\n        padding: 4,\r\n        cursor: 'pointer',\r\n        '&:hover': {\r\n            background: \"#E53935\",\r\n            color: 'white',\r\n         },\r\n    },\r\n});\r\n\r\nconst Chat = ({chatData, sendMessage, localPeer}) => {\r\n    const classes = useStyles('');\r\n    const [newMessage, setNewMessage] = useState('');\r\n\r\n    const handleChangeTexfield = (event) => {\r\n        setNewMessage(event.target.value)\r\n    };\r\n\r\n    const handleKeyPress = (event) => {\r\n        if(event.key === 'Enter' && newMessage.length > 0) {\r\n            send(event)\r\n        }\r\n    };\r\n\r\n    const send = (e) => {\r\n        e.preventDefault();\r\n        sendMessage(newMessage);\r\n        setNewMessage('');\r\n    };\r\n\r\n    const parseEmojis = value => {\r\n        const emojisArray = toArray(value);\r\n\r\n        // toArray outputs React elements for emojis and strings for other\r\n        const newValue = emojisArray.reduce((previous, current) => {\r\n          if (typeof current === \"string\") {\r\n            return previous + current;\r\n          }\r\n          return previous + current.props.children;\r\n        }, \"\");\r\n\r\n        return newValue;\r\n      };\r\n\r\n    //handle the chat feed to display all messages on the right position\r\n      const chatFeed = chatData.map((message, i) => message.peerId === localPeer.id\r\n          ? <ChatMsg key={i} side={'right'} messages={[parseEmojis(message.text)]}/>\r\n          : <ChatMsg key={i} avatar={''} messages={[parseEmojis(message.text)]}/>\r\n      );\r\n\r\n    return (\r\n        <div className={classes.chatContainer}>\r\n            {chatFeed}\r\n            <div className={classes.chatSection}>\r\n                <TextField\r\n                    variant=\"outlined\"\r\n                    size=\"small\"\r\n                    multiline\r\n                    fullWidth\r\n                    className={classes.textField}\r\n                    onChange={handleChangeTexfield}\r\n                    onKeyPress={handleKeyPress}\r\n                    value={parseEmojis(newMessage)}\r\n                />\r\n                <SendIcon className={classes.customizeIcon} onClick={send}/>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    chatData: state.chat,\r\n    localPeer: state.localUser.peer,\r\n});\r\n\r\nexport default connect(mapStateToProps, {sendMessage})(Chat);\r\n","import {ADD_NEW_MESSAGE} from '../actionTypes';\r\n\r\nexport const sendMessage = (text) => async (dispatch, getState) => {\r\n    const connections = Object.values(getState().connections.data);\r\n    const localPeer = getState().localUser.peer;\r\n\r\n    connections.forEach(connection => connection.send({textMessage: {\r\n        text: text,\r\n        peerId: localPeer.id\r\n    }}));\r\n\r\n    dispatch({\r\n        type: ADD_NEW_MESSAGE,\r\n        payload: {text: text, peerId: localPeer.id}\r\n    });\r\n};\r\n","import React, {useState} from 'react';\r\nimport {ThemeProvider, makeStyles} from '@material-ui/core/styles';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport theme from '../../../style/theme/MainTheme';\r\nimport Chat from './Chat/Chat';\r\n\r\nconst useStyles = makeStyles({\r\n    list: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        justifyContent: 'flex-end',\r\n        overflowY: 'auto',\r\n        WebkitFlex: '1 1 auto',\r\n        height: '100%',\r\n        width: 320,\r\n        padding: 10,\r\n    },\r\n    chatIcon: {\r\n        margin: '8px'\r\n    }\r\n});\r\n\r\nconst RoomSidebarChat = () => {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const toggleDrawer = (event) => {\r\n        if (event.type === 'keydown') {\r\n            return;\r\n        }\r\n        setOpen(!open);\r\n    };\r\n\r\n    const list = () => (\r\n        <div className={classes.list} role=\"presentation\">\r\n            <Chat/>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Button>\r\n                <ChatIcon onClick={toggleDrawer} color='primary' fontSize='large' className={classes.chatIcon}/>\r\n                <Drawer open={open} onClose={toggleDrawer} anchor={'right'}>\r\n                    {list()}\r\n                </Drawer>\r\n            </Button>\r\n        </ThemeProvider>\r\n    );\r\n};\r\n\r\nexport default RoomSidebarChat;\r\n","import React from 'react';\r\nimport {Box} from \"@material-ui/core\";\r\nimport RoomSidebarMenu from \"../RoomSidebarMenu/RoomSidebarMenu\";\r\nimport RoomSidebarChat from \"../RoomSidebarChat/RoomSidebarChat\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst RoomActionbar = () => {\r\n    return (\r\n        <>\r\n            <Box bgcolor={'wheat'} height={'10%'} display='flex' flexDirection='row' width={1} justifyContent={'center'}>\r\n                {/* space for some easy access actions like mute, enable camera, chat etc. */}\r\n                <RoomSidebarMenu />\r\n                <RoomSidebarChat />\r\n                <Link to={'/'}>Home</Link>\r\n            </Box>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default RoomActionbar;\r\n","import React, {useEffect} from 'react';\r\nimport {Box} from \"@material-ui/core\";\r\nimport RoomPluginContent from \"./RoomPluginContent/RoomPluginContent\";\r\nimport RoomMediaManager from \"./RoomMediaManager/RoomMediaManager\";\r\nimport {connect} from \"react-redux\";\r\nimport {joinRoom} from \"../../store/actions/connections.actions\";\r\nimport {initLocalUser} from \"../../store/actions/localUser.actions\";\r\nimport RoomActionbar from \"./RoomActionbar/RoomActionbar\";\r\nimport {roomExitCleanup} from '../../store/actions/room.actions';\r\n\r\nconst Room = ({socket, localPeer, match, history, initLocalUser, joinRoom, roomError, currentRoom, localPeerLoading, roomExitCleanup}) => {\r\n\r\n    useEffect(() => {\r\n        if (roomError) {\r\n            history.push(`/room-lobby/${match.params.roomId}`);\r\n        } else if (!localPeer && !localPeerLoading) {\r\n            initLocalUser();\r\n        } else if (localPeer && socket && !currentRoom.id) {\r\n            joinRoom(match.params.roomId, 'dummy123');\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [localPeer, roomError, socket]);\r\n\r\n    useEffect(() => {\r\n        // unmount\r\n        return () => roomExitCleanup();\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <Box display='flex' flexDirection='column' width={1} height={'100%'} justifyContent={'space-between'} >\r\n                <Box display='flex' flexDirection='row' width={1} height={'90%'} justifyContent={'space-between'}>\r\n                    <RoomPluginContent/>\r\n                    <RoomMediaManager />\r\n                </Box>\r\n                <RoomActionbar />\r\n            </Box>\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    const localPeer = state.localUser.peer;\r\n    return {\r\n        socket: state.localUser.socket,\r\n        localPeer: localPeer,\r\n        localPeerLoading: state.localUser.loading,\r\n        roomError: state.room.error,\r\n        currentRoom: state.room.data\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, {initLocalUser, joinRoom, roomExitCleanup})(Room);\r\n","import React from 'react';\r\nimport {makeStyles} from '@material-ui/core/styles';\r\nimport AssessmentOutlinedIcon from '@material-ui/icons/AssessmentOutlined';\r\nimport CallOutlinedIcon from '@material-ui/icons/CallOutlined';\r\nimport ToysOutlinedIcon from '@material-ui/icons/ToysOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport {useMediaQuery} from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n    container: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        width: 314,\r\n        height: 400,\r\n        border: 'solid 1px lightgrey',\r\n        backgroundColor: 'white'\r\n    },\r\n    smallScreenContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        width: 314,\r\n        height: 400,\r\n        border: 'solid 1px lightgrey',\r\n        backgroundColor: 'white',\r\n        margin: 8,\r\n    },\r\n    alignTitle: {\r\n        display: 'flex',\r\n        margin: 24\r\n    },\r\n    customizeTitle: {\r\n        fontWeight: 'bold',\r\n        marginLeft: 4\r\n    },\r\n    customizeIcon: {\r\n        marginRight: 4\r\n    },\r\n    customizeText: {\r\n        paddingLeft: 16,\r\n        paddingRight: 16,\r\n        marginBottom: 16\r\n    }\r\n});\r\n\r\nconst BulletPoint = (props) => {\r\n    const classes = useStyles();\r\n    const smallScreen = useMediaQuery(\"(max-width: 950px)\");\r\n\r\n    const checkIcons = (icon) => {\r\n        if(icon === 'ToysOutlinedIcon') {\r\n            return <ToysOutlinedIcon fontSize='large' className={classes.customizeIcon}/>\r\n        } else if(icon === 'AssessmentOutlinedIcon') {\r\n            return <AssessmentOutlinedIcon fontSize='large' className={classes.customizeIcon}/>\r\n        } else if(icon === 'CallOutlinedIcon') {\r\n            return <CallOutlinedIcon fontSize='large' className={classes.customizeIcon}/>\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={smallScreen ? classes.smallScreenContainer : classes.container}>\r\n            <div className={classes.alignTitle}>\r\n                {checkIcons(props.content.icon)}\r\n                <Typography variant='h5' className={classes.customizeTitle}>{props.content.title}</Typography>\r\n            </div>\r\n            <Typography className={classes.customizeText} align='center'>{props.content.text}</Typography>\r\n            <img src={props.content.image} height='181' width='275' alt='icon' />\r\n        </div>\r\n    )\r\n};\r\nexport default BulletPoint;\r\n","import React from 'react';\r\nimport {ThemeProvider, makeStyles} from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport theme from '../../style/theme/MainTheme';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport {Link} from \"react-router-dom\";\r\nimport BulletPoint from \"./BulletPoint/BulletPoint\";\r\nimport {useMediaQuery} from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles({\r\n    box: {\r\n        display: 'flex',\r\n        width: '100%',\r\n        height: '100%',\r\n        justifyContent: 'center'\r\n    },\r\n    smallScreenBox: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        width: '100%',\r\n        height: '100%',\r\n        alignItems: 'center'\r\n    },\r\n    titleContainer: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        width: '30%',\r\n        minWidth: 310,\r\n    },\r\n    titleStyle: {\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        marginTop: '98px'\r\n    },\r\n    buttonStyle: {\r\n        borderRadius: '5px',\r\n        width: '106px',\r\n        fontWeight: 'bold',\r\n        color: 'white',\r\n        backgroundColor: '#FBC02D',\r\n        '&:hover': {\r\n            backgroundColor: '#f9a825',\r\n        },\r\n        '&:focus': {\r\n            outline: 0,\r\n        }\r\n    },\r\n    mainImg: {\r\n        display: 'flex',\r\n        height: 224,\r\n        width: 309,\r\n        borderRadius: 5,\r\n        marginTop: 76,\r\n        marginLeft: 36,\r\n        marginRight: 36,\r\n    },\r\n    smallScreenMainImg: {\r\n        display: 'flex',\r\n        height: 224,\r\n        width: 309,\r\n        borderRadius: 5,\r\n        margin: 36,\r\n    },\r\n    bulletPoints: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        zIndex: '3',\r\n        position: 'relative',\r\n        bottom: 150,\r\n    },\r\n    smallScreenBulletPoints: {\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        marginTop: 72,\r\n    }\r\n});\r\n\r\nconst Home = () => {\r\n    const classes = useStyles();\r\n    const smallScreen = useMediaQuery(\"(max-width: 950px)\");\r\n    const bulletPoints = [\r\n        {\r\n            title: 'Gaming',\r\n            icon: 'ToysOutlinedIcon',\r\n            image: 'https://image.freepik.com/free-vector/realistic-radiant-magic-portals-pink-vs-blue-with-light-effects-black-background-illustration_1284-31390.jpg',\r\n            text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nec urna dolor. Maecenas vehicula dui ut quam imperdiet.',\r\n        },\r\n        {\r\n            title: 'Working',\r\n            icon: 'AssessmentOutlinedIcon',\r\n            image: 'https://image.freepik.com/free-vector/teamwork-concept-illustration_1284-20522.jpg',\r\n            text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nec urna dolor. Maecenas vehicula dui ut quam imperdiet.',\r\n        },\r\n        {\r\n            title: 'Chatting',\r\n            icon: 'CallOutlinedIcon',\r\n            image: 'https://image.freepik.com/free-vector/group-chat-concept-illustration_114360-1495.jpg',\r\n            text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nec urna dolor. Maecenas vehicula dui ut quam imperdiet.',\r\n        }\r\n    ];\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            {/* Header */}\r\n            <Box height={63} bgcolor='#2E7D32'> </Box>\r\n\r\n            {/* Body */}\r\n            <Box height={540} display='flex' zIndex={1}>\r\n                <Box className={smallScreen ? classes.smallScreenBox : classes.box} bgcolor= '#388E3C'>\r\n                    <div className={classes.titleContainer}>\r\n                    <Typography variant='h3' className={classes.titleStyle} gutterBottom align='center'>\r\n                        Create now a room and have fun\r\n                    </Typography>\r\n                    <Link to=\"/create-room\" style={{textDecoration: 'none'}}>\r\n                        <Button size=\"large\" className={classes.buttonStyle}>Create</Button>\r\n                    </Link>\r\n                    </div>\r\n                    <img\r\n                        src=\"https://www.zohowebstatic.com/sites/default/files/cliq-primetime-features.jpg\"\r\n                        className={smallScreen ? classes.smallScreenMainImg : classes.mainImg}\r\n                        alt={'quackamole room preview'}\r\n                    />\r\n                </Box>\r\n            </Box>\r\n\r\n            {/* Bullet Points */}\r\n            <div className={smallScreen?classes.smallScreenBulletPoints:classes.bulletPoints}>\r\n                {bulletPoints.map((data, i) => <BulletPoint content={data} key={data.title + i}> </BulletPoint>)}\r\n            </div>\r\n\r\n            {/*Temporary for debugging purposes*/}\r\n            <Link to={'/rooms/dummy-room-id'}>Test room</Link>\r\n        </ThemeProvider>\r\n    )\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport { ThemeProvider, makeStyles } from '@material-ui/core/styles';\r\nimport theme from '../../style/theme/MainTheme';\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\nimport {API_BASE_URL, SSL_ENABLED, FRONTEND_URL, PORT_SOCKET, IS_LOCALHOST} from '../../constants';\r\nimport {isIpAddress} from \"../../utils\";\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nconst useStyles = makeStyles({\r\n    containerStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        paddingTop: '128px'\r\n    },\r\n    titleStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: '16px',\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        backgroundColor: '#388E3C',\r\n        width: '100%'\r\n    },\r\n    formControl: {\r\n        width: '20%',\r\n        margin: '16px'\r\n    },\r\n    select: {\r\n        borderColor: '#FB8C00',\r\n        '&:before': {\r\n            borderColor: '#FB8C00',\r\n        },\r\n        '&:after': {\r\n            borderColor: '#f57c00',\r\n        }\r\n    },\r\n    textfield: {\r\n        width: '90%',\r\n        marginTop: '48px',\r\n    },\r\n    textfieldLink: {\r\n        width: '90%',\r\n        marginRight: '16px',\r\n        marginLeft: '16px',\r\n    },\r\n    alignButton: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n        width: '100%',\r\n        margin: '16px',\r\n    },\r\n    myButton: {\r\n        color: 'white',\r\n        boxShadow: 'none',\r\n        margin: '16px',\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(2),\r\n        textAlign: 'center',\r\n        color: theme.palette.text.secondary,\r\n      },\r\n    copyLink: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginTop: '16px',\r\n        width: '90%'\r\n    },\r\n    nextButton: {\r\n        color: 'white',\r\n        boxShadow: 'none',\r\n        marginBottom: '16px',\r\n        width: '100%'\r\n    },\r\n    subtitle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        margin: '16px'\r\n    }\r\n});\r\n\r\nconst RoomCreateForm = () => {\r\n    const [name, setName] = React.useState('');\r\n    const [link, setLink] = React.useState('');\r\n    const [roomId, setRoomId] = React.useState('');\r\n    const [active, setActive ] = React.useState(true);\r\n    const classes = useStyles();\r\n\r\n    const handleChangeTexfield = (event) => {\r\n        setName(event.target.value)\r\n    };\r\n\r\n    const createRoom = () => {\r\n        let data = {\r\n            name: name,\r\n            password: 'Test123.',\r\n            maxUsers: 4\r\n        };\r\n\r\n        if(name.length > 0) {\r\n            const protocol = SSL_ENABLED ? 'https':'http';\r\n            fetch(`${protocol}://${API_BASE_URL}:${PORT_SOCKET}/api/rooms`, {\r\n                method: 'post',\r\n                body: JSON.stringify(data),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                  },\r\n            }).then(response => response.json()\r\n            ).then( data => {\r\n                const port = isIpAddress(FRONTEND_URL) || IS_LOCALHOST ? ':3000' : '';\r\n                setLink(`${protocol}://${FRONTEND_URL}${port}/#/room-lobby/${data}`);\r\n                setRoomId(data);\r\n                setActive(false);\r\n            });\r\n        } else {\r\n            console.log('error')\r\n        }\r\n    };\r\n\r\n    const createRoomComponent =\r\n        <Box display='flex' flexDirection='column' alignItems='center' width={'100%'} borderRadius='5px' bgcolor='white'>\r\n            <Typography variant='h4' className={classes.titleStyle}>Create a new room</Typography>\r\n            <TextField\r\n                required\r\n                id=\"outlined-required\"\r\n                label=\"Room name\"\r\n                variant=\"outlined\"\r\n                value={name}\r\n                onChange={handleChangeTexfield}\r\n                className={classes.textfield}\r\n            />\r\n            <div className={classes.alignButton}>\r\n                <Button\r\n                    size=\"large\"\r\n                    color=\"secondary\"\r\n                    variant=\"contained\"\r\n                    className={classes.myButton}\r\n                    onClick={createRoom}\r\n                >\r\n                    create\r\n                </Button>\r\n            </div>\r\n        </Box>;\r\n\r\n\r\n    const shareRoomComponent =\r\n            <Box\r\n                display='flex'\r\n                flexDirection='column'\r\n                alignItems='center'\r\n                width={'100%'}\r\n                borderRadius='5px'\r\n                bgcolor='white'\r\n            >\r\n                <Typography variant='h4' className={classes.titleStyle}>Room was created</Typography>\r\n                <div className={classes.copyLink}>\r\n                    <TextField variant=\"outlined\" value={link} onChange={handleChangeTexfield} className={classes.textfieldLink}/>\r\n                    <Button size=\"large\" color=\"secondary\" variant=\"contained\" className={classes.myButton} onClick={() => {navigator.clipboard.writeText(link)}}>\r\n                        copy\r\n                    </Button>\r\n                </div>\r\n                <Typography variant='h6' align='center' className={classes.subtitle}>\r\n                    Share your link and invite someone to your room\r\n                </Typography>\r\n\r\n                <Link to={`/room-lobby/${roomId}`} style={{ textDecoration: 'none', width: '80%'}}>\r\n                <Button\r\n                    size=\"large\"\r\n                    color=\"secondary\"\r\n                    variant=\"contained\"\r\n                    className={classes.nextButton}\r\n                    to={`/room-lobby/${roomId}`}\r\n                >\r\n                    next\r\n                </Button>\r\n                </Link>\r\n           </Box>;\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            {/* Header */}\r\n            <Box\r\n                display='flex'\r\n                height={63}\r\n                bgcolor='#2E7D32'\r\n                alignItems='center'\r\n                paddingLeft='36px'\r\n            >\r\n               <Link to=\"/\" style={{ textDecoration: 'none', color: 'white'}}>\r\n                    <ArrowBackIosIcon/>\r\n               </Link>\r\n            </Box>\r\n\r\n            {/* Body */}\r\n            <Grid container className={classes.containerStyle}>\r\n                <Grid item xs={11} md={6} lg={5}>\r\n                   {active ? createRoomComponent : shareRoomComponent}\r\n                </Grid>\r\n            </Grid>\r\n        </ThemeProvider>\r\n    )\r\n};\r\n\r\nexport default RoomCreateForm;\r\n","import React from 'react';\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport RoomLobby from \"../RoomLobby/RoomLobby\";\r\nimport Room from \"../Room/Room\";\r\nimport Home from \"../Home/Home\";\r\nimport RoomCreateForm from \"../RoomCreateForm/RoomCreateForm\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\nconst App = () => {\r\n    return (\r\n        <CssBaseline>\r\n            <Router>\r\n                <Switch>\r\n                    <Route exact path='/' component={Home} />\r\n                    <Route exact path='/create-room' component={RoomCreateForm} />\r\n                    <Route exact path='/room-lobby/:roomId' component={RoomLobby} />\r\n                    <Route path='/rooms/:roomId' component={Room} />\r\n                </Switch>\r\n            </Router>\r\n        </CssBaseline>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport './index.scss';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\nimport App from './components/App/App';\r\n\r\nReactDOM.render(\r\n  <>\r\n      <Provider store={store}>\r\n          <App />\r\n      </Provider>\r\n  </>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}