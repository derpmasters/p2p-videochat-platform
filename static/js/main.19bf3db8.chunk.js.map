{"version":3,"sources":["../node_modules/peerjs/dist sync","store/reducers/localUser.reducer.js","store/actionTypes.js","store/reducers/peers.reducer.js","store/reducers/connections.reducer.js","store/reducers/calls.reducer.js","utils.js","store/reducers/streams.reducer.js","store/reducers/index.js","store/index.js","style/theme/MainTheme.jsx","components/RoomLobby/RoomLobby.jsx","components/Room/RoomPluginContent/RoomPluginContent.jsx","components/Room/GenericMediaCard/GenericMediaCard.jsx","store/actions/streams.actions.js","store/actions/calls.actions.js","components/Room/RoomMediaManager/RemoteMediaCard/RemoteMediaCard.jsx","components/Room/RoomMediaManager/RemoteMediaManager/RemoteMediaManager.jsx","components/Room/RoomMediaManager/RoomMediaManager.jsx","store/actions/connections.actions.js","store/actions/localUser.actions.js","components/Room/RoomSidebarMenu/RoomSidebarMenu.jsx","components/Room/RoomSidebarChat/RoomSidebarChat.jsx","components/Room/RoomActionbar/RoomActionbar.jsx","components/Room/Room.jsx","constants.js","components/Home/Home.jsx","components/RoomCreateForm/RoomCreateForm.jsx","components/App/App.jsx","index.jsx"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","initialState","peer","socket","metadata","nickname","error","localUserReducer","localPeer","action","type","payload","data","peersReducer","peers","newData","connectionsReducer","connections","connection","callsReducer","calls","call","peerId","clearStreamTracks","stream","getTracks","forEach","track","stop","streamsReducer","streams","Object","values","reducer","combineReducers","localUser","store","createStore","composeWithDevTools","applyMiddleware","thunk","theme","createMuiTheme","palette","primary","main","secondary","useStyles","makeStyles","containerStyle","display","justifyContent","paddingTop","titleStyle","padding","color","fontWeight","backgroundColor","nicknameStyle","width","margin","textfieldLink","marginRight","marginLeft","nextButton","boxShadow","alignbutton","marginTop","RoomLobby","match","React","useState","name","setName","params","roomId","link","setLink","classes","ThemeProvider","Box","height","bgcolor","alignItems","paddingLeft","to","style","textDecoration","Container","className","flexDirection","borderRadius","Typography","variant","TextField","required","label","value","onChange","target","Button","size","RoomPluginContent","flexGrow","src","root","cardWrapper","marginBottom","media","objectFit","GenericMediaCard","muted","user","videoRef","useRef","useEffect","current","srcObject","oncanplay","play","setVideoSrc","Card","ref","addStream","dispatch","getState","startLocalStream","options","video","audio","a","navigator","mediaDevices","getUserMedia","mediaStream","window","localStream","console","addCall","initCallListeners","on","remoteMediaStream","connect","state","ownProps","remotePeerId","remoteStream","CircularProgress","map","key","connectionId","roomMediaManager","localPeerMetadata","minWidth","addConnection","initConnectionListeners","removeConnection","parsedData","JSON","parse","textMessage","log","author","text","pluginData","connectWithPeer","callConnection","initLocalUserPeerListeners","answer","list","menuIcon","RoomSidebarMenu","open","setOpen","toggleDrawer","event","onClick","fontSize","Drawer","onClose","anchor","role","List","index","ListItem","button","ListItemIcon","ListItemText","Divider","chatIcon","RoomSidebarChat","RoomActionbar","initLocalUser","queryParams","io","process","secure","query","object","entries","join","socketId","customPeerId","Peer","host","port","path","config","iceServers","url","joinRoom","password","emit","room","joinedUsers","clearAllStreams","disconnect","conn","close","buttonStyle","border","outline","Home","gutterBottom","formControl","select","borderColor","textfield","alignButton","myButton","paper","spacing","textAlign","copyLink","subtitle","RoomCreateForm","status","setStatus","setRoomId","active","setActive","handleChangeTexfield","FormControl","InputLabel","Select","labelId","MenuItem","maxUsers","length","fetch","method","body","stringify","headers","then","response","json","clipboard","writeText","App","CssBaseline","exact","component","Room","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.19bf3db8.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 151;","import {INIT_LOCAL_USER_SOCKET, INIT_LOCAL_USER_PEER, SET_LOCAL_USER_METADATA, SET_LOCAL_USER_ERROR} from '../actionTypes';\r\n\r\nconst initialState = {\r\n    peer: null,\r\n    socket: null,\r\n    metadata: { nickname: 'Andi'},\r\n    error: null\r\n};\r\n\r\nconst localUserReducer = (localPeer = initialState, action) => {\r\n    switch (action.type) {\r\n        case INIT_LOCAL_USER_SOCKET: {\r\n            return {...localPeer, socket: action.payload.socket, error: null};\r\n        }\r\n        case INIT_LOCAL_USER_PEER: {\r\n            return {...localPeer, peer: action.payload.peer, error: null};\r\n        }\r\n        case SET_LOCAL_USER_METADATA: {\r\n            return {...localPeer, metadata: action.payload.metadata, error: null};\r\n        }\r\n        case SET_LOCAL_USER_ERROR: {\r\n            return {...localPeer, error: action.payload.error}\r\n        }\r\n        default: {\r\n            return localPeer;\r\n        }\r\n    }\r\n};\r\n\r\nexport default localUserReducer;\r\n\r\n","export const ADD_PEER = 'ADD_PEER';\r\nexport const REMOVE_PEER = 'REMOVE_PEER';\r\nexport const SET_PEERS_ERROR = 'SET_PEERS_ERROR';\r\n\r\nexport const ADD_CONNECTION = 'ADD_CONNECTION';\r\nexport const REMOVE_CONNECTION = 'REMOVE_CONNECTION';\r\nexport const SET_CONNECTIONS_ERROR = 'SET_CONNECTIONS_ERROR';\r\n\r\nexport const ADD_CALL = 'ADD_CALL';\r\nexport const REMOVE_CALL = 'REMOVE_CALL';\r\nexport const SET_CALLS_ERROR = 'SET_CALLS_ERROR';\r\n\r\nexport const ADD_STREAM = 'ADD_STREAM';\r\nexport const REMOVE_STREAM = 'REMOVE_STREAM';\r\nexport const SET_STREAMS_ERROR = 'SET_STREAM_ERROR';\r\nexport const CLEAR_ALL_STREAMS = 'CLEAR_ALL_STREAMS';\r\n\r\nexport const SET_CURRENT_ROOM = 'SET_CURRENT_ROOM';\r\nexport const SET_CURRENT_ROOM_ERROR = 'SET_CURRENT_ROOM_ERROR';\r\n\r\nexport const INIT_LOCAL_USER_SOCKET = 'INIT_LOCAL_USER_SOCKET';\r\nexport const INIT_LOCAL_USER_PEER = 'INIT_LOCAL_USER_PEER';\r\nexport const SET_LOCAL_USER_METADATA = 'SET_LOCAL_USER_METADATA';\r\nexport const SET_LOCAL_USER_ERROR = 'SET_LOCAL_USER_ERROR';\r\n","import {\r\n    ADD_PEER,\r\n    REMOVE_PEER,\r\n    SET_PEERS_ERROR,\r\n    ADD_CONNECTION,\r\n    REMOVE_CONNECTION,\r\n    ADD_CALL,\r\n    REMOVE_CALL,\r\n} from '../actionTypes';\r\n\r\nconst initialState = {\r\n    data: {\r\n        // 'd7f7saim3': {nickname: 'Andi', peerId: 'dscdsv-csdvsdv-dvewvew-btrbrb3', connection: 'efewfgrger', call: 'fewfewfwef'},\r\n        // '32mfdnmio': {nickname: 'Jimmy', peerId: 'ztjzt-ckhjgvv-dvewvew-b3cddrv', connection: 'vverberberb', call: 'vewrverbe'}\r\n    },\r\n    error: null\r\n};\r\n\r\nconst peersReducer = (peers = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_PEER: {\r\n            const peer = action.payload.peer;\r\n            return {data: {...peers.data, [peer.id]: peer}, error: null};\r\n        }\r\n        case REMOVE_PEER: {\r\n            const newData = {...peers.data};\r\n            const peer = action.payload.peer;\r\n            delete newData[peer.id];\r\n            return {data: newData, error: null};\r\n        }\r\n        case SET_PEERS_ERROR: {\r\n            return {...peers, error: action.payload.error};\r\n        }\r\n        case ADD_CONNECTION: {\r\n            return peers;\r\n        }\r\n        case REMOVE_CONNECTION: {\r\n            return peers;\r\n        }\r\n        case ADD_CALL: {\r\n            return peers;\r\n        }\r\n        case REMOVE_CALL: {\r\n            return peers;\r\n        }\r\n        default: {\r\n            return peers;\r\n        }\r\n    }\r\n};\r\n\r\nexport default peersReducer;\r\n\r\n","import {ADD_CONNECTION, REMOVE_CONNECTION, SET_CONNECTIONS_ERROR} from '../actionTypes';\r\n\r\nconst initialState = {\r\n    data: {},\r\n    error: null\r\n};\r\n\r\nconst connectionsReducer = (connections = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_CONNECTION: {\r\n            const connection = action.payload.connection;\r\n            return {data: {...connections.data, [connection.peer]: connection}, error: null};\r\n        }\r\n        case REMOVE_CONNECTION: {\r\n            const newData = {...connections.data};\r\n            const connection = action.payload.connection;\r\n            delete newData[connection.peer];\r\n            return {data: newData, error: null};\r\n        }\r\n        case SET_CONNECTIONS_ERROR: {\r\n            return {...connections, error: action.payload.error};\r\n        }\r\n        default: {\r\n            return connections;\r\n        }\r\n    }\r\n};\r\n\r\nexport default connectionsReducer;\r\n\r\n","import {ADD_CALL, REMOVE_CALL, REMOVE_CONNECTION, SET_CALLS_ERROR} from '../actionTypes';\r\n\r\nconst initialState = {\r\n    data: {},\r\n    error: null\r\n};\r\n\r\nconst callsReducer = (calls = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_CALL: {\r\n            const call = action.payload.call;\r\n            return {data: {...calls.data, [call.peer]: call}, error: null};\r\n        }\r\n        case REMOVE_CALL: {\r\n            const newData = {...calls.data};\r\n            const call = action.payload.call;\r\n            delete newData[call.id];\r\n            return {data: newData, error: null};\r\n        }\r\n        case REMOVE_CONNECTION: {\r\n            const peerId = action.payload.connection.peer;\r\n            const call = calls.data[peerId];\r\n\r\n            if (call) {\r\n                const newData = {...calls.data};\r\n                delete newData[peerId];\r\n                return {...calls, data: newData, error: null};\r\n            } else {\r\n                return calls;\r\n            }\r\n        }\r\n        case SET_CALLS_ERROR: {\r\n            return {...calls, error: action.payload.error};\r\n        }\r\n        default: {\r\n            return calls;\r\n        }\r\n    }\r\n};\r\n\r\nexport default callsReducer;\r\n\r\n","// The place to put all helper methods that do not necessarily belong to a specific component\r\n// Once this file gets too crowded, create an utils folder and start seperating the exported helper methods\r\n\r\nimport {useEffect, useRef, useState} from \"react\";\r\n\r\n/**\r\n * Transforms a javascript object into a query string.\r\n * @param object The source object. Example: {a: 5, b: 10}\r\n * @returns {string} The resulting query string. Example 'a=5&b=10'\r\n */\r\nexport const serializeQueryString = object => {\r\n    return Object.entries(object).map(([key, value]) => `${key}=${value}`).join('&');\r\n};\r\n\r\n/**\r\n * Set the src of a html5 <video> element and start playing\r\n * @param videoRef The reference to the video element\r\n * @param stream The stream that should be played by the referenced video element\r\n * @param muted Whether or not the audio of the stream should be muted\r\n */\r\nexport const setVideoSrc = (videoRef, stream, muted= true) => {\r\n    if (videoRef.current && stream) {\r\n        videoRef.current.srcObject = stream;\r\n        videoRef.current.oncanplay = () => {\r\n            videoRef.current.play();\r\n            videoRef.current.muted = muted;\r\n        };\r\n    }\r\n};\r\n\r\n// untested prototype for a hook that might replace setVideoSrc(). Right now there is no benefit of using it. Rethink design\r\nexport const useStream = (muted = false) => {\r\n    const videoRef = useRef(null);\r\n    const [stream, setStream] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (videoRef.current && stream) {\r\n            videoRef.current.srcObject = stream;\r\n            videoRef.current.oncanplay = () => {\r\n                videoRef.current.play();\r\n                videoRef.current.muted = muted;\r\n            };\r\n        }\r\n    }, [stream, videoRef, muted]);\r\n\r\n    return [videoRef, setStream];\r\n};\r\n\r\nexport const clearStreamTracks = stream => {\r\n    if (stream) {\r\n        stream.getTracks().forEach(track => track.stop());\r\n    }\r\n};\r\n\r\n","import {ADD_STREAM, REMOVE_STREAM, REMOVE_CONNECTION, SET_STREAMS_ERROR, CLEAR_ALL_STREAMS} from '../actionTypes';\r\nimport {clearStreamTracks} from \"../../utils\";\r\n\r\nconst initialState = {\r\n    data: {},\r\n    error: null\r\n};\r\n\r\nconst streamsReducer = (streams = initialState, action) => {\r\n    switch (action.type) {\r\n        case ADD_STREAM: {\r\n            const {peerId, stream} = action.payload;\r\n            return {data: {...streams.data, [peerId]: stream}, error: null};\r\n        }\r\n        case REMOVE_STREAM: {\r\n            const newData = {...streams.data};\r\n            const peerId = action.payload.peerId;\r\n            const stream = newData[peerId];\r\n            clearStreamTracks(stream);\r\n            delete newData[peerId];\r\n            return {data: newData, error: null};\r\n        }\r\n        case SET_STREAMS_ERROR: {\r\n            return {...streams, error: action.payload.error};\r\n        }\r\n        case CLEAR_ALL_STREAMS: {\r\n            Object.values(streams.data).forEach(clearStreamTracks);\r\n            return {...streams, data: {}, error: null};\r\n        }\r\n        // case REMOVE_CONNECTION: {\r\n        //     const newData = {...streams.data};\r\n        //     const peerId = action.payload.connection.peer;\r\n        //     const stream = newData[peerId]\r\n        //     clearStreamTracks(stream);\r\n        //     delete newData[peerId];\r\n        //     return {data: newData, error: null};\r\n        // }\r\n        default: {\r\n            return streams;\r\n        }\r\n    }\r\n};\r\n\r\nexport default streamsReducer;\r\n","import { combineReducers } from 'redux';\r\nimport roomReducer from './room.reducer';\r\nimport localUserReducer from \"./localUser.reducer\";\r\nimport peersReducer from './peers.reducer';\r\nimport connectionsReducer from './connections.reducer';\r\nimport callsReducer from './calls.reducer';\r\nimport streamsReducer from \"./streams.reducer\";\r\n\r\nconst reducer = combineReducers({\r\n    // room: roomReducer,\r\n    localUser: localUserReducer,\r\n    peers: peersReducer,\r\n    calls: callsReducer,\r\n    connections: connectionsReducer,\r\n    streams: streamsReducer\r\n});\r\n\r\nexport default reducer;\r\n","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            main: '#E53935'\r\n        },\r\n        secondary: {\r\n            main: '#FB8C00'\r\n        }\r\n    }\r\n})\r\n\r\nexport default theme","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport { ThemeProvider, makeStyles } from '@material-ui/core/styles';\r\nimport theme from '../../style/theme/MainTheme';\r\nimport Box from '@material-ui/core/Box';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\n\r\nconst useStyles = makeStyles ({\r\n    containerStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        paddingTop: '128px'\r\n    },\r\n    titleStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: '16px',\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        backgroundColor: '#FB8C00',\r\n    },\r\n    nicknameStyle: {\r\n        width: '616px',\r\n        margin: '16px',\r\n    },\r\n    textfieldLink: {\r\n        width: '616px',\r\n        marginRight: '16px',\r\n        marginLeft: '16px',\r\n    },\r\n    nextButton: {\r\n        color: 'white',\r\n        boxShadow: 'none',\r\n        width: '422px',\r\n\r\n    },\r\n    alignbutton: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        marginTop: '24px',\r\n    }\r\n});\r\n\r\nconst RoomLobby = ({match}) => {\r\n    const [name, setName] = React.useState('');\r\n    const [link, setLink] = React.useState(match.params.roomId);\r\n    const classes = useStyles();\r\n\r\n    const handleChangeName = (e) => {\r\n        setName(e.target.value)\r\n    };\r\n\r\n    const handleChangeLink = (e) => {\r\n        setLink(e.target.value)\r\n    };\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Box \r\n            display='flex'\r\n            height={63}\r\n            bgcolor='#E53935'\r\n            alignItems='center'\r\n            paddingLeft='36px'\r\n            >\r\n                <Link to=\"/\" style={{ textDecoration: 'none', color: 'white'}}>\r\n                        <ArrowBackIosIcon/>\r\n                </Link> \r\n            </Box>\r\n            <Container\r\n                className={classes.containerStyle}\r\n            >\r\n                <Box\r\n                display='flex'\r\n                flexDirection='column'\r\n                width={648}\r\n                height={307}\r\n                borderRadius='5px'\r\n                bgcolor='white'\r\n                >\r\n                <Typography\r\n                    variant='h4'\r\n                    className={classes.titleStyle}\r\n                >Enter the rooom\r\n                </Typography>\r\n                \r\n                <TextField\r\n                    required\r\n                    id=\"outlined-required\"\r\n                    label=\"Nickname\"\r\n                    variant=\"outlined\"\r\n                    value={name}\r\n                    className={classes.nicknameStyle}\r\n                    onChange={handleChangeName}\r\n                 />\r\n                <TextField\r\n                    required\r\n                    id=\"outlined-required\"\r\n                    label=\"Room ID\"\r\n                    variant=\"outlined\"\r\n                    value={link}\r\n                    className={classes.textfieldLink}\r\n                    onChange={handleChangeLink}\r\n                 />\r\n                 <div className={classes.alignbutton}>\r\n                 <Link to={`/rooms/${match.params.roomId}`} style={{ textDecoration: 'none',}}>\r\n                    <Button\r\n                        size=\"large\"\r\n                        color=\"secondary\"\r\n                        variant=\"contained\"\r\n                        className={classes.nextButton}                     \r\n                    >\r\n                            join\r\n                    </Button>\r\n                </Link>\r\n                </div>\r\n                </Box>\r\n            </Container>\r\n        </ThemeProvider>\r\n    )\r\n};\r\n\r\nexport default RoomLobby;\r\n","import React from 'react';\r\nimport {Box} from \"@material-ui/core\";\r\n\r\nconst RoomPluginContent = () => {\r\n\r\n    return (\r\n        <Box bgcolor='salmon' flexGrow={1}>\r\n            {/* Example game, not a real plugin, just to show how plugins will be rendered. */}\r\n            <iframe src=\"https://andreas-schoch.github.io/breakout-game/\" style={{width: '100%', height: '100%'}} />\r\n\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default RoomPluginContent;\r\n","import React, {useEffect, useRef} from 'react';\r\nimport {Card, makeStyles} from \"@material-ui/core\";\r\nimport {setVideoSrc} from \"../../../utils\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        display: 'flex',\r\n    },\r\n    cardWrapper: {\r\n        marginBottom: '5px',\r\n    },\r\n    media: {\r\n        width: '100%',\r\n        height: '120px',\r\n        objectFit: 'cover'\r\n    }\r\n}));\r\n\r\nconst GenericMediaCard = ({stream, muted = false, user}) => {\r\n    const classes = useStyles();\r\n    const videoRef = useRef(null);\r\n    const {nickname, peerId} = user;\r\n\r\n    useEffect(() => {\r\n        setVideoSrc(videoRef, stream, muted);\r\n    }, [stream]);\r\n\r\n    return (\r\n        <Card className={classes.cardWrapper}>\r\n            <video ref={videoRef} className={classes.media}/>\r\n            {nickname}\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default GenericMediaCard;\r\n","import {ADD_STREAM, CLEAR_ALL_STREAMS} from \"../actionTypes\";\r\n\r\nexport const addStream = (peerId, stream) => (dispatch, getState) => {\r\n    if (stream) {\r\n        dispatch({type: ADD_STREAM, payload: {peerId, stream}});\r\n    }\r\n};\r\n\r\nexport const startLocalStream = (peer, options = {video: true, audio: true}) => async (dispatch, getState) => {\r\n    const localPeer = peer || getState().localUser.peer;\r\n    try {\r\n        let mediaStream = await navigator.mediaDevices.getUserMedia(options);\r\n        dispatch(addStream(localPeer.id, mediaStream));\r\n        window.localStream = mediaStream; // kind of hacky to stop the tracks on unmount\r\n        return mediaStream;\r\n    } catch (error) {\r\n        console.error('local stream couldnt be started via \"startStream()\"', error);\r\n    }\r\n};\r\nexport const clearAllStreams = () => async (dispatch, getState) => {\r\n        dispatch({type: CLEAR_ALL_STREAMS});\r\n\r\n};\r\n","import {ADD_CALL, REMOVE_CALL} from \"../actionTypes\";\r\nimport {startLocalStream, addStream} from \"./streams.actions\";\r\n\r\nexport const addCall = call => (dispatch, getState) => {\r\n    if (call) {\r\n        dispatch({type: ADD_CALL, payload: {call}});\r\n        dispatch(initCallListeners(call));\r\n    }\r\n};\r\n\r\nexport const removeCall = call => (dispatch, getState) => {\r\n    if (call) {\r\n        dispatch({\r\n            type: REMOVE_CALL,\r\n            payload: {call}\r\n        });\r\n    }\r\n};\r\n\r\nexport const initCallListeners = call => (dispatch, getState) => {\r\n    if (call) {\r\n        call.on('stream', remoteMediaStream => {\r\n            dispatch(addStream(call.peer, remoteMediaStream));\r\n        });\r\n    }\r\n};\r\n\r\nexport const callConnection = connection => async (dispatch, getState) => {\r\n    const {peer} = getState().localUser;\r\n    const localStream = getState().streams.data[peer.id] || await dispatch(startLocalStream(peer));\r\n\r\n    const call = await peer.call(connection.peer, localStream);\r\n    dispatch(addCall(call));\r\n};\r\n\r\nexport const callReplaceStreamTrack = (remotePeerId, options) => async (dispatch, getState) => {\r\n    const call = getState().calls.data[remotePeerId];\r\n    const {peer} = getState().localUser;\r\n    const localStream = await dispatch(startLocalStream(peer, options));\r\n\r\n    call.peerConnection.getSenders()[0].replaceTrack(localStream);\r\n\r\n    dispatch(addCall(call));\r\n};\r\n","import React, {useEffect} from 'react';\r\nimport {CircularProgress} from \"@material-ui/core\";\r\nimport GenericMediaCard from \"../../GenericMediaCard/GenericMediaCard\";\r\nimport {connect} from \"react-redux\";\r\nimport {addCall} from \"../../../../store/actions/calls.actions\";\r\n\r\nconst RemoteMediaCard = ({localPeer, localStream, remoteStream, connection, call, addCall}) => {\r\n\r\n    useEffect(() => {\r\n        if (localPeer && connection && !remoteStream) {\r\n            // setTimeout(handleStartCall, Math.random() * 1500 + 1500); //\r\n            // handleStartCall();\r\n        }\r\n    }, [localPeer, connection]);\r\n\r\n\r\n    const handleStartCall = () => {\r\n        if (localPeer && !call) {\r\n            // FIXME adjust to only make one of the peers make the call and the other answer it on connection.\r\n            const call = localPeer.call(connection.peer, localStream);\r\n            addCall(call);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            { call\r\n                ? <GenericMediaCard stream={remoteStream} user={{nickname: 'remote'}} />\r\n                : <CircularProgress color=\"inherit\"/>\r\n\r\n            }\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const localPeer = state.localUser.peer;\r\n    const remotePeerId = ownProps.connection.peer;\r\n    const remoteStream = remotePeerId ? state.streams.data[remotePeerId] : null;\r\n    return {\r\n        localPeer: localPeer,\r\n        localStream: localPeer ? state.streams.data[localPeer.id] : null,\r\n        remoteStream: remoteStream,\r\n        call: state.calls.data[remotePeerId]\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, {addCall})(RemoteMediaCard);\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport RemoteMediaCard from \"../RemoteMediaCard/RemoteMediaCard\";\r\n\r\nconst RemoteMediaManager = ({connections}) => {\r\n    return (\r\n        <>\r\n            {connections && connections.map(connection => <RemoteMediaCard key={connection.connectionId} connection={connection} />)}\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    connections: Object.values(state.connections.data)\r\n});\r\n\r\nexport default connect(mapStateToProps)(RemoteMediaManager);\r\n","import React, {useEffect, useRef, useState} from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport GenericMediaCard from \"../GenericMediaCard/GenericMediaCard\";\r\nimport {Box, makeStyles} from \"@material-ui/core\";\r\nimport RemoteMediaManager from \"./RemoteMediaManager/RemoteMediaManager\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    roomMediaManager: {\r\n        padding: '5px',\r\n    },\r\n}));\r\n\r\nconst RoomMediaManager = ({localStream, localPeerMetadata}) => {\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <Box bgcolor='lightblue' width={'220px'} minWidth={'150px'} className={classes.roomMediaManager}>\r\n            <GenericMediaCard stream={localStream} muted={true} user={{nickname: localPeerMetadata.nickname}}/>\r\n            <RemoteMediaManager />\r\n        </Box>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => {\r\n    const localPeer = state.localUser.peer;\r\n    const localStream = localPeer ? state.streams.data[localPeer.id] : null;\r\n    return {\r\n        localPeerMetadata: state.localUser.metadata,\r\n        localStream: localStream,\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, {})(RoomMediaManager);\r\n","import {ADD_CONNECTION, REMOVE_CALL, REMOVE_CONNECTION, REMOVE_STREAM} from \"../actionTypes\";\r\nimport {callConnection} from \"./calls.actions\";\r\n\r\nexport const addConnection = connection => (dispatch, getState) => {\r\n    if (connection && connection.peer) {\r\n        dispatch({type: ADD_CONNECTION, payload: {connection}});\r\n        dispatch(initConnectionListeners(connection));\r\n    }\r\n};\r\n\r\nexport const removeConnection = connection => (dispatch, getState) => {\r\n    if (connection && connection.peer) {\r\n        dispatch({type: REMOVE_CONNECTION, payload: {connection}});\r\n    }\r\n};\r\n\r\nexport const initConnectionListeners = connection => (dispatch, getState) => {\r\n    if (connection && connection.connectionId) {\r\n        connection.on('data', data => {\r\n            const parsedData = JSON.parse(data);\r\n            if (parsedData.textMessage) {\r\n                console.log( `%c MESSAGE - ${parsedData.textMessage.author}: \"${parsedData.textMessage.text}\"`, 'background: black; color: white; padding: 1rem');\r\n            }\r\n\r\n            // TODO this is where we could receive plugin data of other peers. Example: coords where they placed something in a game.\r\n            if (parsedData.pluginData) {\r\n                console.log('received plugin data:', parsedData);\r\n            }\r\n        });\r\n\r\n        connection.on('close', () => {\r\n            dispatch(removeConnection(connection));\r\n        });\r\n    }\r\n};\r\n\r\nexport const connectWithPeer = remotePeerId => (dispatch, getState) => {\r\n    const {peer} = getState().localUser;\r\n\r\n    if (remotePeerId !== peer.id) {\r\n        const connection = peer.connect(remotePeerId, {metadata: {nickname: 'test-metadata'}});\r\n        dispatch(addConnection(connection));\r\n        dispatch(callConnection(connection));\r\n    }\r\n};\r\n\r\n\r\nexport const joinRoom = (roomId, password) => async (dispatch, getState) => {\r\n    const {socket, peer} = getState().localUser;\r\n\r\n    if (socket && peer) {\r\n        socket.emit('join', {roomId, password, peerId: peer.id},\r\n            // callback: the joining user himself is responsible to establish connections with other users\r\n            (data) => {\r\n                if (data) {\r\n                    data.room.joinedUsers.forEach((remotePeerId) => dispatch(connectWithPeer(remotePeerId)));\r\n                }\r\n            });\r\n    }\r\n};\r\n","import {INIT_LOCAL_USER_PEER, INIT_LOCAL_USER_SOCKET, SET_LOCAL_USER_METADATA} from \"../actionTypes\";\r\nimport Peer from \"peerjs\";\r\nimport {API_BASE_URL, PORT_SIGNALING, PORT_SOCKET, SSL_ENABLED} from \"../../constants\";\r\nimport io from \"socket.io-client\";\r\nimport {serializeQueryString} from \"../../utils\";\r\nimport {addConnection} from \"./connections.actions\";\r\nimport {addCall} from \"./calls.actions\";\r\nimport {startLocalStream} from \"./streams.actions\";\r\n\r\nconst initLocalUserPeer = (customPeerId) => async (dispatch, getState) => {\r\n    const peer = await new Peer(customPeerId, {\r\n        host: API_BASE_URL,\r\n        port: PORT_SIGNALING,\r\n        path: '/peer/signal',\r\n        // debug: 3,\r\n        config: {iceServers: [{url: 'stun:stun.l.google.com:19302'}]}\r\n    });\r\n\r\n    dispatch({\r\n        type: INIT_LOCAL_USER_PEER,\r\n        payload: {peer}\r\n    });\r\n\r\n    dispatch(startLocalStream(peer));\r\n    dispatch(initLocalUserPeerListeners(peer));\r\n};\r\n\r\n\r\n/**\r\n * Init the socket.io client. Once socket is ready, init the peerJS Peer and store them in the store.\r\n * @param queryParams\r\n * @returns {function(...[*]=)}\r\n */\r\nexport const initLocalUser = (queryParams) => async (dispatch, getState) => {\r\n    // FIXME peer init can fail when socket.id start with an underscore. Rarely happens though, allow peerId to be different from socketId\r\n    const protocol = SSL_ENABLED ? 'https' : 'http';\r\n    const socket = io(`${protocol}://${API_BASE_URL}:${PORT_SOCKET}`, {\r\n        // transports: ['websocket'],\r\n        secure: SSL_ENABLED,\r\n        query: serializeQueryString(queryParams)\r\n    });\r\n\r\n    socket.on('ready', (socketId) => {\r\n        dispatch({\r\n            type: SET_LOCAL_USER_METADATA,\r\n            payload: {metadata: queryParams}\r\n        });\r\n\r\n        dispatch({\r\n            type: INIT_LOCAL_USER_SOCKET,\r\n            payload: {socket}\r\n        });\r\n\r\n        dispatch(initLocalUserPeer(socketId));\r\n    });\r\n};\r\n\r\nconst initLocalUserPeerListeners = (peer) => (dispatch, getState) => {\r\n    const localPeer = peer || getState().localUser.peer;\r\n\r\n    if (localPeer) {\r\n        localPeer.on('open', id => {\r\n        });\r\n\r\n        localPeer.on('connection', connection => {\r\n            dispatch(addConnection(connection));\r\n        });\r\n\r\n        localPeer.on('call', call => {\r\n            const localStream = getState().streams.data[localPeer.id];\r\n            call.answer(localStream);\r\n            dispatch(addCall(call));\r\n        })\r\n    }\r\n};\r\n","import React, {useState} from 'react';\r\nimport {ThemeProvider, makeStyles} from '@material-ui/core/styles';\r\nimport LabelIcon from '@material-ui/icons/Label';\r\nimport WidgetsOutlinedIcon from '@material-ui/icons/WidgetsOutlined';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport List from '@material-ui/core/List';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport theme from '../../../style/theme/MainTheme';\r\n\r\nconst useStyles = makeStyles({\r\n    list: {\r\n        width: 250,\r\n    },\r\n    menuIcon: {\r\n        margin: '8px'\r\n    }\r\n});\r\n\r\nconst RoomSidebarMenu = () => {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const toggleDrawer = (event) => {\r\n        if (event.type === 'keydown') {\r\n            return;\r\n        }\r\n        setOpen(!open);\r\n    };\r\n\r\n    const list = () => (\r\n        <div className={classes.list} role=\"presentation\" onClick={toggleDrawer}>\r\n            <List>\r\n                {['Plugin 1', 'Plugin 2', 'Plugin 3', 'Plugin 4'].map((text, index) => (\r\n                    <ListItem button key={text}>\r\n                        <ListItemIcon><LabelIcon/></ListItemIcon>\r\n                        <ListItemText primary={text}/>\r\n                    </ListItem>\r\n                ))}\r\n            </List>\r\n            <Divider/>\r\n            <List>\r\n                <ListItem button>\r\n                    <ListItemIcon><WidgetsOutlinedIcon/></ListItemIcon>\r\n                    <ListItemText primary={'Browse Plugins'}/>\r\n                </ListItem>\r\n            </List>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Button>\r\n                <MenuIcon onClick={toggleDrawer} color='primary' fontSize='large' className={classes.menuIcon}/>\r\n                <Drawer open={open} onClose={toggleDrawer} anchor={'left'}>\r\n                    {list()}\r\n                </Drawer>\r\n            </Button>\r\n        </ThemeProvider>\r\n    );\r\n};\r\n\r\nexport default RoomSidebarMenu;\r\n","import React, {useState} from 'react';\r\nimport {ThemeProvider, makeStyles} from '@material-ui/core/styles';\r\nimport ChatIcon from '@material-ui/icons/Chat';\r\nimport Button from '@material-ui/core/Button';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport theme from '../../../style/theme/MainTheme';\r\n\r\nconst useStyles = makeStyles({\r\n    list: {\r\n        width: 300,\r\n    },\r\n    chatIcon: {\r\n        margin: '8px'\r\n    }\r\n});\r\n\r\nconst RoomSidebarChat = () => {\r\n    const classes = useStyles();\r\n    const [open, setOpen] = useState(false);\r\n\r\n    const toggleDrawer = (event) => {\r\n        if (event.type === 'keydown') {\r\n            return;\r\n        }\r\n        setOpen(!open);\r\n    };\r\n\r\n    const list = () => (\r\n        <div className={classes.list} role=\"presentation\" onClick={toggleDrawer}>\r\n            {/* TODO create a chat component, that gets it's data from redux, render it here */}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <Button>\r\n                <ChatIcon onClick={toggleDrawer} color='primary' fontSize='large' className={classes.chatIcon}/>\r\n                <Drawer open={open} onClose={toggleDrawer} anchor={'right'}>\r\n                    {list()}\r\n                </Drawer>\r\n            </Button>\r\n        </ThemeProvider>\r\n    );\r\n};\r\n\r\nexport default RoomSidebarChat;\r\n","import React from 'react';\r\nimport {Box} from \"@material-ui/core\";\r\nimport RoomSidebarMenu from \"../RoomSidebarMenu/RoomSidebarMenu\";\r\nimport RoomSidebarChat from \"../RoomSidebarChat/RoomSidebarChat\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\nconst RoomActionbar = () => {\r\n    return (\r\n        <>\r\n            <Box bgcolor={'wheat'} height={'10%'} display='flex' flexDirection='row' width={1} justifyContent={'center'}>\r\n                {/* space for some easy access actions like mute, enable camera, chat etc. */}\r\n                <RoomSidebarMenu />\r\n                <RoomSidebarChat />\r\n                <Link to={'/'}>Home</Link>\r\n            </Box>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default RoomActionbar;\r\n","import React, {useEffect} from 'react';\r\nimport {Box} from \"@material-ui/core\";\r\nimport RoomPluginContent from \"./RoomPluginContent/RoomPluginContent\";\r\nimport RoomMediaManager from \"./RoomMediaManager/RoomMediaManager\";\r\nimport {connect} from \"react-redux\";\r\nimport {addConnection, removeConnection, joinRoom} from \"../../store/actions/connections.actions\";\r\nimport {initLocalUser} from \"../../store/actions/localUser.actions\";\r\nimport {startLocalStream, clearAllStreams} from \"../../store/actions/streams.actions\";\r\nimport RoomActionbar from \"./RoomActionbar/RoomActionbar\";\r\n\r\nconst Room = ({socket, localPeer, connections, match, initLocalUser, joinRoom, startLocalStream, clearAllStreams}) => {\r\n    useEffect(() => {\r\n        initLocalUser({nickname: 'andiiii'});\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (localPeer) {\r\n            startLocalStream();\r\n            joinRoom(match.params.roomId, 'dummy123');\r\n        }\r\n    }, [localPeer]);\r\n\r\n    useEffect(() => {\r\n        // unmount\r\n        return () => {\r\n            if (socket) {\r\n                socket.emit('leave', match.params.roomId);\r\n                socket.disconnect();\r\n            }\r\n\r\n            if (connections) {\r\n                Object.values(connections).forEach(conn => conn.close());\r\n            }\r\n\r\n            if (window.localStream) {\r\n                window.localStream.getTracks().forEach(track => track.stop());\r\n            }\r\n            clearAllStreams();\r\n        }\r\n    }, [socket]);\r\n\r\n    return (\r\n        <>\r\n            <Box display='flex' flexDirection='column' width={1} height={'100%'} justifyContent={'space-between'} >\r\n                <Box display='flex' flexDirection='row' width={1} height={'90%'} justifyContent={'space-between'}>\r\n                    <RoomPluginContent/>\r\n                    <RoomMediaManager />\r\n                </Box>\r\n\r\n                <RoomActionbar />\r\n\r\n            </Box>\r\n        </>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n    socket: state.localUser.socket,\r\n    localPeer: state.localUser.peer,\r\n    connections: state.connections.data,\r\n});\r\n\r\nexport default connect(mapStateToProps, {addConnection, removeConnection, initLocalUser, joinRoom, startLocalStream, clearAllStreams})(Room);\r\n","const isLocal = process.env.NODE_ENV === 'development';\r\n\r\nexport const API_BASE_URL = isLocal ? 'localhost' : process.env.REACT_APP_API_BASE_URL;\r\nexport const SSL_ENABLED = isLocal ? false : process.env.REACT_APP_SSL_ENABLED === 'true';\r\n\r\nexport const PORT_SIGNALING = process.env.REACT_APP_PORT_SIGNALING;\r\nexport const PORT_SOCKET = process.env.REACT_APP_PORT_SOCKET;\r\n\r\n","import React from 'react';\r\nimport {ThemeProvider, makeStyles} from '@material-ui/core/styles';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport theme from '../../style/theme/MainTheme';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport {Link} from \"react-router-dom\";\r\n\r\n\r\nconst useStyles = makeStyles({\r\n    titleStyle: {\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        marginTop: '98px'\r\n    },\r\n    buttonStyle: {\r\n        borderRadius: '50px',\r\n        width: '106px',\r\n        fontWeight: 'bold',\r\n        border: '2px solid #E53935',\r\n        '&:hover': {\r\n            color: 'white',\r\n            backgroundColor: '#E53935',\r\n        },\r\n        '&:focus': {\r\n            outline: 0,\r\n        }\r\n    }\r\n});\r\n\r\n\r\nconst Home = () => {\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            {/* Header */}\r\n            <Box\r\n                height={63}\r\n                bgcolor='#E53935'\r\n            > </Box>\r\n\r\n            {/* Body */}\r\n            <Box\r\n                height={640}\r\n                display='flex'\r\n            >\r\n                {/* left box */}\r\n                <Box\r\n                    display='flex'\r\n                    flexDirection='column'\r\n                    width='50%'\r\n                    height='100%'\r\n                    bgcolor='#FDD835'\r\n                    alignItems='center'\r\n                >\r\n                    <Typography\r\n                        variant='h3'\r\n                        className={classes.titleStyle}\r\n                        gutterBottom\r\n                    > Create a new room\r\n                    </Typography>\r\n                    <Link to=\"/create-room\" style={{textDecoration: 'none'}}>\r\n                        <Button\r\n                            size=\"large\"\r\n                            color='primary'\r\n                            className={classes.buttonStyle}\r\n                        >\r\n                            Create\r\n                        </Button>\r\n                    </Link>\r\n                </Box>\r\n\r\n                {/* right box */}\r\n                <Box\r\n                    display='flex'\r\n                    flexDirection='column'\r\n                    width='50%'\r\n                    height='100%'\r\n                    bgcolor='#FB8C00'\r\n                    alignItems='center'\r\n                >\r\n                    <Typography\r\n                        variant=\"h3\"\r\n                        className={classes.titleStyle}\r\n                        gutterBottom\r\n                    > Join a room\r\n                    </Typography>\r\n                    <Button\r\n                        size=\"large\"\r\n                        color='primary'\r\n                        className={classes.buttonStyle}\r\n                    >Join\r\n                    </Button>\r\n                </Box>\r\n            </Box>\r\n            {/*Temporary for debugging purposes*/}\r\n            <Link to={'/rooms/dummy-room-id'}>Test room</Link>\r\n        </ThemeProvider>\r\n    )\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport {Link} from \"react-router-dom\";\r\nimport { ThemeProvider, makeStyles } from '@material-ui/core/styles';\r\nimport theme from '../../style/theme/MainTheme';\r\nimport Box from '@material-ui/core/Box';\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\r\n\r\n\r\nconst useStyles = makeStyles({\r\n    containerStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        paddingTop: '128px'\r\n    },\r\n    titleStyle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        padding: '16px',\r\n        color: 'white',\r\n        fontWeight: 'bold',\r\n        backgroundColor: '#FB8C00',\r\n    },\r\n    formControl: {\r\n        width: '20%',\r\n        margin: '16px'\r\n    },\r\n    select: {\r\n        borderColor: '#FB8C00',\r\n        '&:before': {\r\n            borderColor: '#FB8C00',\r\n        },\r\n        '&:after': {\r\n            borderColor: '#f57c00',\r\n        }\r\n    },\r\n    textfield: {\r\n        width: '616px',\r\n        marginLeft: '16px',\r\n    },\r\n    textfieldLink: {\r\n        width: '506px',\r\n        marginRight: '16px',\r\n        marginLeft: '16px',\r\n    },\r\n    alignButton: {\r\n        display: 'flex',\r\n        justifyContent: 'flex-end',\r\n        margin: '16px'\r\n    },\r\n    myButton: {\r\n        color: 'white',\r\n        boxShadow: 'none'\r\n    },\r\n    paper: {\r\n        padding: theme.spacing(2),\r\n        textAlign: 'center',\r\n        color: theme.palette.text.secondary,\r\n      },\r\n    copyLink: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        marginTop: '16px'\r\n    },\r\n    nextButton: {\r\n        color: 'white',\r\n        boxShadow: 'none',\r\n        margin: '32px',\r\n        width: '576px'\r\n    },\r\n    subtitle: {\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        marginTop: '16px'\r\n    }\r\n});\r\n\r\nconst RoomCreateForm = () => {\r\n    const [status, setStatus] = React.useState('');\r\n    const [name, setName] = React.useState('');\r\n    const [link, setLink] = React.useState('');\r\n    const [roomId, setRoomId] = React.useState('');\r\n    const [active, setActive ] = React.useState(true);\r\n    const classes = useStyles();\r\n\r\n    const handleChange = (event) => {\r\n        setStatus(event.target.value);\r\n    };\r\n\r\n    const handleChangeTexfield = (event) => {\r\n        setName(event.target.value)\r\n    };\r\n\r\n    const createRoom = () => {\r\n        let data = {\r\n            name: name,\r\n            password: 'Test123.',\r\n            maxUsers: 4,\r\n            status: status\r\n        }\r\n        if(name.length > 0 && status.length > 0) {\r\n            fetch('http://localhost:5002/api/rooms', {\r\n                method: 'post',\r\n                body: JSON.stringify(data),\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                  },\r\n            }).then(response => response.json()\r\n            ).then( data => {\r\n                setLink(`http://localhost:3000/#/room-lobby/${data}`);\r\n                setRoomId(data);\r\n                setActive(false)\r\n            });\r\n        } else {\r\n            console.log('error')\r\n        }\r\n    };\r\n    \r\n    const copyToClipboard = () =>{\r\n        let mylink = link;\r\n        mylink.select();\r\n        document.execCommand('copy');\r\n    };\r\n\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            {/* Header */}\r\n            <Box \r\n                display='flex'\r\n                height={63}\r\n                bgcolor='#E53935'\r\n                alignItems='center'\r\n                paddingLeft='36px'\r\n            >\r\n               <Link to=\"/\" style={{ textDecoration: 'none', color: 'white'}}>\r\n                    <ArrowBackIosIcon/>\r\n               </Link> \r\n            </Box>\r\n\r\n            {/* Body */}\r\n            <Container\r\n                className={classes.containerStyle}\r\n            >\r\n                {/* create a new room */}\r\n                {active?\r\n                <Box\r\n                    display='flex'\r\n                    flexDirection='column'\r\n                    width={648}\r\n                    height={307}\r\n                    borderRadius='5px'\r\n                    bgcolor='white'\r\n                >\r\n                    <Typography\r\n                        variant='h4'\r\n                        className={classes.titleStyle}\r\n                    >Create a new room\r\n                    </Typography>\r\n\r\n                    <FormControl variant=\"outlined\" className={classes.formControl}>\r\n                        <InputLabel id=\"demo-simple-select-outlined-label\">Status</InputLabel>\r\n                        <Select\r\n                    \r\n                        labelId=\"demo-simple-select-outlined-label\"\r\n                        id=\"demo-simple-select-outlined\"\r\n                        value={status}\r\n                        onChange={handleChange}\r\n                        label=\"Status\"\r\n                        className={classes.select}\r\n                        >\r\n                        <MenuItem value={'Privat'}>Privat</MenuItem>\r\n                        <MenuItem value={'Public'}>Public</MenuItem>\r\n                        </Select>\r\n                    </FormControl>\r\n\r\n                    <TextField\r\n                        required\r\n                        id=\"outlined-required\"\r\n                        label=\"Room name\"\r\n                        variant=\"outlined\"\r\n                        value={name}\r\n                        onChange={handleChangeTexfield}\r\n                        className={classes.textfield}\r\n                    />\r\n                    <div className={classes.alignButton}> \r\n                            <Button\r\n                                size=\"large\"\r\n                                color=\"secondary\"\r\n                                variant=\"contained\"\r\n                                className={classes.myButton}\r\n                                onClick={createRoom}                       \r\n                            >\r\n                                create\r\n                            </Button>\r\n                    </div>\r\n                </Box>:\r\n                \r\n                // share your room\r\n                <Box\r\n                display='flex'\r\n                flexDirection='column'\r\n                width={648}\r\n                height={307}\r\n                borderRadius='5px'\r\n                bgcolor='white'\r\n                >\r\n                <Typography\r\n                    variant='h4'\r\n                    className={classes.titleStyle}\r\n                >Room was created\r\n                </Typography>\r\n                \r\n                <div className={classes.copyLink}>\r\n                    <TextField\r\n                        variant=\"outlined\"\r\n                        value={link}\r\n                        onChange={handleChangeTexfield}\r\n                        className={classes.textfieldLink}\r\n                    />\r\n                    <Button\r\n                        size=\"large\"\r\n                        color=\"secondary\"\r\n                        variant=\"contained\"\r\n                        className={classes.myButton}\r\n                        onClick={() => {navigator.clipboard.writeText(link)}}                  \r\n                    >\r\n                        copy\r\n                    </Button>\r\n                </div> \r\n                <Typography\r\n                        variant='h6'\r\n                        className={classes.subtitle}\r\n                    > Share your link and invite someone to your room\r\n                </Typography>\r\n                \r\n                <Link to={`/room-lobby/${roomId}`} style={{ textDecoration: 'none',}}>\r\n                 <Button\r\n                    size=\"large\"\r\n                    color=\"secondary\"\r\n                    variant=\"contained\"\r\n                    className={classes.nextButton}                     \r\n                   >\r\n                        next\r\n                </Button>\r\n                </Link>\r\n               </Box>\r\n            }\r\n            </Container>\r\n        </ThemeProvider>\r\n    )\r\n};\r\n\r\nexport default RoomCreateForm;\r\n","import React from 'react';\r\nimport { HashRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport RoomLobby from \"../RoomLobby/RoomLobby\";\r\nimport Room from \"../Room/Room\";\r\nimport Home from \"../Home/Home\";\r\nimport RoomCreateForm from \"../RoomCreateForm/RoomCreateForm\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\n\r\nconst App = () => {\r\n    return (\r\n        <CssBaseline>\r\n            <Router>\r\n                <Switch>\r\n                    <Route exact path='/' component={Home} />\r\n                    <Route exact path='/create-room' component={RoomCreateForm} />\r\n                    <Route exact path='/room-lobby/:roomId' component={RoomLobby} />\r\n                    <Route path='/rooms/:roomId' component={Room} />\r\n                </Switch>\r\n            </Router>\r\n        </CssBaseline>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React, {StrictMode} from 'react';\r\nimport './index.scss';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store';\r\nimport App from './components/App/App';\r\n\r\nReactDOM.render(\r\n  <>\r\n      <Provider store={store}>\r\n          <App />\r\n      </Provider>\r\n  </>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}