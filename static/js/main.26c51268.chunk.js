(this.webpackJsonpquackamole=this.webpackJsonpquackamole||[]).push([[0],{155:function(e,t,a){e.exports=a(200)},157:function(e,t,a){},195:function(e,t){},200:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=(a(157),a(11)),c=a.n(o),i=a(13),l=a(41),s=a(118),u=a(119),m=a(21),d=Object(m.b)((function(e,t){switch(t.type){case"SET_CURRENT_ROOM":return e.data=t.payload.room,void(e.error=null);case"SET_VISITED_LOBBY":return void(e.visitedLobby=t.payload.visitedLobby);case"SET_CURRENT_ROOM_ERROR":return void(e.error=t.payload.error)}}),{data:{},visitedLobby:!1,error:null}),p=a(12),f=(a(120),function(e){if(e){if(!e.getTracks)return void console.error("something wrong with the stream:",e);e.getTracks().forEach((function(e){return e.stop()}))}}),g=function(e){var t=localStorage.getItem(e);return t?JSON.parse(t):{}},h={audio:{},video:{width:{ideal:128},height:{ideal:72}}},b={socket:null,metadata:g("metadata"),mediaConstraints:h,mediaStream:null,micEnabled:!0,camEnabled:!0,loading:!1,error:null},E=Object(m.b)((function(e,t){switch(t.type){case"SET_LOCAL_USER_LOADING":return void(e.loading=t.payload.loading);case"INIT_LOCAL_USER_SOCKET":return e.socket=t.payload.socket,void(e.error=null);case"SET_LOCAL_USER_METADATA":return e.metadata=t.payload.metadata,void(e.error=null);case"SET_LOCAL_USER_MEDIA_STREAM":var a=e.mediaStream;return e.mediaStream=t.payload.mediaStream,e.error=null,void(a&&(t.payload.mediaStream&&t.payload.mediaStream.stream.id!==a.stream.id?f(a.stream):t.payload.mediaStream||f(a.stream)));case"SET_LOCAL_USER_MEDIA_CONSTRAINTS":return e.mediaConstraints=t.payload.constraints,void(e.error=null);case"SET_LOCAL_USER_MICROPHONE_ENABLED":return e.micEnabled=t.payload.enabled,void(e.error=null);case"SET_LOCAL_USER_CAMERA_ENABLED":return e.camEnabled=t.payload.enabled,void(e.error=null);case"SET_LOCAL_USER_ERROR":return void(e.error=t.payload.error);case"RESET_LOCAL_USER":return e.socket=null,e.metadata=g("metadata"),e.mediaConstraints=h,e.mediaStream=null,e.micEnabled=!0,e.camEnabled=!0,e.loading=!1,void(e.error=null)}}),b),v=Object(m.b)((function(e,t){switch(t.type){case"ADD_PEER":var a=t.payload,n=a.socketId,r=a.metadata;return e.data[n]={metadata:r},void(e.error=null);case"REMOVE_PEER":var o=t.payload.peer;return delete e.data[o.id],void(e.error=null);case"SET_PEERS_ERROR":return void(e.error=t.payload.error)}}),{data:{},error:null}),y=Object(m.b)((function(e,t){switch(t.type){case"ADD_CONNECTION":var a=t.payload.connection;return e.data[a.remoteSocketId]=a,void(e.error=null);case"REMOVE_CONNECTION":var n=t.payload.connection;return delete e.data[n.remoteSocketId],void(e.error=null);case"SET_CONNECTIONS_ERROR":return void(e.error=t.payload.error)}}),{data:{},error:null}),x=Object(m.b)((function(e,t){switch(t.type){case"ADD_STREAM":var a=t.payload,n=a.socketId,r=a.stream;return e.data[n]={stream:r},void(e.error=null);case"REMOVE_STREAM":var o=t.payload.socketId,c=e.data[o];return void(c&&(f(c.stream),delete e.data[o]));case"SET_STREAM_ERROR":return void(e.error=t.payload.error);case"CLEAR_ALL_STREAMS":var i=Object(m.a)(e.data);return Object.values(i).forEach((function(e){return f(e.stream)})),e.data={},void(e.error=null)}}),{data:{},error:null}),S=Object(m.b)((function(e,t){switch(t.type){case"SET_PLUGIN":var a=t.payload.plugin,n=a.url,r=a.name,o=a.iframe;return e.iframe=o,e.url=n,e.name=r,void(e.error=null);case"SET_PLUGIN_ERROR":return void(e.error=t.payload.error)}}),{iframe:null,url:"",name:"p2p-test-plugin",error:null}),k=Object(m.b)((function(e,t){switch(t.type){case"ADD_NEW_MESSAGE":return void e.push(t.payload)}}),[]),O=Object(l.combineReducers)({room:d,localUser:E,peers:v,connections:y,remoteStreams:x,plugin:S,chat:k}),w=Object(l.createStore)(O,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(s.a))),C=a(257),j=a(28),I=a(15),R=a(252),T=a(241),N=a(260),_=a(64),A=a(258),L=a(6),D=a.n(L),U=a(7),M=a(237),P=a(251),B=a(79),z=a.n(B),F=a(133),W=Object(F.a)({palette:{primary:{main:"#2E7D32"},secondary:{main:"#FBC02D"}}}),G=a(56),V=a(121),q=a.n(V),K=function(e,t){return function(a,n){t&&a({type:"ADD_STREAM",payload:{socketId:e,stream:t}})}},J=function(e){return function(t,a){e&&t({type:"REMOVE_STREAM",payload:{socketId:e}})}},H=function(e){return{type:"SET_CURRENT_ROOM_ERROR",payload:{error:e}}},Y=function(e){return{type:"SET_VISITED_LOBBY",payload:{visitedLobby:e}}},Q=function(){return function(e,t){var a=t();e(Y(!1));var n=a.localUser.socket;if(n){var r=a.room.data;r.id&&(n.emit("leave",r.id),e({type:"SET_CURRENT_ROOM",payload:{room:{}}})),n.disconnect(),e(de());var o=a.localUser.mediaStream;o&&o.stream.getTracks().forEach((function(e){return e.stop()})),e(function(){var e=Object(U.a)(D.a.mark((function e(t,a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"CLEAR_ALL_STREAMS"});case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}var c=a.connections.data;c&&Object.values(c).forEach((function(t){return e(ne(t))}))}},X=a(23),Z=function(){return function(){var e=Object(U.a)(D.a.mark((function e(t,a){var n,r,o,c,i,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("startLocalStream dispatched"),n=a().localUser,r=n.mediaConstraints,o=n.micEnabled,c=n.camEnabled,o||c){e.next=5;break}return t($()),e.abrupt("return");case 5:return(i=Object(X.a)({},r)).audio=!!o&&i.audio,i.video=!!c&&i.video,e.prev=8,e.next=11,navigator.mediaDevices.getUserMedia(i);case 11:return l=e.sent,e.next=14,t(ue(l));case 14:return e.next=16,t({type:"SET_LOCAL_USER_MEDIA_STREAM",payload:{mediaStream:{stream:l}}});case 16:return e.abrupt("return",l);case 19:e.prev=19,e.t0=e.catch(8),console.error("local stream couldn't be started",e.t0);case 22:case"end":return e.stop()}}),e,null,[[8,19]])})));return function(t,a){return e.apply(this,arguments)}}()},$=function(){return function(){var e=Object(U.a)(D.a.mark((function e(t,a){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=a().localUser.mediaStream)&&(f(n.stream),t({type:"SET_LOCAL_USER_MEDIA_STREAM",payload:{mediaStream:!1}}));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},ee=function(e){return function(){var t=Object(U.a)(D.a.mark((function t(a,n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a({type:"SET_LOCAL_USER_MEDIA_CONSTRAINTS",payload:{constraints:e}});case 2:n().localUser.mediaStream&&a(Z());case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},te=function(){return function(e,t){var a=!t().localUser.micEnabled;e({type:"SET_LOCAL_USER_MICROPHONE_ENABLED",payload:{enabled:a}}),(t().localUser.mediaStream||a)&&e(Z())}},ae=function(){return function(e,t){var a=!t().localUser.camEnabled;e({type:"SET_LOCAL_USER_CAMERA_ENABLED",payload:{enabled:a}}),(t().localUser.mediaStream||a)&&e(Z())}},ne=function(e){return function(){var t=Object(U.a)(D.a.mark((function t(a,n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e&&e.remoteSocketId&&e.socketId)){t.next=8;break}if(!n().remoteStreams.data[e.remoteSocketId]){t.next=5;break}return t.next=5,a(J(e.remoteSocketId));case 5:return e.close(),t.next=8,a({type:"REMOVE_CONNECTION",payload:{connection:e}});case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},re=function(e){return function(t,a){e&&(console.log("Initializing data channel listeners..."),e.onmessage=function(e){var n=JSON.parse(e.data),r=n.type;if(n.textMessage){t({type:"ADD_NEW_MESSAGE",payload:n.textMessage});var o=a().localUser.metadata;console.log("%c MESSAGE - ".concat(o.nickname||n.textMessage.authorSocketId,': "').concat(n.textMessage.text,'"'),"background: black; color: white; padding: 1rem; border: 1px solid white; border-radius: 5px;")}if("PLUGIN_DATA"===r){window.postMessage(n.payload,"*");var c=a().plugin.iframe;c&&c.contentWindow.postMessage(n,"*")}if("PEER_INTRODUCTION"===r){console.log("Connected peer is introducing himself to you:",n.payload);var i=n.payload,l=i.senderSocketId,s=i.metadata;t({type:"ADD_PEER",payload:{metadata:s,socketId:l}})}},e.onopen=function(){console.log("datachannel open...")},e.onclose=function(){console.log("datachannel close")})}},oe=function(e){return function(t,a){if(e&&e.socketId){console.log("Initializing RTCPeerConnection listeners...");var n=0,r=[],o=function t(){if(r.length){var o=a().localUser.socket;console.log("Sending ".concat(r.length,"x ICE CANDIDATES to peer...")),o.emit("signaling",{receiverSocketId:e.remoteSocketId,iceCandidates:r}),r=[]}if(n<=9){var c=450*Math.pow(1.5,n),i=100*Math.round(c/100*2)/2;setTimeout(t,Math.round(i)),n++}};o(),e.onicecandidate=function(e){var t=e.candidate;t?r.push(t):(console.log("no more ICE"),n=10,o())},e.ontrack=function(a){a.track;var n=a.streams;n&&n[0]?(console.log("A remote stream track was received from ".concat(e.remoteSocketId,"...")),t(K(e.remoteSocketId,n[0]))):console.error("ontrack - this should not happen... streams[0] is empty!")},e.onnegotiationneeded=function(){var t=Object(U.a)(D.a.mark((function t(a){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log('(onnegotiationneeded triggered for connection with "'.concat(e.remoteSocketId,'"...)'));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.oniceconnectionstatechange=function(){"failed"===e.iceConnectionState&&(console.error("oniceconnectionstatechange - restarting ICE"),e.restartIce())},e.onsignalingstatechange=function(t){"stable"===e.signalingState&&e.localDescription&&e.remoteDescription&&console.log("CONNECTION ESTABLISHED!! signaling state:",e.signalingState)},e.ondatachannel=function(){var a=Object(U.a)(D.a.mark((function a(n){return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Remote peer opened a data channel with you..."),e.defaultDataChannel=n.channel,a.next=4,t(re(e.defaultDataChannel));case 4:t(le(e.defaultDataChannel));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}},ce=function(e){return function(){var t=Object(U.a)(D.a.mark((function t(a,n){var r,o;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n().localUser.socket,e!==r.id){t.next=3;break}return t.abrupt("return");case 3:if(!n().connections.data[e]){t.next=8;break}console.error("You already established a connection with ".concat(e)),t.next=15;break;case 8:return console.log('Preparing to connect with "'.concat(e,'" ...')),t.next=11,a(se(e));case 11:return o=t.sent,t.next=14,a(me(o));case 14:return t.abrupt("return",o);case 15:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},ie=function(e,t){return function(){var a=Object(U.a)(D.a.mark((function a(n,r){var o;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e&&(o=JSON.stringify(t),e.send(o));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},le=function(e){return function(){var t=Object(U.a)(D.a.mark((function t(a,n){var r,o,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n().localUser,o=r.socket,c=r.metadata,o&&c?a(ie(e,{type:"PEER_INTRODUCTION",payload:{senderSocketId:o.id,metadata:c}})):console.error("socket and/or metadata not available!");case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},se=function(e){return function(){var t=Object(U.a)(D.a.mark((function t(a,n){var r,o,c,i,l,s,u;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log('Creating new RTCPeerConnection with "'.concat(e,'" ...')),r=n().localUser.socket,(o=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}],iceCandidatePoolSize:1})).socketId=r.id,o.remoteSocketId=e,o.defaultDataChannel=o.createDataChannel("default"),t.next=9,a(re(o.defaultDataChannel));case 9:return t.next=11,a(oe(o));case 11:return t.next=13,n().localUser.mediaStream;case 13:if(!(c=t.sent)){t.next=34;break}i=c.stream.getTracks(),console.log("Adding ".concat(i.length,'x stream tracks to the new RTCPeerConnection with "').concat(e,'"...')),l=Object(G.a)(i),t.prev=18,l.s();case 20:if((s=l.n()).done){t.next=26;break}return u=s.value,t.next=24,o.addTrack(u,c.stream);case 24:t.next=20;break;case 26:t.next=31;break;case 28:t.prev=28,t.t0=t.catch(18),l.e(t.t0);case 31:return t.prev=31,l.f(),t.finish(31);case 34:return t.next=36,a({type:"ADD_CONNECTION",payload:{connection:o}});case 36:return t.abrupt("return",o);case 37:case"end":return t.stop()}}),t,null,[[18,28,31,34]])})));return function(e,a){return t.apply(this,arguments)}}()},ue=function(e){return function(){var t=Object(U.a)(D.a.mark((function t(a,n){var r,o,c,i,l,s,u,m,d,p;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object.values(n().connections.data),o=0,c=r;case 2:if(!(o<c.length)){t.next=44;break}i=c[o],console.log('Updating localStream for RTCPeerConnection with "'.concat(i.remoteSocketId,'"...')),l=Object(G.a)(i.getSenders()),t.prev=6,l.s();case 8:if((s=l.n()).done){t.next=14;break}return u=s.value,t.next=12,i.removeTrack(u);case 12:t.next=8;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(6),l.e(t.t0);case 19:return t.prev=19,l.f(),t.finish(19);case 22:if(!e){t.next=40;break}m=Object(G.a)(e.getTracks()),t.prev=24,m.s();case 26:if((d=m.n()).done){t.next=32;break}return p=d.value,t.next=30,i.addTrack(p,e);case 30:t.next=26;break;case 32:t.next=37;break;case 34:t.prev=34,t.t1=t.catch(24),m.e(t.t1);case 37:return t.prev=37,m.f(),t.finish(37);case 40:a(me(i));case 41:o++,t.next=2;break;case 44:case"end":return t.stop()}}),t,null,[[6,16,19,22],[24,34,37,40]])})));return function(e,a){return t.apply(this,arguments)}}()},me=function(e){return function(){var t=Object(U.a)(D.a.mark((function t(a,n){var r,o;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().localUser.socket,t.next=3,e.createOffer();case 3:return o=t.sent,t.next=6,e.setLocalDescription(o);case 6:console.log("Sending offer to remote peer..."),r.emit("signaling",{receiverSocketId:e.remoteSocketId,description:e.localDescription});case 8:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},de=function(){return{type:"RESET_LOCAL_USER"}},pe=function(e){return function(){var t=Object(U.a)(D.a.mark((function t(a,n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.on("ready",(function(t){a({type:"INIT_LOCAL_USER_SOCKET",payload:{socket:e}}),e.on("user-leave",(function(e){var t=n().connections.data[e];t&&a(ne(t))})),e.on("signaling",function(){var t=Object(U.a)(D.a.mark((function t(r){var o,c,i,l,s,u,m,d;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=r.senderSocketId,c=r.description,i=r.iceCandidates,l=n().connections.data[o]){t.next=6;break}return t.next=5,a(se(o));case 5:l=t.sent;case 6:if(!c||"offer"!==c.type){t.next=19;break}return console.log("You received an ".concat("new"===l.connectionState?"INITIAL":"",' OFFER from "').concat(o,'"...')),t.next=10,l.setRemoteDescription(new RTCSessionDescription(c));case 10:return t.next=12,l.createAnswer();case 12:return s=t.sent,t.next=15,l.setLocalDescription(s);case 15:console.log("Sending answer to remote peer..."),e.emit("signaling",{receiverSocketId:o,description:s}),t.next=45;break;case 19:if(!c||!c.type){t.next=26;break}return console.log('You received an ANSWER from "'.concat(o,'"...')),l||console.error("No offer was ever made for the received answer. Investigate!"),t.next=24,l.setRemoteDescription(new RTCSessionDescription(c));case 24:t.next=45;break;case 26:if(!i){t.next=45;break}console.log('You received ICE CANDIDATES from "'.concat(o,'"...')),u=Object(G.a)(i),t.prev=29,u.s();case 31:if((m=u.n()).done){t.next=37;break}return d=m.value,t.next=35,l.addIceCandidate(d);case 35:t.next=31;break;case 37:t.next=42;break;case 39:t.prev=39,t.t0=t.catch(29),u.e(t.t0);case 42:return t.prev=42,u.f(),t.finish(42);case 45:case"end":return t.stop()}}),t,null,[[29,39,42,45]])})));return function(e){return t.apply(this,arguments)}}())}));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},fe=function(e){return function(t,a){!function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)}("metadata",e),t({type:"SET_LOCAL_USER_METADATA",payload:{metadata:e}})}},ge=a(242),he=a(250),be=a(244),Ee=a(245),ve=a(259),ye=a(249),xe=a(246),Se=a(261),ke=a(243),Oe=a(239),we=a(240),Ce=a(54),je=a.n(Ce),Ie=Object(M.a)((function(e){return{root:{display:"flex"},cardWrapper:{position:"relative",display:"flex",flexFlow:"column nowrap",justifyContent:"center",alignItems:"center",marginBottom:"5px",width:"100%",height:"130px"},videoOffIcon:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},media:{width:"100%",height:"100%",objectFit:"cover"},displayName:{color:"white",opacity:"0.8",position:"absolute",bottom:"5px",left:"5px",fontSize:"0.9rem",userSelect:"none"}}})),Re=function(e){var t=e.stream,a=e.muted,o=void 0!==a&&a,c=e.user,i=Ie(),l=Object(n.useRef)(null);return Object(n.useEffect)((function(){!function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.current&&t&&(e.current.srcObject=t,e.current.oncanplay=function(){e.current&&(e.current.play(),e.current.muted=a)})}(l,t,o)}),[t]),r.a.createElement(Oe.a,{className:i.cardWrapper},t?r.a.createElement("video",{ref:l,className:i.media}):r.a.createElement(we.a,{color:"inherit"}),t&&!t.getVideoTracks()[0]&&r.a.createElement(je.a,{className:i.videoOffIcon,color:"primary",fontSize:"large"}),c&&c.nickname&&r.a.createElement(A.a,{className:i.displayName},c.nickname))},Te=a(75),Ne=a.n(Te),_e=a(73),Ae=a.n(_e),Le=a(74),De=a.n(Le),Ue=Object(M.a)({wrapper:{textAlign:"center"},dialogWrapper:{display:"block"},containerForm:{maxWidth:"95vw"},formControl:{display:"block"},select:{width:"100%",marginBottom:"1rem"}}),Me=Object(i.b)((function(e){return{localStreamWrapper:e.localUser.mediaStream,mediaConstraints:e.localUser.mediaConstraints}}))((function(e){var t=e.dispatch,a=e.localStreamWrapper,o=e.mediaConstraints,c=Ue(),i=Object(n.useState)(null),l=Object(p.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)(null),d=Object(p.a)(m,2),f=d[0],g=d[1],h=Object(n.useState)(null),b=Object(p.a)(h,2),E=b[0],v=b[1],y=Object(n.useState)(null),x=Object(p.a)(y,2),S=x[0],k=x[1],O=Object(n.useState)(!1),w=Object(p.a)(O,2),C=w[0],j=w[1];Object(n.useEffect)((function(){I()}),[]),Object(n.useEffect)((function(){_()}),[S,E]),Object(n.useEffect)((function(){t(C?Z():$())}),[C]),Object(n.useEffect)((function(){if(a){var e=a.stream.getAudioTracks()[0];if(e&&s){var t=s.find((function(t){return t.label===e.label}));t&&v(t)}var n=a.stream.getVideoTracks()[0];if(n&&f){var r=f.find((function(e){return e.label===n.label}));r&&k(r)}}}),[a]);var I=function(){var e=Object(U.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:t=e.sent,u(t.filter((function(e){return"audioinput"===e.kind}))),g(t.filter((function(e){return"videoinput"===e.kind})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(U.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){j(!1)},_=function(){var e=Object(U.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(X.a)({},o),E&&(a.audio=Object(X.a)(Object(X.a)({},a.audio),{},{deviceId:E.deviceId})),S&&(a.video=Object(X.a)(Object(X.a)({},a.video),{},{deviceId:S.deviceId})),!E||!S){e.next=6;break}return e.next=6,t(ee(a));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(A.a,{className:c.wrapper},r.a.createElement(T.a,{onClick:R},"Preview Audio & Video Settings"),r.a.createElement("div",null,r.a.createElement(ge.a,{className:c.dialogWrapper,disableBackdropClick:!0,disableEscapeKeyDown:!0,open:C,onClose:N},r.a.createElement(ke.a,null,"Audio & Video Settings"),r.a.createElement(be.a,{className:c.dialogWrapper},r.a.createElement(Re,{stream:a?a.stream:null,muted:!1}),r.a.createElement(T.a,{style:{height:"100%"},onClick:function(){return t(ae())}},function(){if(a){var e=a.stream.getVideoTracks()[0];if(e&&e.enabled)return r.a.createElement(Ne.a,{color:"primary",fontSize:"large"})}return r.a.createElement(je.a,{color:"primary",fontSize:"large"})}()),r.a.createElement(T.a,{style:{height:"100%"},onClick:function(){return t(te())}},function(){if(a){var e=a.stream.getAudioTracks()[0];if(e&&e.enabled)return r.a.createElement(Ae.a,{color:"primary",fontSize:"large"})}return r.a.createElement(De.a,{color:"primary",fontSize:"large"})}()),r.a.createElement("form",{className:c.containerForm},r.a.createElement(Ee.a,{className:c.formControl},r.a.createElement(Se.a,{htmlFor:"select-mic"},"Audio Input (Microphone)"),r.a.createElement(ve.a,{className:c.select,value:E?E.label:"",onChange:function(e){var t=e.target.value,a=s.find((function(e){return e.label===t}));v(a||null)},input:r.a.createElement(xe.a,{id:"select-mic"})},s&&s.map((function(e,t){return r.a.createElement(ye.a,{key:e.groupId+t,value:e.label},e.label)})))),r.a.createElement(Ee.a,{className:c.formControl},r.a.createElement(Se.a,{htmlFor:"select-cam"},"Video Input (Camera)"),r.a.createElement(ve.a,{className:c.select,value:S?S.label:"",onChange:function(e){var t=e.target.value,a=f.find((function(e){return e.label===t}));k(a||null)},input:r.a.createElement(xe.a,{id:"select-cam"})},f&&f.map((function(e,t){return r.a.createElement(ye.a,{key:e.groupId+t,value:e.label},e.label)})))))),r.a.createElement(he.a,null,r.a.createElement(T.a,{onClick:N,color:"primary"},"Close")))))})),Pe=Object(M.a)({containerStyle:{display:"flex",justifyContent:"center",paddingTop:"128px"},titleStyle:{display:"flex",justifyContent:"center",width:"100%",padding:"16px",color:"white",fontWeight:"bold",backgroundColor:"#388E3C"},nicknameStyle:{width:"90%",margin:"16px"},textfieldLink:{width:"90%",marginRight:"16px",marginLeft:"16px"},nextButton:{color:"white",boxShadow:"none",width:"100%"},alignbutton:{display:"flex",justifyContent:"center",width:"80%",marginTop:"24px",marginBottom:"24px"}}),Be=Object(i.b)((function(e){return{nickname:e.localUser.metadata.nickname||"",roomError:e.room.error}}))((function(e){var t=e.dispatch,a=e.history,o=e.match,c=e.nickname,i=e.roomError,l=Object(n.useState)(c),s=Object(p.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(o.params.roomId),f=Object(p.a)(d,2),g=f[0],h=f[1],b=Pe(),E=function(){var e=Object(U.a)(D.a.mark((function e(n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(fe({nickname:u})),t(Y(!0)),t(H(null)),a.push("/rooms/".concat(o.params.roomId));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(P.a,{theme:W},r.a.createElement(A.a,{display:"flex",height:63,bgcolor:"#2E7D32",alignItems:"center",paddingLeft:"36px"},r.a.createElement(j.b,{to:"/",style:{textDecoration:"none",color:"white"}},r.a.createElement(z.a,null))),r.a.createElement(R.a,{container:!0,className:b.containerStyle},r.a.createElement(R.a,{item:!0,xs:11,md:6,lg:5},r.a.createElement(A.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",borderRadius:"5px",bgcolor:"white"},r.a.createElement(_.a,{variant:"h4",className:b.titleStyle},"Enter the room"),r.a.createElement(N.a,{required:!0,label:"Nickname",variant:"outlined",value:u,className:b.nicknameStyle,onChange:function(e){m(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&E()},autoFocus:!0}),r.a.createElement(N.a,{required:!0,label:"Room ID",variant:"outlined",value:g,className:b.textfieldLink,onChange:function(e){h(e.target.value)}}),r.a.createElement("div",{className:b.alignbutton},r.a.createElement(T.a,{onClick:E,size:"large",color:"secondary",variant:"contained",className:b.nextButton},"join")),i&&r.a.createElement(A.a,{color:"red",textAlign:"center"},i.error.message)),r.a.createElement(Me,null))))})),ze=function(e){return function(t,a){e&&t({type:"SET_PLUGIN",payload:{plugin:e}})}},Fe={PLUGIN_SEND_TO_ALL_PEERS:function(e){return function(t,a){var n=Object.values(a().connections.data),r={type:"PLUGIN_DATA",payload:e.data.payload};n.forEach((function(e){t(ie(e.defaultDataChannel,r))}))}},PLUGIN_SEND_TO_PEER:function(e){return function(t,a){var n=e.data,r=n.peerId,o=n.payload,c=a().connections.data[r],i={type:"PLUGIN_DATA",payload:o};t(ie(c.defaultDataChannel,i))}},PLUGIN_PLATFORM_CONTROL_REQUEST:function(){return console.log("plugin is requesting something from the platform (mute local user, rumble screen, etc")}},We=Object(i.b)((function(e){return{plugin:e.plugin}}))((function(e){var t=e.dispatch,a=e.plugin,o=Object(n.useRef)();return Object(n.useEffect)((function(){var e=function(e){t(function(e){return function(){var t=Object(U.a)(D.a.mark((function t(a,n){var r;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.data.type&&e.data.type.startsWith("PLUGIN")&&(r=Fe[e.data.type],a(r(e)));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(e))};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}),[]),Object(n.useEffect)((function(){o&&o.current&&t(ze(Object(X.a)(Object(X.a)({},a),{},{iframe:o.current})))}),[o,a.url]),r.a.createElement(A.a,{flexGrow:1},a&&a.url&&r.a.createElement("iframe",{src:a.url,style:{width:"100%",height:"100%",border:"none"},ref:o,title:"plugin"}))})),Ge=Object(i.b)((function(e,t){var a=t.connection.remoteSocketId,n=a?e.remoteStreams.data[a]:null;return{remoteStream:n?n.stream:null,remoteNickname:(e.peers.data[a]?e.peers.data[a].metadata:{}).nickname||"missing Nickname"}}))((function(e){var t=e.remoteStream,a=e.remoteNickname;return r.a.createElement(Re,{stream:t,user:{nickname:a}})})),Ve=Object(i.b)((function(e){return{connections:Object.values(e.connections.data)}}))((function(e){var t=e.connections;return r.a.createElement(r.a.Fragment,null,t&&t.map((function(e){return r.a.createElement(Ge,{key:"conn"+e.remoteSocketId,connection:e})})))})),qe=Object(M.a)((function(e){return{roomMediaManager:{padding:"5px",backgroundColor:"#f5deb340",borderLeft:"1px solid #0000003b"}}})),Ke=Object(i.b)((function(e){var t=e.localUser.mediaStream,a=t?t.stream:null;return{localPeerMetadata:e.localUser.metadata,localStream:a}}))((function(e){var t=e.localStream,a=e.localPeerMetadata,n=qe();return r.a.createElement(A.a,{bgcolor:"lightblue",width:"220px",minWidth:"150px",className:n.roomMediaManager},r.a.createElement(Re,{stream:t,muted:!0,user:{nickname:a.nickname}}),r.a.createElement(Ve,null))})),Je=a(128),He=a.n(Je),Ye=a(127),Qe=a.n(Ye),Xe=a(264),Ze=a(255),$e=a(248),et=a(205),tt=a(254),at=a(253),nt=a(122),rt=a.n(nt),ot=a(123),ct=a.n(ot),it=a(124),lt=a.n(it),st=Object(M.a)({list:{width:250},menuIcon:{margin:"8px"}}),ut=[{name:"Random number",url:"https://andreas-schoch.github.io/p2p-test-plugin/"},{name:"Paint",url:"https://andreas-schoch.github.io/quackamole-plugin-paint/"},{name:"Gomoku",url:"https://quackamole-dev.github.io/quackamole-plugin-gomoku/"},{name:"2d Shooter (WIP)",url:"https://andreas-schoch.github.io/quackamole-plugin-2d-topdown-shooter/"},{name:"Breakout game",url:"https://andreas-schoch.github.io/breakout-game/"}],mt=Object(i.b)((function(e){return{plugin:e.plugin}}))((function(e){var t=e.dispatch,a=e.plugin,o=st(),c=Object(n.useState)(!1),i=Object(p.a)(c,2),l=i[0],s=i[1],u=function(e){"keydown"!==e.type&&s(!l)},m=function(e){var n=e.currentTarget.dataset.index;t(ze(a?Object(X.a)(Object(X.a)({},a),ut[n]):ut[n]))};return r.a.createElement(P.a,{theme:W},r.a.createElement(T.a,null,r.a.createElement(lt.a,{onClick:u,color:"primary",fontSize:"large",className:o.menuIcon}),r.a.createElement(Xe.a,{open:l,onClose:u,anchor:"left"},r.a.createElement("div",{className:o.list,role:"presentation",onClick:u},r.a.createElement($e.a,null,ut.map((function(e,t){var a=e.name;return r.a.createElement(et.a,{button:!0,key:a,onClick:m,"data-index":t},r.a.createElement(at.a,null,r.a.createElement(rt.a,null)),r.a.createElement(tt.a,{primary:a}))}))),r.a.createElement(Ze.a,null),r.a.createElement($e.a,null,r.a.createElement(et.a,{button:!0},r.a.createElement(at.a,null,r.a.createElement(ct.a,null)),r.a.createElement(tt.a,{primary:"Browse Plugins"})))))))})),dt=a(126),pt=a.n(dt),ft=a(265),gt=a(3),ht=a(4),bt=Object(ht.a)((function(e){var t=e.palette,a=e.spacing,n=a(2.5),r=a(4),o=t.primary.main;return{wrapper:{"&:nth-child(1)":{marginTop:"auto"}},avatar:{width:r,height:r},leftRow:{textAlign:"left"},rightRow:{textAlign:"right"},msg:{padding:a(1,2),borderRadius:4,marginBottom:4,display:"inline-block",wordBreak:"break-word",fontFamily:"Roboto, Helvetica, Arial, sans-serif",fontSize:"14px"},left:{borderTopRightRadius:n,borderBottomRightRadius:n,backgroundColor:t.grey[100]},right:{borderTopLeftRadius:n,borderBottomLeftRadius:n,backgroundColor:o,color:t.common.white},leftFirst:{borderTopLeftRadius:n},leftLast:{borderBottomLeftRadius:n},rightFirst:{borderTopRightRadius:n},rightLast:{borderBottomRightRadius:n}}}),{name:"ChatMsg"})((function(e){var t=e.classes,a=e.avatar,n=e.messages,o=e.side,c=e.GridContainerProps,i=e.GridItemProps,l=e.AvatarProps,s=e.getTypographyProps;return r.a.createElement(R.a,Object.assign({container:!0,spacing:2,justify:"right"===o?"flex-end":"flex-start"},c,{className:t.wrapper}),"left"===o&&r.a.createElement(R.a,Object.assign({item:!0},i),r.a.createElement(ft.a,Object.assign({src:a},l,{className:Object(gt.a)(t.avatar,l.className)}))),r.a.createElement(R.a,{item:!0,xs:8},n.map((function(a,c){var i,l=s(a,c,e);return r.a.createElement("div",{key:a.id||c,className:t["".concat(o,"Row")]},r.a.createElement(_.a,Object.assign({align:"left"},l,{className:Object(gt.a)(t.msg,t[o],(i=c,0===i?t["".concat(o,"First")]:i===n.length-1?t["".concat(o,"Last")]:""),l.className)}),a))}))))}));bt.defaultProps={avatar:"",messages:[],side:"left",GridContainerProps:{},GridItemProps:{},AvatarProps:{},getTypographyProps:function(){return{}}};var Et=bt,vt=a(125),yt=a.n(vt),xt=Object(M.a)({chat:{height:"100vh",display:"flex",flexFlow:"column nowrap",width:"320px"},chatFeed:{display:"flex",flexFlow:"column nowrap",flexGrow:1,maxHeight:"calc(100% - 60px)",overflow:"auto",padding:"8px"},chatInput:{display:"flex",flexFlow:"row nowrap",alignItems:"flex-end",padding:"8px"},chatInputTextfield:{flexGrow:1,zIndex:1e3,backgroundColor:"white"},chatInputSendBtn:{fontSize:"40px",margin:"auto 5px",cursor:"pointer",opacity:.8,transition:"opacity 0.2s","&:hover":{opacity:.95}}}),St=Object(i.b)((function(e){return{chatData:e.chat,socket:e.localUser.socket}}))((function(e){var t=e.dispatch,a=e.chatData,o=e.socket,c=xt(""),i=Object(n.useState)(""),l=Object(p.a)(i,2),s=l[0],u=l[1],m=Object(n.useRef)(null);Object(n.useEffect)((function(){m.current&&(m.current.scrollTop=m.current.scrollHeight)}),[a]);var d=function(e){var a;e.preventDefault(),s.replace(/\n/g,"").length&&(t((a=s,function(){var e=Object(U.a)(D.a.mark((function e(t,n){var r,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object.values(n().connections.data),(o=n().localUser.socket)?(r.forEach((function(e){var n={textMessage:{text:a,authorSocketId:o.id}};t(ie(e.defaultDataChannel,n))})),t({type:"ADD_NEW_MESSAGE",payload:{text:a,authorSocketId:o.id}})):console.error("socket not found");case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())),u(""))},f=a.map((function(e,t){return e.authorSocketId===o.id?r.a.createElement(Et,{key:t,side:"right",messages:[e.text]}):r.a.createElement(Et,{key:t,avatar:"",messages:[e.text]})}));return r.a.createElement("div",{className:c.chat},r.a.createElement("div",{className:c.chatFeed,ref:m},f),r.a.createElement("div",{className:c.chatInput},r.a.createElement(N.a,{variant:"outlined",multiline:!0,rowsMax:5,className:c.chatInputTextfield,onChange:function(e){u(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(e.shiftKey?u(s.concat("\n")):d(e))},value:s,autoFocus:!0}),r.a.createElement(yt.a,{className:c.chatInputSendBtn,onClick:d})))})),kt=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],o=t[1],c=function(e){return o(!a)};return r.a.createElement(P.a,{theme:W},r.a.createElement(T.a,{onClick:c},r.a.createElement(pt.a,{color:"primary",fontSize:"large"})),r.a.createElement(Xe.a,{open:a,onClose:c,anchor:"right"},r.a.createElement(St,null)))},Ot=Object(i.b)((function(e){return{localStreamWrapper:e.localUser.mediaStream}}))((function(e){var t=e.localStreamWrapper,a=e.dispatch;return r.a.createElement(A.a,{bgcolor:"#f5deb3eb",height:"10%",display:"flex",justifyContent:"center",borderTop:"1px solid #0000003b",alignItems:"center"},r.a.createElement(mt,null),r.a.createElement(j.b,{to:"/",style:{height:"100%"}},r.a.createElement(T.a,{style:{height:"100%"}},r.a.createElement(He.a,{color:"primary",fontSize:"large"}))),r.a.createElement(T.a,{style:{height:"100%"},onClick:function(){return a(te())}},function(){if(t){var e=t.stream.getAudioTracks()[0];if(e)return e.enabled?r.a.createElement(Ae.a,{color:"primary",fontSize:"large"}):r.a.createElement(De.a,{color:"primary",fontSize:"large"})}return r.a.createElement(Qe.a,{color:"primary",fontSize:"large"})}()),r.a.createElement(T.a,{style:{height:"100%"},onClick:function(){return a(ae())}},function(){if(t){var e=t.stream.getVideoTracks()[0];if(e&&e.enabled)return r.a.createElement(Ne.a,{color:"primary",fontSize:"large"})}return r.a.createElement(je.a,{color:"primary",fontSize:"large"})}()),r.a.createElement(kt,null))})),wt=Object(i.b)((function(e){return{socket:e.localUser.socket,localPeerLoading:e.localUser.loading,roomError:e.room.error,currentRoom:e.room.data,visitedLobby:e.room.visitedLobby}}))((function(e){var t=e.dispatch,a=e.socket,o=e.match,c=e.history,i=e.roomError,l=e.currentRoom,s=e.localPeerLoading,u=e.visitedLobby;return Object(n.useEffect)((function(){var e,n;i||!u?c.push("/room-lobby/".concat(o.params.roomId)):a||s?a&&a.id&&!l.id&&t((e=o.params.roomId,n="dummy123",function(){var t=Object(U.a)(D.a.mark((function t(a,r){var o;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(o=r().localUser.socket)&&o.emit("join",{roomId:e,password:n,socketId:o.id},function(){var e=Object(U.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=9;break}return e.next=3,a(Z());case 3:return e.next=5,a({type:"SET_CURRENT_ROOM",payload:{room:n.room}});case 5:n.room.joinedUsers.forEach((function(e){return a(ce(e))})),console.log("There are ".concat(n.room.joinedUsers.length,"x joinedUsers")),e.next=10;break;case 9:a(H(t));case 10:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())):t(function(){var e=Object(U.a)(D.a.mark((function e(t,a){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g("metadata"),a().localUser.loading||(n.nickname&&n.nickname.length?(t({type:"SET_LOCAL_USER_LOADING",payload:{loading:!0}}),r=q()("https://derpmasters.online:5000",{transports:["websocket"],secure:"https"===window.location.protocol,query:(o=n,Object.entries(o).map((function(e){var t=Object(p.a)(e,2),a=t[0],n=t[1];return"".concat(a,"=").concat(n)})).join("&"))}),t(pe(r))):t(H({error:{name:"RoomError",message:"Please enter a nickname before joining the room."}})));case 2:case"end":return e.stop()}var o}),e)})));return function(t,a){return e.apply(this,arguments)}}())}),[i,a]),Object(n.useEffect)((function(){return function(){return t(Q())}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{display:"flex",flexDirection:"column",width:1,height:"100%",justifyContent:"space-between"},r.a.createElement(A.a,{display:"flex",flexDirection:"row",width:1,height:"90%",justifyContent:"space-between"},r.a.createElement(We,null),r.a.createElement(Ke,null)),r.a.createElement(Ot,null)))})),Ct=a(256),jt=a(130),It=a.n(jt),Rt=a(131),Tt=a.n(Rt),Nt=a(129),_t=a.n(Nt),At=Object(M.a)({container:{display:"flex",flexDirection:"column",alignItems:"center",width:314,height:400,border:"solid 1px lightgrey",backgroundColor:"white"},smallScreenContainer:{display:"flex",flexDirection:"column",alignItems:"center",width:314,height:400,border:"solid 1px lightgrey",backgroundColor:"white",margin:8},alignTitle:{display:"flex",alignItems:"center",margin:24},customizeTitle:{fontWeight:"bold",fontSize:"25px",marginLeft:4},customizeIcon:{marginRight:4,color:"rgb(46, 125, 50)"},customizeText:{paddingLeft:16,paddingRight:16,marginBottom:16}}),Lt=function(e){var t,a=At(),n=Object(Ct.a)("(max-width: 950px)");return r.a.createElement("div",{className:n?a.smallScreenContainer:a.container},r.a.createElement("div",{className:a.alignTitle},"VideogameAssetIcon"===(t=e.content.icon)?r.a.createElement(_t.a,{fontSize:"large",className:a.customizeIcon}):"AssessmentOutlinedIcon"===t?r.a.createElement(It.a,{fontSize:"large",className:a.customizeIcon}):"CallOutlinedIcon"===t?r.a.createElement(Tt.a,{fontSize:"large",className:a.customizeIcon}):void 0,r.a.createElement(_.a,{variant:"h4",className:a.customizeTitle},e.content.title)),r.a.createElement(_.a,{className:a.customizeText,align:"center"},e.content.text),r.a.createElement("img",{src:e.content.image,height:"181",width:"275",alt:"icon"}))},Dt=Object(M.a)({header:{color:"white",textTransform:"uppercase",display:"flex",justifyContent:"center",alignItems:"center"},box:{display:"flex",width:"100%",height:"100%",justifyContent:"center"},smallScreenBox:{display:"flex",flexDirection:"column",width:"100%",height:"100%",alignItems:"center"},titleContainer:{display:"flex",flexDirection:"column",alignItems:"center",width:"40%",minWidth:310},titleStyle:{color:"white",fontWeight:"bold",marginTop:"98px"},buttonStyle:{borderRadius:"5px",fontWeight:"bold",color:"white",backgroundColor:"#FBC02D","&:hover":{backgroundColor:"#f9a825"},"&:focus":{outline:0}},mainImg:{display:"flex",height:224,width:309,borderRadius:5,marginTop:76,marginLeft:36,marginRight:36},smallScreenMainImg:{display:"flex",height:224,width:309,borderRadius:5,margin:36},bulletPoints:{display:"flex",justifyContent:"center",zIndex:"3",position:"relative",bottom:150},smallScreenBulletPoints:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:72}}),Ut=function(){var e=Dt(),t=Object(Ct.a)("(max-width: 950px)");return r.a.createElement(P.a,{theme:W},r.a.createElement(A.a,{height:63,bgcolor:"#2E7D32",className:e.header},r.a.createElement("h1",null,r.a.createElement("span",{role:"img","aria-label":"a duck"},"\ud83e\udd86 "),"Quackamole",r.a.createElement("span",{role:"img","aria-label":"an avocado"}," \ud83e\udd51"))),r.a.createElement(A.a,{height:540,display:"flex",zIndex:1},r.a.createElement(A.a,{className:t?e.smallScreenBox:e.box,bgcolor:"#388E3C"},r.a.createElement("div",{className:e.titleContainer},r.a.createElement(_.a,{variant:"h3",className:e.titleStyle,gutterBottom:!0,align:"center"},"Peer-to-peer video chat platform"),r.a.createElement(j.b,{to:"/create-room",style:{textDecoration:"none"}},r.a.createElement(T.a,{size:"large",className:e.buttonStyle},"Create a room"))),r.a.createElement("img",{src:"https://via.placeholder.com/400x300",className:t?e.smallScreenMainImg:e.mainImg,alt:"quackamole room preview"}))),r.a.createElement("div",{className:t?e.smallScreenBulletPoints:e.bulletPoints},[{title:"Gaming",icon:"VideogameAssetIcon",image:"https://via.placeholder.com/400x300",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nec urna dolor. Maecenas vehicula dui ut quam imperdiet."},{title:"Working",icon:"AssessmentOutlinedIcon",image:"https://via.placeholder.com/400x300",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nec urna dolor. Maecenas vehicula dui ut quam imperdiet."},{title:"Chatting",icon:"CallOutlinedIcon",image:"https://via.placeholder.com/400x300",text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec nec urna dolor. Maecenas vehicula dui ut quam imperdiet."}].map((function(e,t){return r.a.createElement(Lt,{content:e,key:e.title+t}," ")}))),r.a.createElement(j.b,{to:"/rooms/dummy-room-id"},"Test room"))},Mt=Object(M.a)({containerStyle:{display:"flex",justifyContent:"center",paddingTop:"128px"},titleStyle:{display:"flex",justifyContent:"center",padding:"16px",color:"white",fontWeight:"bold",backgroundColor:"#388E3C",width:"100%"},formControl:{width:"20%",margin:"16px"},select:{borderColor:"#FB8C00","&:before":{borderColor:"#FB8C00"},"&:after":{borderColor:"#f57c00"}},textfield:{width:"90%",marginTop:"48px"},textfieldLink:{width:"90%",marginRight:"16px",marginLeft:"16px"},alignButton:{display:"flex",justifyContent:"flex-end",width:"100%",padding:"16px"},btnCreateWrapper:{position:"relative"},btnCreate:{color:"white",boxShadow:"none"},fabProgress:{position:"absolute",top:-6,left:-6,zIndex:1},btnCreateProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},paper:{padding:W.spacing(2),textAlign:"center",color:W.palette.text.secondary},copyLink:{display:"flex",alignItems:"center",marginTop:"16px",width:"90%"},nextButton:{color:"white",boxShadow:"none",marginBottom:"16px",width:"100%"},subtitle:{display:"flex",justifyContent:"center",margin:"16px"}}),Pt=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),i=Object(p.a)(c,2),l=i[0],s=i[1],u=Object(n.useState)(""),m=Object(p.a)(u,2),d=m[0],f=m[1],g=Object(n.useState)(!1),h=Object(p.a)(g,2),b=h[0],E=h[1],v=Object(n.useState)(null),y=Object(p.a)(v,2),x=y[0],S=y[1],k=Mt(),O=Object(I.f)(),w=function(e){o(e.target.value)},C=function(){var e=Object(U.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b||"Enter"!==t.key){e.next=7;break}if(d){e.next=6;break}return e.next=4,L();case 4:e.next=7;break;case 6:!x&&d&&O.push("/room-lobby/".concat(d));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(U.a)(D.a.mark((function e(){var t,n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0!==(t={name:a,password:"Test123.",maxUsers:4}).name.length){e.next=5;break}return S(new Error("The room needs a name")),e.abrupt("return");case 5:return E(!0),e.next=8,fetch("".concat("https://derpmasters.online:5000","/api/rooms"),{method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});case 8:if(n=e.sent,E(!1),!(n.status>=400)){e.next=13;break}return S(new Error("Something went wrong. Try again")),e.abrupt("return");case 13:return e.next=15,n.json();case 15:(r=e.sent)&&(S(null),f(r.id),s("".concat(window.location.origin,"/#/room-lobby/").concat(r.id))),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),S(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),M=r.a.createElement(A.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",borderRadius:"5px",bgcolor:"white"},r.a.createElement(_.a,{variant:"h4",className:k.titleStyle},"Create a new room"),r.a.createElement(N.a,{required:!0,label:"Room name",variant:"outlined",value:a,onChange:w,className:k.textfield,onKeyPress:C,autoFocus:!0}),r.a.createElement("div",{className:k.alignButton},r.a.createElement("div",{className:k.btnCreateWrapper},r.a.createElement(T.a,{size:"large",color:"secondary",variant:"contained",disabled:b,className:k.btnCreate,onClick:L},"Create"),b&&r.a.createElement(we.a,{size:24,className:k.btnCreateProgress})))),B=r.a.createElement(A.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%",borderRadius:"5px",bgcolor:"white",onKeyPress:C},r.a.createElement(_.a,{variant:"h4",className:k.titleStyle},"Room was created"),r.a.createElement("div",{className:k.copyLink},r.a.createElement(N.a,{variant:"outlined",value:l,onChange:w,className:k.textfieldLink,autoFocus:!0}),r.a.createElement(T.a,{size:"large",color:"secondary",variant:"contained",className:k.myButton,onClick:function(){navigator.clipboard.writeText(l)}},"copy")),r.a.createElement(_.a,{variant:"h6",align:"center",className:k.subtitle},"Share the link to let people join this room"),r.a.createElement(j.b,{to:"/room-lobby/".concat(d),style:{textDecoration:"none",width:"80%"}},r.a.createElement(T.a,{size:"large",color:"secondary",variant:"contained",className:k.nextButton,to:"/room-lobby/".concat(d)},"next")));return r.a.createElement(P.a,{theme:W},r.a.createElement(A.a,{display:"flex",height:63,bgcolor:"#2E7D32",alignItems:"center",paddingLeft:"36px"},r.a.createElement(j.b,{to:"/",style:{textDecoration:"none",color:"white"}},r.a.createElement(z.a,null))),r.a.createElement(R.a,{container:!0,className:k.containerStyle},r.a.createElement(R.a,{item:!0,xs:11,md:6,lg:6},d?B:M,x&&r.a.createElement(A.a,{color:"red",textAlign:"center"},x.message))))},Bt=function(){return r.a.createElement(C.a,null,r.a.createElement(j.a,null,r.a.createElement(I.c,null,r.a.createElement(I.a,{exact:!0,path:"/",component:Ut}),r.a.createElement(I.a,{exact:!0,path:"/create-room",component:Pt}),r.a.createElement(I.a,{exact:!0,path:"/room-lobby/:roomId",component:Be}),r.a.createElement(I.a,{path:"/rooms/:roomId",component:wt}))))};a(201);c.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{store:w},r.a.createElement(Bt,null))),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.26c51268.chunk.js.map